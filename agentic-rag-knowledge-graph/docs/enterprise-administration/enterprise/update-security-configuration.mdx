---
title: "Update (Security Configuration)"
description: "This operation updates the security configuration for your deployment."
slug: "update-security-configuration"
url: "/update-security-configuration"
guid: "GUID-E8BBEA52-2E24-403D-9B66-ACCC2CA2084E"
migratedTopicMetadata:
  FTITLE: "Update Security Configuration"
  FDESCRIPTION: ""
  FCHANGES: "New Product"
  FISHRELEASELABEL: ""
  FESRISOFTWARERELEASE: ""
  FESRITAGCLOUD: ""
  FESRIRECREATIONPROCEDURE: ""
  FESRIPRODUCTLIFECYCLE: "10.9-*"
  CREATED-ON: "13/08/2020 16:45:32"
  FAUTHOR: "tohara"
  FSTATUS: "Released"
  MODIFIED-ON: "16/11/2021 11:21:51"
  VERSION: "1"
  FRESOLUTION: ""
  DOC-LANGUAGE: "en"
  FISHREVCOUNTER: "18"
  ED: "GUID-C833298F-8938-448C-BDEC-9D7372D7A87F"
  FUSERGROUP: "VUSERGROUPARCGISONLINEDOC"
  READ-ACCESS: ""
restInfoMetadata:
  apiPath: /security/config/update
  urlSegments:
    - name: <root>
      url: /enterprise-admin-root
    - name: /security/config/update
  methods:
    - post
  sslOnly: 'no'
  versionIntroduced: '10.9'
  requiredCapabilities:
    - name: Access allowed with the "Security and infrastructure" privilege
      url: /managing-access-to-the-enterprise-admin-api
---

## Description

The `update` operation updates the security configuration for your ArcGIS Enterprise on Kubernetes deployment.


## Request parameters

<StyledTable headers={"Parameter,Details"}>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">

      `securityConfig` 

    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">

      The JSON object representing the security configuration for ArcGIS Enterprise on Kubernetes. For information on included properties, see the [Security configuration properties](/update-security-configuration#security-configuration-properties) section below.

    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">

      `f` 

    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">

      The response format. The default format is `html`.

      Values: `html` | `json` | `pjson`

    </StyledTableCell>
  </StyledTableRow>
</StyledTable>


## Security configuration properties

<StyledTable headers={"Parameter,Details"}>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">

      `serverRole` 

    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">

      The role assigned to the federated server.

    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">

      `userStoreConfig` 

    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">

      Connection information about the active user store.

    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">

      `roleStoreConfig` 

    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">

      Connection information about the active role store.

    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">

      `tokenServiceKey` 

    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">

      The key used to encrypt tokens.

    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">

      `enableAutomaticAccountCreation` 

    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">

      A Boolean that indicates whether new organization accounts will automatically be created when enterprise users access your Enterprise portal for the first time (`true`), or whether accounts will be manually created. The default value is `false`.

      Values: `true` | `false`

    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">

      `securityEnabled` 

    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">

      A Boolean that indicates whether security is enabled for any GIS service. The default value is `true`.

      Values: `true` | `false`

    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">

      `disableServicesDirectory` 

    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">

      A Boolean that indicates whether access to the services directory will be disabled. The default value is `false`.

      Values: `true` | `false`

    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">

      `allowedProxyHosts` 

    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">

      This property restricts what hosts Enterprise portal can access directly. This restriction applies to several scenarios, including when the Enterprise portal accesses resources from a server that does not support Cross-Origin Resource Sharing (CORS) or when saving credentials used to access a secure service. By default, this property is not defined and no restrictions are applied. Use the format (.\*).domain.com to allow access to all machines within a specified domain. Domains must be comma-separated.

      ```markdown label=Example
      "allowedProxyHosts": "gisserver1.domain.com, gisserver2.domain.com, (.*).example.com"

      ```

    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">

      `allowInternetCORSAccess` 

    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">

      Introduced at 10.9.1. A Boolean that controls the value of the Access-Control-Allow-Private-Network response header in a CORS preflight request to a portal service URL. This property was added to support the Private Network Access web specification (CORS-RFC1918) that aims to protect sites accessed over a private network from being able to make internal CORS requests. The default value is `true`.

      Values: `true` | `false`

    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">

      `contentSecurityPolicy` 

    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">

      Introduced at 11.4. The `contentSecurityPolicy` property defines the Content-Security-Policy (CSP) response headers that are included when accessing the organization's portal website or any of its associated applications. The CSP for the portal website, and the CSP for its applications, are defiend separately. The values for each CSP can be one or more of the CSP directives based on the CSP specifications. For more information on CSP syntax and directives, reference the [Content-Security-Policy](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy#values) documentation maintained by MDN Web Docs.

      ```markdown
      "contentSecurityPolicy": {
        "home": "frame-ancestors 'self';",
        "apps": "frame-ancestors 'self' sample.domain.com;"
      }

      ```

    </StyledTableCell>
  </StyledTableRow>
</StyledTable>


### Portal properties

<StyledTable headers={"Parameter,Details"}>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">

      `portalURL` 

    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">

      The organization URL.

    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">

      `privatePortalUrl` 

    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">

      The internal service URL for accessing the portal sharing container.

    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">

      `portalSecretKey` 

    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">

      The key obtained after federating an ArcGIS Server to an organization.

    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">

      `portalMode` 

    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">

      Must be set as `ARCGIS_PORTAL_FEDERATION`.

    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">

      `serverId` 

    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">

      The ID of the server that is federated with the organization.

    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">

      `serverURL` 

    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">

      The external URL of the server federated with the organization.

    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">

      `webgisServerTrustKey` 

    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">

      The key used for internal communication. This key is automatically generated during site creation and should not be modified.

    </StyledTableCell>
  </StyledTableRow>
</StyledTable>


### Forward proxy config

<StyledTable headers={"Parameter,Details"}>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">

      `httpProxyHost` 

    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">

      The forward proxy host name for http requests.

    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">

      `httpsProxyHost` 

    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">

      The forward proxy host name for https requests.

    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">

      `httpProxyPort` 

    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">

      The forward proxy port number for http requests.

    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">

      `httpsProxyPort` 

    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">

      The forward proxy port number for https requests.

    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">

      `httpProxyUser` 

    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">

      The forward proxy user name for http requests when authentication is required.

    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">

      `httpsProxyUser` 

    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">

      The forward proxy user name for https requests when authentication is required.

    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">

      `httpProxyPassword` 

    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">

      The forward proxy password for http requests when authentication is required.

    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">

      `httpsProxyPassword` 

    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">

      The forward proxy password for https requests when authentication is required.

    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">

      `nonProxyHosts` 

    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">

      A list of host names separated by `|` that can be accessed directly and do not require the use of the proxy. Wildcards can be used for an entire domain (`*.example.com`).

    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">

      `isHttpProxyPasswordEncrypted` 

    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">

      A Boolean that indicates whether the http proxy password is encrypted. When adding or updating the password, this property should be changed to `false`. Once saved, the password becomes encrypted and this value will be changed to `true` automatically.

      Values: `true` | `false`

    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">

      `isHttpProxyPasswordEncrypted` 

    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">

      A Boolean that indicates whether the https proxy password is encrypted. When adding or updating the password, this should be changed to `false`. Once saved, the password becomes encrypted and this value will be changed to `true` automatically.

      Values: `true` | `false`

    </StyledTableCell>
  </StyledTableRow>
</StyledTable>


## Example usage

The following is a sample POST request for the `update` operation:

```other
POST /context/admin/security/config/update HTTP/1.1
Host: organization.domain.com
Content-Type: application/x-wwww-form-urlencoded
Content-Length: []

securityConfig={
  "serverRole": "HOSTING_SERVER",
  "userStoreConfig": {
    "type": "BUILTIN",
    "properties": {}
  },
  "groupStoreConfig": {
    "type": "BUILTIN",
    "properties": {}
  },
  "tokenServiceKey": "CXlyzoKXH71nE/ip/2lF1aLUbjFBAyaQ2xV8UtkNH8o=",
  "enableAutomaticAccountCreation": false,
  "securityEnabled": true,
  "allowInternetCORSAccess": true,
  "disableServicesDirectory": false,
  "contentSecurityPolicy": {
    "home": "frame-ancestors 'self';",
    "apps": "frame-ancestors 'self' sample.domain.com;"
  },
  "portalProperties": {
    "portalSecretKey": "d9f410f2f71240aab64dea54e6f983fe",
    "privatePortalUrl": "https://privateportal.domain.local:8443/arcgis/",
    "portalUrl": "https://organization.domain.com/context/",
    "serverUrl": "https://organization.domain.com/context/",
    "includeOrgIdWIthUsername": false,
    "portalMode": "ARCGIS_PORTAL_FEDERATION",
    "serverId": "rXPmB6CgeHlyG9sC"
  },
  "forwardProxyConfig": {
    "httpProxyHost": "proxy.example.com",
    "httpsProxyHost": "proxy.example.com",
    "httpProxyPort": 8888,
    "httpsProxyPort": 8888,
    "httpProxyUser": "username",
    "httpProxyPassword": "password",
    "httpsProxyUser": "username",
    "httpsProxyPassword": "password",
    "nonProxyHosts": "enterprise.example.com|server.example.com",
    "isHttpProxyPasswordEncrypted": false,
    "isHttpsProxyPasswordEncrypted": false
  }
}&f=pjson&token=m7zGSezM7znt6ZuIwr827imJxOTSDsjYujVdd7SiAQLYG1HmesG8EbSnTwCbiekEh0QwRdmeyp1hP63M60TPrdZQ2NzIg5G7qFaQh40MdiOCfh60-6oPKC2MNoqwdVDZ3srzreVZb66QofWXws8GMrKWkgP45A-2an5crKvReUo-pwvkzm68W87Q0yPJFA2Kww39UnMYNw-5qd2-Bt04VmkrqKI-lCbA-jFZY_UGzeGzNqnBGrjKuVB_q17HogMw

```

## JSON Response example

```other
{"status": "success"}
```