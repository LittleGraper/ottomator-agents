---
title: "Export Site"
description: "The exportSite  operation exports the portal's configuration to a specified location."
slug: "export-site"
url: "/export-site"
guid: "GUID-1C6C16FE-4CA1-4444-BCBE-3ECD6B08B73F"
migratedTopicMetadata:
  FTITLE: "Export Site"
  FDESCRIPTION: ""
  FCHANGES: "Style changes"
  FISHRELEASELABEL: ""
  FESRISOFTWARERELEASE: ""
  FESRITAGCLOUD: ""
  FESRIRECREATIONPROCEDURE: ""
  FESRIPRODUCTLIFECYCLE: "11.1- *"
  CREATED-ON: "18/02/2023 16:17:28"
  FAUTHOR: "tohara"
  FSTATUS: "Released"
  MODIFIED-ON: "27/09/2023 08:50:32"
  VERSION: "5"
  FRESOLUTION: ""
  DOC-LANGUAGE: "en"
  FISHREVCOUNTER: "3"
  ED: "GUID-B4DD2E81-90D4-4314-8A6D-582F91CC23BB"
  FUSERGROUP: "VUSERGROUPARCGISONLINEDOC"
  READ-ACCESS: ""
restInfoMetadata:
  apiPath: /exportSite
  urlSegments:
    - name: <root>
      url: /portal-administration-root
    - name: /exportSite
  methods:
    - post
  sslOnly: 'no'
  versionIntroduced: '10.4'
  requiredCapabilities:
    - name: Access allowed only with the default administrator role
      url: /privileges-for-portal-admin-api
---

## Description

The `exportSite` operation exports the portal site configuration to a specified location. The exported file includes the following information:

- Content directory: The content directory contains the data associated with every item in the portal.
- Portal database: A snapshot of the portal database that stores users, groups, items, and other information about the portal.

<Note type={"caution"}>

You cannot make other administrative site configuration changes while a backup is in progress. Before performing the `exportSite` operation, ensure that all site configurations have been made.

</Note>

##  File store request parameters

<StyledTable headers={"Parameter,Details"}>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">

      `location` 

    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">

      A folder path, accessible to the portal, where the exported site configuration will be written.

      ```javascript label=Example
      location=\\server\share\backup
      ```

    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">

      `validate` 

    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">

      Introduced at ArcGIS Enterprise 11.1. The This parameter validates the folder path specified in the `location` parameter, ensuring that it is accessible before performing the `exportSite` operation. If set to `true`, the path will be validated, and the operation will return either a success response or an error message. The default value is `false`.

      Values: `true` | `false`

    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">

      `f` 

    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">

      The response format. The default response format is `html`. 

      Values: `json` | `html` | `pjson`

    </StyledTableCell>
  </StyledTableRow>
</StyledTable>


## AWS S3 request parameters

<StyledTable headers={"Parameter,Details"}>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">

      `location` 

    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">

      A path to the location where the exported site configuration will be created. The backup file written to this location will contain a pointer to the `backupObjectStore` and `backupObjectStoreRegion` parameters.

      ```javascript label=Example
      location=\\server\share\backup
      ```

    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">

      `backupObjectStore` 

    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">

      The name of the backup bucket.

      Example

      ```javascript label=Example
      backupObjectStore="sampleBucket"
      ```

    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">

      `backupObjectStoreRegion` 

    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">

      The AWS region the backup bucket is in.

      Example

      ```javascript label=Example
      backupObjectStoreRegion="us-east-1"
      ```

    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">

      `validate` 

    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">

      Introduced at ArcGIS Enterprise 11.1. This parameter validates both the folder path and the backup bucket, ensuring that they are accessible before performing the `exportSite` operation. If set to `true`, the path and backup bucket will be validated, and the operation will return either a success response or an error message. The default value is `false`.

      Values: `true` | `false`

    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">

      `f` 

    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">

      The response format. The default response format is `html`.

      Values: `json` | `html` | `pjson`

    </StyledTableCell>
  </StyledTableRow>
</StyledTable>

## Azure Blob request parameters

<StyledTable headers={"Parameter,Details"}>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">

      `location` 

    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">

      A folder path, accessible to the portal, where the exported site configuration will be written.

      ```javascript label=Example
      location=\\server\share\backup
      ```

    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">

      `backupObjectStore` 

    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">

      The URL for the backup Azure Blob container, which will have the following format: 
      
      ```other

      https://<accountName>.blob.core.windows.net/<container>
      ```

      ```other label=Example

      backupObjectStore=https://sampleserver.blob.core.windows.net/mycontainer
      ```

    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">

      `backupObjectStoreConnectionStr` 

    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">

      A string that stores the connection information for the Azure Blob container. Include the `accountKey` and `accountName` parameter values, and optionally the `accountEndpoint` parameter value (if connecting to storage services in different regions).

      ```javascript label=Example

      backupObjectStoreConnectionStr={
        "accountName": "myaccountName",
        "accountKey": "myAccountKey",
        "accountEndpoint": "accountEndpoint"
      }
      ```

    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">

      `validate` 

    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">

      Introduced at ArcGIS Enterprise 11.1. This parameter validates both the folder path and the Azure Blob container, ensuring that they are accessible before performing the `exportSite` operation. If set to `true`, the folder path and Azure Blob container will be validated, and the operation will return either a success response or an error message. The default value is `false`.

      Values: `true` | `false`

    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">

      `f` 

    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">

      The response format. The default response format is `html`.

      Values: `json` | `html` | `pjson`

    </StyledTableCell>
  </StyledTableRow>
</StyledTable>


## Example usages

### Example one: file store

The following is a sample POST request for the `exportSite` operation that demonstrates validating the location for a file store:

```javascript
POST /webadaptor/portaladmin/exportSite HTTP/1.1
Host: machine.domain.com
Content-Type: application/x-www-form-urlencoded
Content-Length: []

location=\\server\share\backup&validate=true&f=json
```

### Example two: AWS S3

The following is a sample POST request for the `exportSite` operation that demonstrates parameter configuration for AWS S3:

```javascript
POST /webadaptor/portaladmin/exportSite HTTP/1.1
Host: machine.domain.com
Content-Type: application/x-www-form-urlencoded
Content-Length: []

location=\\server\share\backup&backupObjectStore="sampleBucket"&backupObjectStoreRegion="us-east-1"&f=json
```

### Example three: Azure Blob

The following is a sample POST request for the `exportSite` operation that demonstrates parameter configuration for Azure Blob:

```javascript
POST /webadaptor/portaladmin/exportSite HTTP/1.1
Host: machine.domain.com
Content-Type: application/x-www-form-urlencoded
Content-Length: []

location=\\server\share\backup&backupObjectStore=https://sampleserver.blob.core.windows.net/mycontainer&backupObjectStoreConnectionStr={"accountName": "myaccountName","accountKey": "myAccountKey","accountEndpoint": "accountEndpoint"}&f=json
```


## JSON Response examples

### Examples without validation

#### Example one: file store

The following is a sample response returned for file stores:

```other
{
  "status": "success",
  "location": "\\server\share\backup\Oct-06-2022_10-20-55.portalsite"
}
```

#### Example two: AWS S3

The following is a sample response for AWS S3:

```other
{
  "status": "success",
  "location": "\\server\share\backup\Oct-06-2022_10-20-55.portalsite"
}
```

 #### Example three: Azure Blob

The following is a sample response for Azure Blob:

```other
{
  "status": "success",
  "location": "\\server\share\backup\Oct-06-2022_10-20-55.portalsite"
}
```

#### Example four: success with warnings 

Starting at 10.8, if items are missing from the content directory but exist in the portal's internal database, the request will return a `success with warning` response that contains a message that outlines the reason for the warning:

```other
{
  "status": "success with warning",
  "location": "\\server\share\backup\Aug-06-2022_10-20-55.portalsite",
  "messages": ["During the export operation, some items could not be exported because they appear to be missing from the content directory. Check the logs and review the  section in the Common Problems and Solutions documentation for more information."]
}
```

### Examples with validation

#### Example one: success response
The sample response below is for a request that had the `validate` parameter set to `true`. This example demonstrates a success response, meaning that the path was accessible to Portal for ArcGIS:

```javascript
{
  "status": "success"
}
```

#### Example two: failure response

The sample response below is for a request that had the `validate` parameter set to `true`. This example demonstrates a failure, meaning that the path was not accessible to Portal for ArcGIS:

```javascript
{
  "error": {
    "code": 500,
    "message": "Unable to write to \\server\share\backup. Verify the location is accessible and the service account running Portal for ArcGIS can write to it.",
    "details": null
  }
}
```