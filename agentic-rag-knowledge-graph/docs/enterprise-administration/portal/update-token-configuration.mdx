---
title: "Update Token Configuration"
description: "This operation can be used to change the token configuration for your portal."
slug: "update-token-configuration"
url: "/update-token-configuration"
guid: "GUID-FCE8030B-CFF2-4F4B-9BDE-2C861214970B"
migratedTopicMetadata:
  FTITLE: "Update Token Configuration"
  FDESCRIPTION: ""
  FCHANGES: "Implementing REST API style changes"
  FISHRELEASELABEL: ""
  FESRISOFTWARERELEASE: ""
  FESRITAGCLOUD: ""
  FESRIRECREATIONPROCEDURE: ""
  FESRIPRODUCTLIFECYCLE: "10.8- *"
  CREATED-ON: "13/08/2019 12:33:03"
  FAUTHOR: "tohara"
  FSTATUS: "Released"
  MODIFIED-ON: "06/11/2019 01:08:02"
  VERSION: "5"
  FRESOLUTION: ""
  DOC-LANGUAGE: "en"
  FISHREVCOUNTER: "8"
  ED: "GUID-1B782560-CA04-4804-B49E-C259005D5B24"
  FUSERGROUP: "VUSERGROUPARCGISONLINEDOC"
  READ-ACCESS: ""
restInfoMetadata:
  apiPath: /security/tokens/update
  urlSegments:
    - name: <root>
      url: /portal-administration-root
    - name: /security/tokens/update
  methods:
    - post
  sslOnly: 'yes'
  versionIntroduced: 10.2.1
  requiredCapabilities:
    - name: Access allowed with the "Security and Infrastructure" privilege
      url: /privileges-for-portal-admin-api
---

## Description

The `update` operation updates the shared key that is used to generate tokens and encrypt specific elements of your ArcGIS Enterprise portal licensing information. Starting at ArcGIS Enterprise 11.4, this operation generates a new base64 encoded key rather than requiring a new shared key be manually provided by administrators. For organizations using a version of Enterprise at 11.3 or earlier, a manual key will still need to be provided. Keys must either be a 32-byte string or 44 characters if the key is base64 encoded. Key length is verified prior to any changes taking place.

Performing the request will update the token configuration information with the new key (either generated by the system or provided by an administrator) and any previously issued tokens and encryption will be invalidated. Once the operation is complete, ArcGIS Enterprise portal will restart and remain inaccessible for some time.

##  Request parameters

<StyledTable headers={"Parameter,Details"}>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">

      `tokenConfig` 

    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">

      The JSON object representing the token configuration. It must contain an attribute named `sharedKey`. Starting at ArcGIS Enterprise 11.4, this key will be generated. For versions 11.3 or earlier, administrators must provide a new key. The key needs to be either a 32-byte string or 44 characters if the key is base64 encoded.

      ```markdown label=Example
      tokenConfig={"sharedKey": "gbw6+cxasO+Rq0wHUWtnS040mLW1mO4Sh+vmbW7F+cs="}
      ```

    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">

      `f` 

    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">

      The response format. The default response format is `html`.

      Values: `html` | `json` | `pjson`

    </StyledTableCell>
  </StyledTableRow>
</StyledTable>


## Example usage

The following is a sample POST request for the `update` operaiton:

```markdown
POST /webadaptor/portaladmin/security/tokens/update HTTP/1.1
Host: machine.domain.com
Content-Type: application/x-www-form-urlencoded
Content-Length: []

tokenConfig={
  "sharedKey": "gbw6+cxasO+Rq0wHUWtnS040mLW1mO4Sh+vmbW7F+cs="
}&f=pjson
```

## JSON Response example

```javascript
{
  "status": "success",
  "recheckAfterSeconds": 10
}
```