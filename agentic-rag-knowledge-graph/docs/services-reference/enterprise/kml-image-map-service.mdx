---
title: "KML Image (Map Service)"
description: "An individual KML image resource represents a KML Region or ground overlay document wrapped in a KMZ file."
slug: "kml-image-map-service"
url: "/kml-image-map-service"
guid: "GUID-82764669-AA8A-48B9-85B6-40924A2BC7DD"
migratedTopicMetadata:
  FTITLE: "KML Image (Map Service)"
  FDESCRIPTION: ""
  FCHANGES: "Fixing broken links"
  FISHRELEASELABEL: ""
  FESRISOFTWARERELEASE: ""
  FESRITAGCLOUD: ""
  FESRIRECREATIONPROCEDURE: ""
  FESRIPRODUCTLIFECYCLE: "11.0- *"
  CREATED-ON: "14/08/2022 12:17:59"
  FAUTHOR: "tohara"
  FSTATUS: "Released"
  MODIFIED-ON: "15/08/2022 08:51:35"
  VERSION: "4"
  FRESOLUTION: ""
  DOC-LANGUAGE: "en"
  FISHREVCOUNTER: "2"
  ED: "GUID-4D2853EA-28DA-4329-A3F1-EF247063E470"
  FUSERGROUP: "VUSERGROUPARCGISONLINEDOC"
  READ-ACCESS: ""
restInfoMetadata:
  apiPath: /kml/mapImage.kmz
  urlSegments:
    - name: <mapservice-url>
      url: /map-service
    - name: /kml/mapImage.kmz
  methods: []
  sslOnly: 'no'
  versionIntroduced: '9.3'
  requiredCapability: Map
---

## Description

An individual KML image resource represents a KML Region or ground overlay document wrapped in a KMZ file. KML Regions are returned for map services that are cached and use one of the following supported coordinate systems:

-   All geographic coordinate systems.
-   Coordinate systems with the following IDs:

    -   102113
    -   54001
    -   54002
    -   54003
    -   54004
    -   54016
    -   54017
    -   54034
    -   53001
    -   53002
    -   53003
    -   53004
    -   53016
    -   53017
    -   53034

Ground overlays are created for map services that are not cached or are not in a coordinate system supported for KML Regions.

##  Request parameters

<StyledTable headers={"Parameter,Details"}>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`dpi` 

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

The device resolution of the exported image (dots per inch). If the `dpi`  is not specified, an image with a default DPI of 96 will be exported.

Example

```javascript
dpi=200
```

 

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`format` 

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

The format of the exported image. The default is `png` . 

Values: `png`  \| `png8`  \| `png24`  \| `jpg`  \| `pdf`  \| `bmp`  \| `gif`  \| `svg` 

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`layerDefs` 

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Allows you to filter the features of individual layers in the exported map by specifying definition expressions for those layers.

Syntax

```javascript
//Example where layerId1 and layerId2 are the layer ids returned by the map service resource
layerDefs=layerId1:layerDef1;layerId2:layerDef2
```

 

Example

```javascript
layerDefs=0:POP2000 > 1000000;5:AREA > 100000
```

 

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`layers` 

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Determines which layers appear on the exported map. There are four ways to specify which layers are shown:

-   `show` : Only the layers specified in this list will be exported.
-   `hide` : All layers except those specified in this list will be exported.
-   `include` : In addition to the layers exported by default, the layers specified in this list will be exported.
-   `exclude` : The layers exported by default excluding those specified in this list will be exported.

Syntax

```javascript
//Example where layerId1 and layerId2 are the layer ids returned by the map service resource 
layers=[show | hide | include | exclude]:layerId1,layerId2

```

 

Example

```javascript
layers=show:2,4,7
```

 

</StyledTableCell>

</StyledTableRow>

</StyledTable>

## Example usage

The following is a sample request URL used to request a map service that is cached and in a supported projection:

```javascript
https://machine.domain.com/webadaptor/rest/services/WaterTemplate/WaterDistributionNetwork/MapServer/kml/mapImage.kmz
```

 

The above URL would be the same for a map service that is not cached or uses an unsupported projection. The difference is that the returned KML document would include a ground overlay.

```javascript
https://machine.domain.com/webadaptor/rest/services/Specialty/ESRI_StatesCitiesRivers_USA/MapServer/kml/mapImage.kmz 
```

 
