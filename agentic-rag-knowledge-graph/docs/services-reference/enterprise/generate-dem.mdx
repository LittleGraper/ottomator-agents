---
title: "Generate DEM"
description: "API reference for the Generate DEM service tool available in ArcGIS Enterprise."
slug: "generate-dem"
url: "/generate-dem"
guid: "GUID-677FBEAF-C411-45A4-93F6-956220B8F245"
migratedTopicMetadata:
  FTITLE: "Generate DEM"
  FDESCRIPTION: ""
  FCHANGES: "Removing related resources"
  FISHRELEASELABEL: ""
  FESRISOFTWARERELEASE: ""
  FESRITAGCLOUD: ""
  FESRIRECREATIONPROCEDURE: ""
  FESRIPRODUCTLIFECYCLE: "10.9 - *"
  CREATED-ON: "24/08/2022 15:35:24"
  FAUTHOR: "tohara"
  FSTATUS: "Released"
  MODIFIED-ON: "20/09/2022 11:07:07"
  VERSION: "5"
  FRESOLUTION: ""
  DOC-LANGUAGE: "en"
  FISHREVCOUNTER: "3"
  ED: "GUID-99F66B9D-1B51-4C4A-890E-8047E8AD51F3"
  FUSERGROUP: "VUSERGROUPARCGISONLINEDOC"
  READ-ACCESS: ""
restInfoMetadata:
  apiPath: /System/OrthomappingTools/GPServer/GenerateDEM
  urlSegments:
    - name: <root>
      url: /catalog
    - name: /System/OrthomappingTools/GPServer/GenerateDEM
  methods: []
  sslOnly: 'no'
  versionIntroduced: 10.6.1
---

import GUID_187EFF3C_6544_4421_8D1E_9DFCF76354CD_GUID_5E7C5404_14B0_4ECA_AC2E_E9BC34E83723 from "./snippets/GUID-187EFF3C-6544-4421-8D1E-9DFCF76354CD/_GUID-5E7C5404-14B0-4ECA-AC2E-E9BC34E83723";
import GUID_187EFF3C_6544_4421_8D1E_9DFCF76354CD_GUID_56FBFBA3_C66E_404D_8D62_38D68537B266 from "./snippets/GUID-187EFF3C-6544-4421-8D1E-9DFCF76354CD/_GUID-56FBFBA3-C66E-404D-8D62-38D68537B266";
import GUID_187EFF3C_6544_4421_8D1E_9DFCF76354CD_GUID_EB4A1F30_5539_4BD1_AB9D_2D4EA4603F0E from "./snippets/GUID-187EFF3C-6544-4421-8D1E-9DFCF76354CD/_GUID-EB4A1F30-5539-4BD1-AB9D-2D4EA4603F0E";
import GUID_92B97D46_70DD_4B77_80C3_E6A319680CD9_GUID_1702083F_151C_4A0C_AF36_0D0DD9E2563A from "./snippets/GUID-92B97D46-70DD-4B77-80C3-E6A319680CD9/_GUID-1702083F-151C-4A0C-AF36-0D0DD9E2563A";
import GUID_92B97D46_70DD_4B77_80C3_E6A319680CD9_GUID_4B398B66_01FD_40FB_9AEE_30371F0A8CD8 from "./snippets/GUID-92B97D46-70DD-4B77-80C3-E6A319680CD9/_GUID-4B398B66-01FD-40FB-9AEE-30371F0A8CD8";
import GUID_92B97D46_70DD_4B77_80C3_E6A319680CD9_GUID_ED11CCC7_40D3_4ADD_A679_A3F6964834ED from "./snippets/GUID-92B97D46-70DD-4B77-80C3-E6A319680CD9/_GUID-ED11CCC7-40D3-4ADD-A679-A3F6964834ED";
import GUID_92B97D46_70DD_4B77_80C3_E6A319680CD9_GUID_50D345C8_14F8_4A4A_AB1E_A6BBD19C49EF from "./snippets/GUID-92B97D46-70DD-4B77-80C3-E6A319680CD9/_GUID-50D345C8-14F8-4A4A-AB1E-A6BBD19C49EF";

## Description

![Generate DEM diagram](./images/GUID-CD58671A-B1EB-45C3-BA4D-7351E9D2145C-web.png)

The `GenerateDEM`  operation is a service tool that allows you to generate DEM products from a previously adjusted image collection. It creates point clouds using adjusted image collections and interpolates the point clouds to create DEM surface products using the designated method.

<Note type={"note"}>

As of ArcGIS 10.5, you must license your ArcGIS Server as an ArcGIS Image Server to use this resource.

</Note>

##  Request parameters

<StyledTable headers={"Parameter,Details"}>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`imageCollection` 

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

The image collection (mosaic dataset) name or URL. The image service must exist before calling the service to generate a DEM. 

<GUID_187EFF3C_6544_4421_8D1E_9DFCF76354CD_GUID_5E7C5404_14B0_4ECA_AC2E_E9BC34E83723 />

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`outputDEM` 

(Required)

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

This is the output digital elevation model image URL or name. As with Raster Analysis services, the service can be an existing multitenant service URL, or this service tool can create it. 

Syntax: A JSON object describes the output image collection name or URL.

```javascript
{"serviceProperties": {"name": "<service name>"}}
{"itemId": "<portal item id>"}
{"url": "image service url>"}
{"uri": "<cloud raster uri or shared data path>"}
```

 

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`cellSize` 

(Required)

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

The cell size of the output digital elevation model image. This is a single numeric input. The cell size unit will be the unit used by the image collection's spatial reference. Only square cell sizes are supported.

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`surfaceType` 

(Required)

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

The output surface type of the digital elevation model. The following are the available choices:

-   Digital Terrain Model (`DTM` ): The elevation is bare earth only and does not include structures above the surface.
-   Digital Surface Model (`DSM` ): The elevation includes bare earth and features above the surfaceâ€”for example, buildings, vegetation, bridges, and utility towers.

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`matchingMethod` 

(Optional)

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

The method used to generate 3D points. The following are the available options:

-   `ETM` : A feature-based stereo matching method that uses the Harris operator to detect feature points. It's recommended for `DTM`  generation.
-   `SGM` : Produces more points and detail than the `ETM`  method. It's suitable for generating a `DSM`  for urban areas. This is more computationally intensive than the `ETM`  method.
-   `MVM` : Based on the `SGM`  matching method followed by a fusion step in which the redundant depth estimations across single stereo model are merged. It produces dense 3D points and is computationally efficient.

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`context` 

(Optional)

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Additional settings, such as the allowed point cloud generation parameter and DEM interpolation parameter, can be assigned here. Additional settings include:

-   `parallelProcessingFactor` : Specifies the number or percentage of processes will be used for the analysis. The default value is `50%` .
-   `maxObjectSize` : A search radium within surface objects, such as buildings and trees, will be identified. It's the linear size in map units.
-   `groundSpacing` : The ground spacing, in meters, at which the 3D points are generated.
-   `minAngle` : The value, in degrees, that defines the minimum intersection angle the stereo pair must meet.
-   `maxAngle` : The value, in degrees, that defines the maximum intersection angle the stereo pair must meet.
-   `minOverlap` : Specifies a minimum overlap threshold that is acceptable, which is a percentage of overlap between a pair of images. Image pairs with overlap areas smaller than this threshold will receive a score of 0 for this criteria and will descend in the ordered list. The range of values is from 0 to 1.
-   `maxOmegaPhiDif` : Specifies the maximum threshold for the Omega/Phi difference between the image pair. The Omega and Phi values for the image pair are compared, and a difference greater than this threshold will receive a score of 0 and will descend in the ordered list.
-   `maxGSDDif` : Specifies the maximum allowable threshold for the ground sample distance (GSD) between two images in a pair. The resolution ration between the two images will be compared with the threshold value. Image pairs with a GSD greater than this threshold will receive a score of 0 and will descend in the ordered list.
-   `numImagePairs` : The number of pairs used to generate 3D points.
-   `adjQualityThreshold` : Specifies the minimum acceptable adjustment quality. the threshold value will be compared to the quality value stored within the stereo model. Image pairs with an adjustment quality less than the specified threshold will receive a score of 0 and will descend in the ordered list. The range of values for the threshold is between 0 and 1.
-   `regenPointCloud` : Regenerates the 3D point cloud.

<Note type={"note"}>

Both the `applyToOrtho`  and `fillDEM`  flag can be added to the initial request. `applyToOrtho`  applies the generated DEM back into the mosaic dataset's geometric function to achieve more accurate orthorectification results. The `fillDEM`  flag allows you to specify an elevation service url as background elevation to fill the area when elevation model pixels cannot be interpolated from the point cloud.

</Note>

```javascript
{
  "maxObjectSize": 50,
  "groundSpacing": None,
  "minAngle": 10,
  "maxAngle": 70,
  "minOverlap": 0.6,
  "maxOmegaPhiDif": 8,
  "maxGSDDif" 2,
  "numImagePairs": 2,
  "adjQualityThreshold": 0.2,
  "regenPointCloud": False,
  //DEM interpolation parameters
  "method": "TRIANGULATION",
  "smoothingMethod": :GAUSS5x5",
  "applyToOrtho": True,
  "fillDEM": "https://..."
}
```

 

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`f` 

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

<GUID_187EFF3C_6544_4421_8D1E_9DFCF76354CD_GUID_56FBFBA3_C66E_404D_8D62_38D68537B266 />

<GUID_187EFF3C_6544_4421_8D1E_9DFCF76354CD_GUID_EB4A1F30_5539_4BD1_AB9D_2D4EA4603F0E />

</StyledTableCell>

</StyledTableRow>

</StyledTable>

## Response

<GUID_92B97D46_70DD_4B77_80C3_E6A319680CD9_GUID_1702083F_151C_4A0C_AF36_0D0DD9E2563A />

<GUID_92B97D46_70DD_4B77_80C3_E6A319680CD9_GUID_4B398B66_01FD_40FB_9AEE_30371F0A8CD8 />

<GUID_92B97D46_70DD_4B77_80C3_E6A319680CD9_GUID_ED11CCC7_40D3_4ADD_A679_A3F6964834ED />

```javascript
https://<orthomapping service url>/GenerateDEM/jobs/<jobId>
```

 

<GUID_92B97D46_70DD_4B77_80C3_E6A319680CD9_GUID_50D345C8_14F8_4A4A_AB1E_A6BBD19C49EF />

```javascript
https://<orthomapping service url>/GenerateDEM/jobs/<jobId>/results/result?token=<your token>&f=json
```

 

The result will be the image service URL and itemId of the DEM.

## Example usage

Below is a sample URL for `GenerateDEM` .

```javascript
https://services.myserver.com/arcgis/rest/services/System/OrthomappingTools/GPServer/GenerateDEM
```

 

## JSON Request example

```other
imageCollection={"itemId": "1780d648db3545bba8661ad98df824a4"}&
outputDEM={"serviceProperties": {"name":"dronedtm"}}&
cellSize=5&
surfaceType=DTM&
matchingMethod=SGM&
context={
  "maxObjectSize": 50,
  "groundSpacing": None, 
  "minAngle": 10,
  "maxAngle": 70,
  "minOverlap": 0.6,
  "maxOmegaPhiDf": 8,
  "maxGSDDif": 2,
  "numImagePairs": 2,
  "adjQualityThreshold": 0.2,
  "method": "TRIANGULATION",
  "smoothingMethod": "GAUSS5x5",
  "applyToOrtho": True
}
```

 

## References

Heiko Hirschmuller et al., "Memory Efficient Semi-Global Matching," ISPRS Annals of the Photogrammetry, Remote Sensing and Spatial Information Sciences, Volume 1-3, (2012): 371-376.
