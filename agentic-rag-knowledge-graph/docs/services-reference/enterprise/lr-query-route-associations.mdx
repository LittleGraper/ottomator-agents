---
title: "Query Route Associations"
description: "This operation finds route records across all networks that are associated with the input centerlines. It returns valid associations for records that are present in both the centerline sequence and network tables and are overlapping in their time spans."
slug: "lr-query-route-associations"
url: "/lr-query-route-associations"
guid: "GUID-6FC13218-C01A-4F29-82AF-6D7ACBD6B81B"
migratedTopicMetadata:
  FTITLE: "LR Query Route Associations"
  FDESCRIPTION: ""
  FCHANGES: "Reformat JSON response example (2849)"
  FISHRELEASELABEL: ""
  FESRISOFTWARERELEASE: ""
  FESRITAGCLOUD: ""
  FESRIRECREATIONPROCEDURE: ""
  FESRIPRODUCTLIFECYCLE: "10.7 - *"
  CREATED-ON: "13/11/2020 12:20:54"
  FAUTHOR: "jgardner"
  FSTATUS: "Released"
  MODIFIED-ON: "25/05/2023 11:00:19"
  VERSION: "3"
  FRESOLUTION: ""
  DOC-LANGUAGE: "en"
  FISHREVCOUNTER: "17"
  ED: "GUID-CA7C3216-D418-4EE0-98B8-04C57474C112"
  FUSERGROUP: ""
  READ-ACCESS: ""
restInfoMetadata:
  apiPath: /queryRouteAssociations
  urlSegments:
    - name: <centerline-layer-url>
      url: /lr-centerline-layer
    - name: /queryRouteAssociations
  methods: []
  sslOnly: "no"
  versionIntroduced: "10.7"
  requiredCapability: The ArcGIS Location Referencing license is required to use this resource.
---

import GUID_FDC3EA81_25C0_4AC4_8B57_2008547446AD_GUID_E6C28557_ADDB_4260_92CF_C8983F9552C4 from "./snippets/GUID-FDC3EA81-25C0-4AC4-8B57-2008547446AD/_GUID-E6C28557-ADDB-4260-92CF-C8983F9552C4";
import GUID_CF31BD86_ACFA_4774_8343_CC7C8307F248_GUID_338B692C_1241_497E_A75E_A120E90C5078 from "./snippets/GUID-CF31BD86-ACFA-4774-8343-CC7C8307F248/_GUID-338B692C-1241-497E-A75E-A120E90C5078";
import GUID_CF31BD86_ACFA_4774_8343_CC7C8307F248_GUID_A18843D2_866B_4EFB_B533_9736C6767514 from "./snippets/GUID-CF31BD86-ACFA-4774-8343-CC7C8307F248/_GUID-A18843D2-866B-4EFB-B533-9736C6767514";
import GUID_CF31BD86_ACFA_4774_8343_CC7C8307F248_GUID_B7782607_849C_4C90_9D12_86CEAA873DB0 from "./snippets/GUID-CF31BD86-ACFA-4774-8343-CC7C8307F248/_GUID-B7782607-849C-4C90-9D12-86CEAA873DB0";
import GUID_CF31BD86_ACFA_4774_8343_CC7C8307F248_GUID_2F607C55_E2A3_4EC5_AEC7_0E75B11E3555 from "./snippets/GUID-CF31BD86-ACFA-4774-8343-CC7C8307F248/_GUID-2F607C55-E2A3-4EC5-AEC7-0E75B11E3555";
import GUID_CF31BD86_ACFA_4774_8343_CC7C8307F248_GUID_F20F8D73_B46C_4950_B012_6CDF9CF27212 from "./snippets/GUID-CF31BD86-ACFA-4774-8343-CC7C8307F248/_GUID-F20F8D73-B46C-4950-B012-6CDF9CF27212";
import GUID_CF31BD86_ACFA_4774_8343_CC7C8307F248_GUID_A44D1103_9FA9_4958_8C41_F53373909168 from "./snippets/GUID-CF31BD86-ACFA-4774-8343-CC7C8307F248/_GUID-A44D1103-9FA9-4958-8C41-F53373909168";
import GUID_CF31BD86_ACFA_4774_8343_CC7C8307F248_GUID_BDA5F620_850E_4219_AB32_73644F8F5CF4 from "./snippets/GUID-CF31BD86-ACFA-4774-8343-CC7C8307F248/_GUID-BDA5F620-850E-4219-AB32-73644F8F5CF4";
import GUID_CF31BD86_ACFA_4774_8343_CC7C8307F248_GUID_6A4C3448_D6F7_480B_9EB8_4EB92D8BBEB5 from "./snippets/GUID-CF31BD86-ACFA-4774-8343-CC7C8307F248/_GUID-6A4C3448-D6F7-480B-9EB8-4EB92D8BBEB5";
import GUID_CF31BD86_ACFA_4774_8343_CC7C8307F248_GUID_049C8F15_B257_489F_8F83_612783A1A705 from "./snippets/GUID-CF31BD86-ACFA-4774-8343-CC7C8307F248/_GUID-049C8F15-B257-489F-8F83-612783A1A705";
import EncodeURLsNote from "./snippets/GUID-CF31BD86-ACFA-4774-8343-CC7C8307F248/_EncodeURLsNote";


## Description

This operation finds route records across all networks that are associated with the input centerlines. It returns valid associations for records that are present in both the centerline sequence and network tables and are overlapping in their time spans.

## Request parameters

<StyledTable headers={"Parameter,Details"}>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">
      `f`

      (Optional)
    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">
      <GUID_CF31BD86_ACFA_4774_8343_CC7C8307F248_GUID_338B692C_1241_497E_A75E_A120E90C5078 />
      <GUID_CF31BD86_ACFA_4774_8343_CC7C8307F248_GUID_A18843D2_866B_4EFB_B533_9736C6767514 />
    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">
      `centerlineIds`

      (Optional)
    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">
      Specifies an array of input centerline IDs.

      Syntax: 
      ```other
      centerlineIds=["<centerlineGuid1>", "<centerlineGuid2>", ...]
      ```
      Example: 
      ```other
      centerlineIds=["{124EF4E1-D6D7-47CD-A993-6E036584742C}", "{7BC4E070-CD40-40B0-8F13-75C75B3A80CF}"]
      ```
    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">
      `centerlineObjectIds`

      (Optional)
    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">
      Specifies an array of input centerline Object IDs.
      
      Syntax: 
      ```other
      centerlineObjectIds=[<centerlineOid1>, <centerlineOid2>, ...]
      ```
      Example: 
      ```other
      centerlineObjectIds=[150, 250]
      ```
    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">
      `gdbVersion`

      (Optional)
    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">
      <GUID_CF31BD86_ACFA_4774_8343_CC7C8307F248_GUID_B7782607_849C_4C90_9D12_86CEAA873DB0 />
      <GUID_CF31BD86_ACFA_4774_8343_CC7C8307F248_GUID_2F607C55_E2A3_4EC5_AEC7_0E75B11E3555 />
      <GUID_CF31BD86_ACFA_4774_8343_CC7C8307F248_GUID_F20F8D73_B46C_4950_B012_6CDF9CF27212 />
    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">
      `historicMoment`

      (Optional)
    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">
      <GUID_CF31BD86_ACFA_4774_8343_CC7C8307F248_GUID_A44D1103_9FA9_4958_8C41_F53373909168 />
      <GUID_CF31BD86_ACFA_4774_8343_CC7C8307F248_GUID_BDA5F620_850E_4219_AB32_73644F8F5CF4 />
      <GUID_CF31BD86_ACFA_4774_8343_CC7C8307F248_GUID_6A4C3448_D6F7_480B_9EB8_4EB92D8BBEB5 />
      <GUID_CF31BD86_ACFA_4774_8343_CC7C8307F248_GUID_049C8F15_B257_489F_8F83_612783A1A705 />
    </StyledTableCell>
  </StyledTableRow>
</StyledTable>

## Example usage

The following URLs demonstrate how to query route associations using centerline attributes.

<EncodeURLsNote />

### Example 1

A query with only centerline Object IDs:

```other
https://sampleserver/server/rest/services/MyLRS/MapServer/exts/LRServer/centerlineLayers/4/queryRouteAssociations?centerlineIds=&centerlineObjectIds=[0,1]&gdbVersion=SDE.default&historicMoment=&f=json
```

### Example 2

A query with only centerline ID:

```other
https://sampleserver/server/rest/services/MyLRS/MapServer/exts/LRServer/centerlineLayers/4/queryRouteAssociations?centerlineIds=["{0C9963C9-4F34-4363-A369-E9D8E56D0142}"]&centerlineObjectIds=&gdbVersion=SDE.default&historicMoment=&f=json
```

### Example 3

A query with both centerline ID and Object IDs:

```other
https://sampleserver/server/rest/services/MyLRS/MapServer/exts/LRServer/centerlineLayers/4/queryRouteAssociations?centerlineIds=["{0C9963C9-4F34-4363-A369-E9D8E56D0142}"]&centerlineObjectIds=[0,1]&gdbVersion=SDE.default&historicMoment=&f=json
```

## JSON Response syntax

Each object in the `associations` array refers to a unique centerline. Each object in the `networks` array refers to a unique network. Each object in the `routes` array refers to a unique route.

For associations where the network is not present in the service, `networkLayerId` will be set to `-1`. The `lineId` parameter will be populated for routes in engineering networks, and otherwise, they will be set to empty strings.

```json
{
  "associations": [
    {
      "centerlineId": "<centerlineGuid>",
      "centerlineObjectId": "<centerlineOid>",
      "networks": [
        {
          "lrsNetworkId": "<networkId>",
          "networkLayerId": "<networkLayerId>",
          "lrsNetworkName": "<networkName>",
          "routes": [
            {
              "routeId": "<routeId>",
              "lineId": "<lineId>",
              "fromDate": "<epochTimeInMilliseconds>",
              "toDate": "<epochTimeInMilliseconds>"
            },
            ...
          ]
        },
        ...
      ]
    },
    ...
  ]
}
```

## JSON Response example

The following is a response to the third example usage. Common centerline IDs and Object IDs in the input are merged into one `associations` object.

```json
{
  "associations": [
    {
      "centerlineId": "{0C9963C9-4F34-4363-A369-E9D8E56D0142}",
      "centerlineObjectId": 0,
      "networks": [
        {
          "lrsNetworkId": 2,
          "networkLayerId": 1,
          "lrsNetworkName": "Continuous",
          "routes": [
            {
              "routeId": "R1",
              "lineId": "",
              "fromDate": 1505429729000,
              "toDate": null
            }
          ]
        },
        {
          "lrsNetworkId": 1,
          "networkLayerId": 2,
          "lrsNetworkName": "Engineering",
          "routes": [
            {
              "routeId": "R2",
              "lineId": "L1",
              "fromDate": 1535429729000,
              "toDate": null
            },
            {
              "routeId": "R3",
              "lineId": "L2",
              "fromDate": 1494434529000,
              "toDate": 1713292129000
            }
          ]
        }
      ]
    },
    {
      "centerlineId": "{DE3A5E8C-EAC6-4916-BA56-CC6484257F59}",
      "centerlineObjectId": 1,
      "networks": [
        {
          "lrsNetworkId": 2,
          "networkLayerId": 1,
          "lrsNetworkName": "Continuous",
          "routes": [
            {
              "routeId": "R4",
              "lineId": "",
              "fromDate": 1505428029000,
              "toDate": 1605428029000
            },
            {
              "routeId": "R5",
              "lineId": "",
              "fromDate": 1484434529000,
              "toDate": 1513292129000
            }
          ]
        }
      ]
    }
  ]
}
```
