---
title: "Query Diagram Elements By Extent"
description: "The queryDiagramElementsByExtent retrieves the set of diagram features represented in the diagram that intersect a specified envelope."
slug: "query-diagram-elements-by-extent-network-diagrams"
url: "/query-diagram-elements-by-extent-network-diagrams"
guid: "GUID-3E852B27-43FB-436B-9CE7-26F5A0A2BAC3"
migratedTopicMetadata:
  FTITLE: "Query Diagram Elements By Extent (Network Diagrams)"
  FDESCRIPTION: ""
  FCHANGES: "missing blank character in JSON codeblockbody in the response syntax section"
  FISHRELEASELABEL: ""
  FESRISOFTWARERELEASE: ""
  FESRITAGCLOUD: ""
  FESRIRECREATIONPROCEDURE: ""
  FESRIPRODUCTLIFECYCLE: "10.8 - *"
  CREATED-ON: "08/10/2020 09:55:45"
  FAUTHOR: "ablin"
  FSTATUS: "Released"
  MODIFIED-ON: "22/01/2021 07:36:02"
  VERSION: "5"
  FRESOLUTION: ""
  DOC-LANGUAGE: "en"
  FISHREVCOUNTER: "5"
  ED: "GUID-CEA33FB1-EFCB-4E9A-A002-29C5FAFFBBB1"
  FUSERGROUP: ""
  READ-ACCESS: ""
restInfoMetadata:
  apiPath: /<serviceName>/NetworkDiagramServer/diagrams/<diagramName>/queryDiagramElementsByExtent
  urlSegments:
    - name: <root>
      url: /catalog
    - name: /<serviceName>/NetworkDiagramServer/diagrams/<diagramName>/queryDiagramElementsByExtent
  methods: 
    - post
  sslOnly: 'no'
  versionIntroduced: '10.7'
---

import GUID_975B7744_9503_41BE_A799_3D09E55A85D5_GUID_61665A7B_93DA_486F_A8E6_9346FC7AF420 from "./snippets/GUID-975B7744-9503-41BE-A799-3D09E55A85D5/_GUID-61665A7B-93DA-486F-A8E6-9346FC7AF420";
import GUID_39D57F54_1EBC_4379_8DFC_8A7E3A992DFC_GUID_F6FE67FB_9ACA_45E7_831C_DD51A831EAD3 from "./snippets/GUID-39D57F54-1EBC-4379-8DFC-8A7E3A992DFC/_GUID-F6FE67FB-9ACA-45E7-831C-DD51A831EAD3";
import GUID_39D57F54_1EBC_4379_8DFC_8A7E3A992DFC_GUID_7AC426AF_5C62_4474_BBE7_6C36CC7DCEB6 from "./snippets/GUID-39D57F54-1EBC-4379-8DFC-8A7E3A992DFC/_GUID-7AC426AF-5C62-4474-BBE7-6C36CC7DCEB6";
import GUID_39D57F54_1EBC_4379_8DFC_8A7E3A992DFC_GUID_3EB2FA97_FEE5_4CCA_85DB_1B67B3F50172 from "./snippets/GUID-39D57F54-1EBC-4379-8DFC-8A7E3A992DFC/_GUID-3EB2FA97-FEE5-4CCA-85DB-1B67B3F50172";
import GUID_39D57F54_1EBC_4379_8DFC_8A7E3A992DFC_GUID_5BD34E45_603F_4F5B_B77D_236011A78DA4 from "./snippets/GUID-39D57F54-1EBC-4379-8DFC-8A7E3A992DFC/_GUID-5BD34E45-603F-4F5B-B77D-236011A78DA4";
import GUID_39D57F54_1EBC_4379_8DFC_8A7E3A992DFC_GUID_ABFDFF0B_C205_42C8_9ABD_73DE1FE97AE0 from "./snippets/GUID-39D57F54-1EBC-4379-8DFC-8A7E3A992DFC/_GUID-ABFDFF0B-C205-42C8-9ABD-73DE1FE97AE0";
import GUID_39D57F54_1EBC_4379_8DFC_8A7E3A992DFC_GUID_17DF280A_CE78_4C37_8906_9FA8518D9989 from "./snippets/GUID-39D57F54-1EBC-4379-8DFC-8A7E3A992DFC/_GUID-17DF280A-CE78-4C37-8906-9FA8518D9989";
import GUID_3EB37995_2FD3_456A_965A_A1935823EF16_GUID_93C8F8A2_C24D_4137_A321_1954A05468DE from "./snippets/GUID-3EB37995-2FD3-456A-965A-A1935823EF16/_GUID-93C8F8A2-C24D-4137-A321-1954A05468DE";
import GUID_3EB37995_2FD3_456A_965A_A1935823EF16_GUID_846C3BC9_8054_4D10_8980_CE245FED8D72 from "./snippets/GUID-3EB37995-2FD3-456A-965A-A1935823EF16/_GUID-846C3BC9-8054-4D10-8980-CE245FED8D72";
import GUID_3EB37995_2FD3_456A_965A_A1935823EF16_GUID_ED939E48_9751_4CFF_8C36_DC8DAA1704AC from "./snippets/GUID-3EB37995-2FD3-456A-965A-A1935823EF16/_GUID-ED939E48-9751-4CFF-8C36-DC8DAA1704AC";
import GUID_30407936_426E_4EA4_81DB_B6CD3CF11661_GUID_726CCD55_2C51_439C_ACE1_5D0D9B7818CE from "./snippets/GUID-30407936-426E-4EA4-81DB-B6CD3CF11661/_GUID-726CCD55-2C51-439C-ACE1-5D0D9B7818CE";
import GUID_30407936_426E_4EA4_81DB_B6CD3CF11661_GUID_CBFDBA54_9EF6_4B16_B52E_14CA1AEBFB2F from "./snippets/GUID-30407936-426E-4EA4-81DB-B6CD3CF11661/_GUID-CBFDBA54-9EF6-4B16-B52E-14CA1AEBFB2F";
import GUID_30407936_426E_4EA4_81DB_B6CD3CF11661_GUID_C335CF0F_2832_4FDE_8765_B65845DEB9AB from "./snippets/GUID-30407936-426E-4EA4-81DB-B6CD3CF11661/_GUID-C335CF0F-2832-4FDE-8765-B65845DEB9AB";
import GUID_39D57F54_1EBC_4379_8DFC_8A7E3A992DFC_GUID_4631762B_50EE_44C6_9461_38BDDF1BB012 from "./snippets/GUID-39D57F54-1EBC-4379-8DFC-8A7E3A992DFC/_GUID-4631762B-50EE-44C6-9461-38BDDF1BB012";
import GUID_39D57F54_1EBC_4379_8DFC_8A7E3A992DFC_GUID_7D12F246_BE1B_414F_8A39_8054E24176EB from "./snippets/GUID-39D57F54-1EBC-4379-8DFC-8A7E3A992DFC/_GUID-7D12F246-BE1B-414F-8A39-8054E24176EB";

## Description

The `queryDiagramElementsByExtent` operation retrieves the set of diagram features represented in the diagram that intersect a specified envelope. It is performed on a [diagram resource](/diagram-network-diagram-service). The result of this operation is a JSON object composed of three arrays—one for the resulting diagram junctions, another for the resulting diagram edges, and the third one for the diagram containers.

It returns the set of diagram junctions, diagram edges, or diagram containers that intersect a specified envelope—this one being optionally enlarged to include any containers that may be partially within it.

<Note type={"note"}>

<GUID_975B7744_9503_41BE_A799_3D09E55A85D5_GUID_61665A7B_93DA_486F_A8E6_9346FC7AF420 />

</Note>

##  Request parameters 

<StyledTable headers={"Parameter,Details"}>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`gdbVersion` 

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

<GUID_39D57F54_1EBC_4379_8DFC_8A7E3A992DFC_GUID_F6FE67FB_9ACA_45E7_831C_DD51A831EAD3 />

<GUID_39D57F54_1EBC_4379_8DFC_8A7E3A992DFC_GUID_7AC426AF_5C62_4474_BBE7_6C36CC7DCEB6 />

<GUID_39D57F54_1EBC_4379_8DFC_8A7E3A992DFC_GUID_3EB2FA97_FEE5_4CCA_85DB_1B67B3F50172 />

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`sessionId` 

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

<GUID_39D57F54_1EBC_4379_8DFC_8A7E3A992DFC_GUID_5BD34E45_603F_4F5B_B77D_236011A78DA4 />

<GUID_39D57F54_1EBC_4379_8DFC_8A7E3A992DFC_GUID_ABFDFF0B_C205_42C8_9ABD_73DE1FE97AE0 />

<GUID_39D57F54_1EBC_4379_8DFC_8A7E3A992DFC_GUID_17DF280A_CE78_4C37_8906_9FA8518D9989 />

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`moment` 

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

<GUID_3EB37995_2FD3_456A_965A_A1935823EF16_GUID_93C8F8A2_C24D_4137_A321_1954A05468DE />

<GUID_3EB37995_2FD3_456A_965A_A1935823EF16_GUID_846C3BC9_8054_4D10_8980_CE245FED8D72 />

<GUID_3EB37995_2FD3_456A_965A_A1935823EF16_GUID_ED939E48_9751_4CFF_8C36_DC8DAA1704AC />

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`extent` 

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

A [JSON envelope](/geometry-objects#envelope) object representing the extent you want the resulting diagram features to intersect.

Without specifying this parameter, the operation returns all the diagram features in the resource diagram.

Syntax: 
```javascript
extent= { "xmin": <xmin>, "ymin": <ymin>, "xmax": <xmax>, "ymax": <ymax>, "zmin": <zmin>, "zmax": <zmax>, "mmin": <mmin>, "mmax": <mmax>, "spatialReference": <spatialReference> }
```

Example:
Retrieving diagram features intersecting a given envelope: 
```javascript
extent= { "xmin": 1030002.4739352614, "ymin": 1862854.181471862, "xmax": 1030398.5958464295, "ymax": 1863341.463633, "spatialReference": {"wkid": 102671} }
 ```

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`addContents` 

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

A boolean statement that determines whether to return the diagram features which strictly intersect the specified envelope. 

-   `false`—To return the diagram features which strictly intersect the specified envelope (default)
-   `true`—To enlarge the searching envelope so it includes the extent of any containers that are partially within the specified envelope

Syntax: `addContents=<true | false>` 

Example: `addContents=true` 

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`returnJunctions` 

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

A boolean statement that determines whether to return diagram junctions.

-   `true`—To return the diagram junctions (default)
-   `false`—To not return the diagram junctions

Syntax: `returnJunctions=<true | false>` 

Example: `returnJunctions=true` 

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`returnEdges` 

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

A boolean statement that determines whether to return diagram edges.

-   `true`—To return the diagram edges (default)
-   `false`—To not return the edges junctions

Syntax: `returnEdges=<true | false>` 

Example: `returnEdges=true` 

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`returnContainers` 

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

A boolean statement that determines whether to return diagram containers.

-   `true`—To return the diagram containers (default)
-   `false`—To not return the diagram containers

Syntax: `returnContainers=<true | false>` 

Example: `returnContainers=true` 

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`returnGeometry` 

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

A boolean statement that determines whether to add the geometry for each returned diagram feature.

-   `true`—To return each queried diagram feature with its geometry (default)
-   `false`—To return each queried diagram feature without its geometry

Syntax: `returnGeometry=<true | false>` 

Example: `returnGeometry=true` 

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`outSR` 

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

<GUID_30407936_426E_4EA4_81DB_B6CD3CF11661_GUID_726CCD55_2C51_439C_ACE1_5D0D9B7818CE />

<GUID_30407936_426E_4EA4_81DB_B6CD3CF11661_GUID_CBFDBA54_9EF6_4B16_B52E_14CA1AEBFB2F />

<GUID_30407936_426E_4EA4_81DB_B6CD3CF11661_GUID_C335CF0F_2832_4FDE_8765_B65845DEB9AB />

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`f` 

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

<GUID_39D57F54_1EBC_4379_8DFC_8A7E3A992DFC_GUID_4631762B_50EE_44C6_9461_38BDDF1BB012 />

<GUID_39D57F54_1EBC_4379_8DFC_8A7E3A992DFC_GUID_7D12F246_BE1B_414F_8A39_8054E24176EB />

</StyledTableCell>

</StyledTableRow>

</StyledTable>

## Example usage

Query all the junctions of the Basic_RMT001 diagram:

-   URL: `https://myserver.esri.com/server/rest/services/Naperville/NetworkDiagramServer/diagrams/Basic_RMT001/queryDiagramElementsByExtent` 
-   Parameters 

    ```javascript
    gdbVersion=
    sessionId=
    moment=
    extent=
    addContents=
    returnJunctions=true
    returnEdges=false
    returnContainers=false
    returnGeometry=
    outSR=
    f=pjson
    ```

     
-   Sent URL (GET): `https://myserver.esri.com/server/rest/services/Naperville/NetworkDiagramServer/diagrams/Basic_RMT001/queryDiagramElementsByExtent?gdbVersion=&sessionId=&moment=&extent=&addContents=&returnJunctions=true&returnEdges=false&returnContainers=false&returnGeometry=&outSR=&f=pjson` 

Query all the diagram features that intersect a given extent {'{'}"xmin": 1034510.4869008437,"ymin": 1871859.3734351993,"xmax": 1034521.7178495117,"ymax": 1871863.1050550342,"spatialReference": {'{'}"wkid": 102671,"latestWkid": 3435{'}'}{'}'}:

-   URL: `https://myserver.esri.com/server/rest/services/Naperville/NetworkDiagramServer/diagrams/Basic_RMT003/queryDiagramElementsByExtent` 
-   Parameters 

    ```javascript
    gdbVersion=
    sessionId=
    moment=
    extent={"xmin": 1034510.4869008437,
     "ymin": 1871859.3734351993,
     "xmax": 1034521.7178495117,
     "ymax": 1871863.1050550342,
     "spatialReference": {
      "wkid": 102671,
      "latestWkid": 3435
     }
    }
    addContents=
    returnJunctions=
    returnEdges=
    returnContainers=
    returnGeometry=
    outSR=
    f=pjson
    ```

     
-   Sent URL (GET): `https://myserver.esri.com/server/rest/services/Naperville/NetworkDiagramServer/diagrams/Basic_RMT003/queryDiagramElementsByExtent?gdbVersion=&sessionId=&moment=&extent=%7B%22xmin%22%3A+1034510.4869008437%2C%22ymin%22%3A+1871859.3734351993%2C%22xmax%22%3A+1034521.7178495117%2C%22ymax%22%3A+1871863.1050550342%2C%22spatialReference%22%3A+%7B%22wkid%22%3A+102671%2C%22latestWkid%22%3A+3435%7D%7D&addContents=&returnJunctions=&returnEdges=&returnContainers=&returnGeometry=&outSR=&f=pjson` 

## JSON Response syntax

A JSON object composed of a maximum of three arrays depending on the value specified for the returnJunctions, returnEdges. and returnContainers parameters:

-   An array of &lt;diagramJunction> JSON objects, when `returnJunctions = true` 
-   An array of &lt;diagramEdge> JSON objects, when `returnEdges = true` 
-   An array of &lt;diagramContainer> JSON objects, `when returnContainers = true` 

```json
{
 "diagramJunctions": [< diagramJunction1 >, ..., < diagramJunctionK >],
 "diagramEdges": [< diagramEdge1 >, ..., < diagramEdgeM >],
 "diagramContainers": [< diagramContainer1 >, ..., < diagramContainerN >]
}

```

 

With the following JSON object syntaxes:

-    &lt;diagramJunction> JSON object syntax

    ```json
    {
     "id": <ID>, //int
     "containerID": < containerID >, //int
     "featureOID": < jctOID >, //int
     "globalID": < diagFeatureGUID >, // string
     "assocSourceID": < assUNSourceID >, //int
     "assocGlobalID": "< assUNfeatureGUID >", // string
     "geometry": {
       "x": < x >, //double
       "y": < y >, //double
       "z": < z >, //double
       "m": < m >, //double
       "spatialReference": < spatialReference >
     },
     "rotation": < rotation > //int
    }

    ```

     
-   &lt;diagramEdge> JSON object syntax

    ```json
    {
     "id": < ID >, // long
     "containerID": < containerID >, // long
     "featureOID": < edgeOID >, // long
     "globalID": < diagFeatureGUID >, // string
     "assocSourceID": < assUNSourceID >, // long
     "assocGlobalID": "< assUNfeatureGUID >", // string
     "geometry": {
      "hasM" : <  true | false  >,
      "paths" : [[[< x11 >, < y11 >, < z11 >, < m11 >],…,[< x1N >, < y1N >, < z1N >, < m1N >]],
                 ,…,[[< xk1 >, < yk1 >, < zk1 >, < mk1 >],…,[< xkM >, < ykM >, < zkM >, < mkM >]]],
      "spatialReference": < spatialReference >
     },
     "fromID": < FromID >, // long
     "toID": < ToID >, // long
    }

    ```

     
-   &lt;diagramContainer> JSON object syntax

    ```json
    {
     "id": < ID >, //int
     "containerID": < containerID >, // long
     "featureOID": < containerOID >, // long
     "globalID": < diagFeatureGUID >, // string
     "assocSourceID": < assUNSourceID >, // long
     "assocGlobalID": "< assUNfeatureGUID >", // string
     "geometry": {
       "hasZ" : true | false,
       "hasM" : true | false,
       "rings" : [[[< x11 >, < y11 >, < z11 >, < m11 >],...,[< x1N >, < y1N >, < z1N >, < m1N >]],
                 ,...,[[< xk1 >, < yk1 >, < zk1 >, < mk1 >],...,[< xkM >, < ykM >, < zkM >, < mkM >]]],
      "spatialReference": < spatialReference >}
    }
    

    ```

     

## JSON Response example

Sample response when returnGeometry is True (default)

```json
{
 "diagramJunctions": [
  {
   "id": 7,
   "containerID": 6,
   "featureOID": 18806,
   "globalID": "{D337C4F7-2B24-4072-988B-D45F7D10D376}",
   "assocSourceID": 6,
   "assocGlobalID": "{2403ED10-BBBE-4DF6-AF29-65998FADB99F}",
   "rotation": 0,
   "geometry": {
    "x": 1034253.57566926256,
    "y": 1869160.674764365,
    "m": null,
    "spatialReference": {
     "wkid": 102671,
     "latestWkid": 3435,
     "vcsWkid": 105703,
     "latestVcsWkid": 6360
    }
   }
  },
  {
   "id": 9,
   "containerID": 6,
   "featureOID": 18808,
   "globalID": "{6DD5ADB0-DF35-4F0D-8C21-186AAC5E1C4A}",
   "assocSourceID": 9,
   "assocGlobalID": "{C366397B-3088-46A1-80E7-ACFDA4BB812F}",
   "rotation": 0,
   "geometry": {
    "x": 1034253.57501309365,
    "y": 1869160.42476486415,
    "m": null,
    "spatialReference": {
     "wkid": 102671,
     "latestWkid": 3435,
     "vcsWkid": 105703,
     "latestVcsWkid": 6360
    }
   }
  }
 ],
 "diagramEdges": [
  {
   "id": 1199,
   "containerID": 6,
   "featureOID": 19820,
   "globalID": "{AB16E11A-D3B0-404D-A8F1-6283DA20B66F}",
   "assocSourceID": 1,
   "assocGlobalID": "{D1E28A6B-B6A2-4C6B-8604-E4B79D719B06}",
   "fromID": 7,
   "toID": 9,
   "geometry": {
    "hasM": true,
    "paths": [
     [
      [
       1034253.57566926256,
       1869160.674764365,
       null
      ],
      [
       1034253.57501309365,
       1869160.42476486415,
       null
      ]
     ]
    ],
    "spatialReference": {
     "wkid": 102671,
     "latestWkid": 3435,
     "vcsWkid": 105703,
     "latestVcsWkid": 6360
    }
   }
  }
 ],
 "diagramContainers": [
  
 ]
}


```

 

Sample response when returnGeometry is False

```json
{
 "diagramJunctions": [
  {
   "id": 7,
   "containerID": 6,
   "featureOID": 18806,
   "globalID": "{D337C4F7-2B24-4072-988B-D45F7D10D376}",
   "assocSourceID": 6,
   "assocGlobalID": "{2403ED10-BBBE-4DF6-AF29-65998FADB99F}",
   "rotation": 0
  },
  {
   "id": 9,
   "containerID": 6,
   "featureOID": 18808,
   "globalID": "{6DD5ADB0-DF35-4F0D-8C21-186AAC5E1C4A}",
   "assocSourceID": 9,
   "assocGlobalID": "{C366397B-3088-46A1-80E7-ACFDA4BB812F}",
   "rotation": 0
  }
 ],
 "diagramEdges": [
  {
   "id": 1199,
   "containerID": 6,
   "featureOID": 19820,
   "globalID": "{AB16E11A-D3B0-404D-A8F1-6283DA20B66F}",
   "assocSourceID": 1,
   "assocGlobalID": "{D1E28A6B-B6A2-4C6B-8604-E4B79D719B06}",
   "fromID": 7,
   "toID": 9
  }
 ],
 "diagramContainers": [
  
 ]
}


```

 
