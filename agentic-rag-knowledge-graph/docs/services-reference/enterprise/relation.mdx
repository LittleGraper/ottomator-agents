---
title: "Relation"
description: "This operation determines the pairs of geometries from the input geometry arrays that participate in the specified spatial relation."
slug: "relation"
url: "/relation"
guid: "GUID-E1B91A80-7509-4183-A4C7-BF59EFC926CE"
migratedTopicMetadata:
  FTITLE: "Relation"
  FDESCRIPTION: ""
  FCHANGES: "Fixing broken links"
  FISHRELEASELABEL: ""
  FESRISOFTWARERELEASE: ""
  FESRITAGCLOUD: ""
  FESRIRECREATIONPROCEDURE: ""
  FESRIPRODUCTLIFECYCLE: "10.9.1- *"
  CREATED-ON: "07/09/2021 13:25:22"
  FAUTHOR: "tohara"
  FSTATUS: "Released"
  MODIFIED-ON: "04/10/2021 10:03:18"
  VERSION: "4"
  FRESOLUTION: ""
  DOC-LANGUAGE: "en"
  FISHREVCOUNTER: "4"
  ED: "GUID-BC811B3D-0163-4FE4-8937-BDC3F964F07D"
  FUSERGROUP: "VUSERGROUPARCGISONLINEDOC"
  READ-ACCESS: ""
restInfoMetadata:
  apiPath: /Utilities/Geometry/GeometryServer/relation
  urlSegments:
    - name: <root>
      url: /catalog
    - name: /Utilities/Geometry/GeometryServer/relation
  methods: []
  sslOnly: 'no'
  versionIntroduced: 9.3 SP1
---

import GUID_12D33E07_319F_493E_A7BD_EA5AEEE8F739_GUID_60F696CD_A0E3_45AB_AFAF_6769324DD2E6 from "./snippets/GUID-12D33E07-319F-493E-A7BD-EA5AEEE8F739/_GUID-60F696CD-A0E3-45AB-AFAF-6769324DD2E6";
import GUID_12D33E07_319F_493E_A7BD_EA5AEEE8F739_GUID_6020B35B_86C7_4B9B_A64C_B1522DFC2D6B from "./snippets/GUID-12D33E07-319F-493E-A7BD-EA5AEEE8F739/_GUID-6020B35B-86C7-4B9B-A64C-B1522DFC2D6B";

## Description

The `relation` operation is performed on a [geometry service resource](/geometry-service). This operation determines the pairs of geometries from the input geometry arrays that participate in the specified spatial relation. Both arrays are assumed to be in the spatial reference specified by `sr`, which is a required parameter. Geometry types cannot be mixed within an array. The relations are evaluated in 2D. In other words, z-coordinates are not used. This operation calls `simplify` on the input `geometries1` and `geometries2`.

You can provide arguments to the `relation` operation as query parameters defined in the following parameters table.

## Request parameters

<StyledTable headers={"Parameter,Details"}>

<StyledTableRow>
<StyledTableCell cellStyle="markdown">

`geometries1` 

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Specifies the first array of geometries used to compute the relations. The structure of each geometry in the array is the same as the structure of the [JSON geometry objects](/geometry-objects) returned by the ArcGIS REST API. 

All geometries in the `geometries1` array should be of the type defined by `geometryType`.

Syntax: 

<GUID_12D33E07_319F_493E_A7BD_EA5AEEE8F739_GUID_60F696CD_A0E3_45AB_AFAF_6769324DD2E6 />

Example: 

```json
{
  "geometryType" : "esriGeometryPoint",
  "geometries" :
  [
    {"x" : -104.5, "y" : 34.74},
    {"x" : -63.53, "y" : 10.23}
  ]
}

```

For a large set of geometries, you can specify a URL to the input geometries stored in a JSON structure in a file on a public server. The expected format of the file’s contents will be exactly the same as that expected if the geometries were directly embedded in the request.

Syntax

```javascript
geometries1={"url": "<URL to file>"}
```

Example

```javascript
geometries1={"url": "https://<myserver>/<mygeometries>/<afile1.txt>"}
```

</StyledTableCell>
</StyledTableRow>

<StyledTableRow>
<StyledTableCell cellStyle="markdown">

`geometries2` 

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Specifies the second array of geometries to compute the relations. The structure of each geometry in the array is the same as the structure of the [JSON geometry objects](/geometry-objects) returned by the ArcGIS REST API.

All geometries in the `geometries2` array should be of the type defined by `geometryType`.

Syntax: 

<GUID_12D33E07_319F_493E_A7BD_EA5AEEE8F739_GUID_60F696CD_A0E3_45AB_AFAF_6769324DD2E6 />

Example: 

<GUID_12D33E07_319F_493E_A7BD_EA5AEEE8F739_GUID_6020B35B_86C7_4B9B_A64C_B1522DFC2D6B />

For a large set of geometries, you can specify a URL to the input geometries stored in a JSON structure in a file on a public server. The expected format of the file’s contents will be exactly the same as that expected if the geometries were directly embedded in the request.

Syntax

```javascript
geometries2={"url": "<URL to file>"}
```

Example

```javascript
geometries2={"url": "https://<myserver>/<mygeometries>/<afile2.txt>"}
```

</StyledTableCell>
</StyledTableRow>

<StyledTableRow>
<StyledTableCell cellStyle="markdown">

`sr` 

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Specifies the well-known ID of the spatial reference or a [spatial reference JSON object](/geometry-objects#spatial-reference) for the input geometries. For a list of valid WKID values, see [Using spatial references](/using-spatial-references).

</StyledTableCell>
</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`relation` 

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Specifies the spatial relationship to be tested between the two input geometry arrays.

<Note type={"note"}>

If the `relation` is specified as `esriGeometryRelationRelation`, the `relationParam` parameter describes the spatial relationship and must be specified.

</Note>

Values: `esriGeometryRelationCross`  \| `esriGeometryRelationDisjoint`  \| `esriGeometryRelationIn`  \| `esriGeometryRelationInteriorIntersection`  \| `esriGeometryRelationIntersection`  \| `esriGeometryRelationLineCoincidence`  \| `esriGeometryRelationLineTouch`  \| `esriGeometryRelationOverlap`  \| `esriGeometryRelationPointTouch`  \| `esriGeometryRelationTouch`  \| `esriGeometryRelationWithin`  \| `esriGeometryRelationRelation` 

</StyledTableCell>
</StyledTableRow>

<StyledTableRow>
<StyledTableCell cellStyle="markdown">

`relationParam` 

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

The Shape Comparison Language string to be evaluated. Strings such as `RELATE(G1, G2, "FFFTTT***")` are accepted, in addition to other kinds of strings. This string describes the spatial relationship to be tested when the `relation` parameter is specified as `esriGeometryRelationRelation`. 

</StyledTableCell>
</StyledTableRow>

<StyledTableRow>
<StyledTableCell cellStyle="markdown">

`f` 

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

The response format. The default format is `html`.

Values: `html`  \| `json`  \| `pjson` 

</StyledTableCell>
</StyledTableRow>

</StyledTable>

## Example usage

The following are decoded sample request URLs for `relation`. The actual URLs must be encoded. 

## Example 1

This example determines which of the two input points lies within the input polygon.

[`https://sampleserver6.arcgisonline.com/arcgis/rest/services/Utilities/Geometry/GeometryServer/relation?sr=4326&geometries1={"geometryType":"esriGeometryPoint","geometries":[{"x":-104.53,"y":34.74},{"x":-63.53,"y":10.23}]}&geometries2={"geometryType":"esriGeometryPolygon","geometries":[{"rings":[[[-105,34],[-104,34],[-104,35],[-105,35],[-105,34]]]}]}&relation=esriGeometryRelationWithin`](https://sampleserver6.arcgisonline.com/arcgis/rest/services/Utilities/Geometry/GeometryServer/relation?sr=4326&geometries1=%7B%22geometryType%22%3A%22esriGeometryPoint%22%2C%22geometries%22%3A%5B%7B%22x%22%3A-104.53%2C%22y%22%3A34.74%7D%2C%7B%22x%22%3A-63.53%2C%22y%22%3A10.23%7D%5D%7D&geometries2=%7B%22geometryType%22%3A%22esriGeometryPolygon%22%2C%22geometries%22%3A%5B%7B%22rings%22%3A%5B%5B%5B-105%2C34%5D%2C%5B-104%2C34%5D%2C%5B-104%2C35%5D%2C%5B-105%2C35%5D%2C%5B-105%2C34%5D%5D%5D%7D%5D%7D&relation=esriGeometryRelationWithin&relationParam=&f=html)

## JSON Response syntax

The response specifies the indices of the geometries that participate in the relation. 

```other
{"relations": [{
 "geometry1Index": <geometry1Index1>,
 "geometry2Index": <geometry2Index1>
}]}
```

## JSON Response example

```json
{"relations": [{
 "geometry1Index": 0,
 "geometry2Index": 0
}]}
```

## Example 2

This example uses a Shape Comparison Language string (`relationParam`) to determine which polygons have intersecting interiors and boundaries.

[`https://sampleserver6.arcgisonline.com/arcgis/rest/services/Utilities/Geometry/GeometryServer/relation?sr=4326&geometries1={"geometryType":"esriGeometryPolygon","geometries":[{"rings":[[[0,0],[0,4],[2,2],[3,4],[5,0],[0,0]]]},{"rings":[[[0,4],[3,4],[6.72,3.42],[4.34,2],[0,4]]]}]}&geometries2={"geometryType":"esriGeometryPolygon","geometries":[{"rings":[[[3,4],[6,72,3.42],[4.34,2],[3,4]]]},{"rings":[[[5,1],[7,1],[7,0],[5,0],[5,1]]]},{"rings":[[[1,1],[1,2],[2,1],[1,1]]]},{"rings":[[[3,1],[5,1],[7,1],[7,0],[3,0],[3,1]]]}]}&relation=esriGeometryRelationRelation&relationParam=RELATE(G1,G2,'T***T****')`](https://sampleserver6.arcgisonline.com/arcgis/rest/services/Utilities/Geometry/GeometryServer/relation?sr=4326&geometries1=%7B%22geometryType%22%3A%22esriGeometryPolygon%22%2C%22geometries%22%3A%5B%7B%22rings%22%3A%5B%5B%5B0%2C0%5D%2C%5B0%2C4%5D%2C%5B2%2C2%5D%2C%5B3%2C4%5D%2C%5B5%2C0%5D%2C%5B0%2C0%5D%5D%5D%7D%2C%7B%22rings%22%3A%5B%5B%5B0%2C4%5D%2C%5B3%2C4%5D%2C%5B6.72%2C3.42%5D%2C%5B4.34%2C2%5D%2C%5B0%2C4%5D%5D%5D%7D%5D%7D&geometries2=%7B%22geometryType%22%3A%22esriGeometryPolygon%22%2C%22geometries%22%3A%5B%7B%22rings%22%3A%5B%5B%5B3%2C4%5D%2C%5B6%2C72%2C3.42%5D%2C%5B4.34%2C2%5D%2C%5B3%2C4%5D%5D%5D%7D%2C%7B%22rings%22%3A%5B%5B%5B5%2C1%5D%2C%5B7%2C1%5D%2C%5B7%2C0%5D%2C%5B5%2C0%5D%2C%5B5%2C1%5D%5D%5D%7D%2C%7B%22rings%22%3A%5B%5B%5B1%2C1%5D%2C%5B1%2C2%5D%2C%5B2%2C1%5D%2C%5B1%2C1%5D%5D%5D%7D%2C%7B%22rings%22%3A%5B%5B%5B3%2C1%5D%2C%5B5%2C1%5D%2C%5B7%2C1%5D%2C%5B7%2C0%5D%2C%5B3%2C0%5D%2C%5B3%2C1%5D%5D%5D%7D%5D%7D&relation=esriGeometryRelationRelation&relationParam=RELATE%28G1%2CG2%2C%27T***T****%27%29&f=html)

## JSON Response syntax

```other
{"relations": [
 {
  "geometry1Index": <geometry1Index1>,
  "geometry2Index": <geometry2Index1>
 },
 {
  "geometry1Index": <geometry1Index2>,
  "geometry2Index": <geometry2Index2>
 }
]}
```

## JSON Response example

The geometry in `geometries1` with index 0 and the geometry in `geometries2` with index 3 participate in the relation. Similarly, he geometry in `geometries1` with index 1 and the geometry in `geometries2` with index 0 also participate in the relation.

```json
{"relations": [
 {
  "geometry1Index": 0,
  "geometry2Index": 3
 },
 {
  "geometry1Index": 1,
  "geometry2Index": 0
 }
]}
```
