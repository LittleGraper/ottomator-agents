---
title: "Classify Objects Using Deep Learning"
description: "API reference for the Classify Objects Using Deep Learning service available in ArcGIS Enterprise."
slug: "classify-objects-using-deep-learning"
url: "/classify-objects-using-deep-learning"
guid: "GUID-BCC72038-3D67-4902-A929-1B67FA49D0F1"
migratedTopicMetadata:
  FTITLE: "Classify Objects Using Deep Learning"
  FDESCRIPTION: ""
  FCHANGES: "Removing related resources re: https://devtopia.esri.com/WebGIS/arcgis-rest-api-documentation/issues/191"
  FISHRELEASELABEL: ""
  FESRISOFTWARERELEASE: ""
  FESRITAGCLOUD: ""
  FESRIRECREATIONPROCEDURE: ""
  FESRIPRODUCTLIFECYCLE: "10.9 - *"
  CREATED-ON: "09/09/2022 12:22:48"
  FAUTHOR: "tohara"
  FSTATUS: "Released"
  MODIFIED-ON: "20/09/2022 11:06:41"
  VERSION: "7"
  FRESOLUTION: ""
  DOC-LANGUAGE: "en"
  FISHREVCOUNTER: "2"
  ED: "GUID-6320B2EB-54E0-4775-B951-0DED20DE2250"
  FUSERGROUP: ""
  READ-ACCESS: ""
restInfoMetadata:
  apiPath: /ClassifyObjectsUsingDeepLearning
  urlSegments:
    - name: <rasteranalysis-url>
      url: /raster-analysis-tasks-overview
    - name: /ClassifyObjectsUsingDeepLearning
  methods: []
  sslOnly: 'no'
  versionIntroduced: '10.8'
---

import GUID_92B97D46_70DD_4B77_80C3_E6A319680CD9_LI_2DDA48A24C404781BB03BF05B81B3C19 from "./snippets/GUID-92B97D46-70DD-4B77-80C3-E6A319680CD9/_LI_2DDA48A24C404781BB03BF05B81B3C19";
import GUID_92B97D46_70DD_4B77_80C3_E6A319680CD9_LI_1744B5CA044F44D8ABF2E27EF9BC9A27 from "./snippets/GUID-92B97D46-70DD-4B77-80C3-E6A319680CD9/_LI_1744B5CA044F44D8ABF2E27EF9BC9A27";
import GUID_92B97D46_70DD_4B77_80C3_E6A319680CD9_LI_30623A2523584FB586A882C09EA092E6 from "./snippets/GUID-92B97D46-70DD-4B77-80C3-E6A319680CD9/_LI_30623A2523584FB586A882C09EA092E6";
import GUID_92B97D46_70DD_4B77_80C3_E6A319680CD9_LI_CE9516B4F2CC486AB1D7309DCF46BB60 from "./snippets/GUID-92B97D46-70DD-4B77-80C3-E6A319680CD9/_LI_CE9516B4F2CC486AB1D7309DCF46BB60";
import GUID_187EFF3C_6544_4421_8D1E_9DFCF76354CD_GUID_56FBFBA3_C66E_404D_8D62_38D68537B266 from "./snippets/GUID-187EFF3C-6544-4421-8D1E-9DFCF76354CD/_GUID-56FBFBA3-C66E-404D-8D62-38D68537B266";
import GUID_187EFF3C_6544_4421_8D1E_9DFCF76354CD_GUID_EB4A1F30_5539_4BD1_AB9D_2D4EA4603F0E from "./snippets/GUID-187EFF3C-6544-4421-8D1E-9DFCF76354CD/_GUID-EB4A1F30-5539-4BD1-AB9D-2D4EA4603F0E";
import GUID_187EFF3C_6544_4421_8D1E_9DFCF76354CD_GUID_C5A064C3_43B4_400B_AA66_7C41F2A060FB from "./snippets/GUID-187EFF3C-6544-4421-8D1E-9DFCF76354CD/_GUID-C5A064C3-43B4-400B-AA66-7C41F2A060FB";
import GUID_187EFF3C_6544_4421_8D1E_9DFCF76354CD_GUID_44A86E3D_176E_4BD4_A2E5_C112ED929DE9 from "./snippets/GUID-187EFF3C-6544-4421-8D1E-9DFCF76354CD/_GUID-44A86E3D-176E-4BD4-A2E5-C112ED929DE9";
import GUID_187EFF3C_6544_4421_8D1E_9DFCF76354CD_GUID_ED11CCC7_40D3_4ADD_A679_A3F6964834ED from "./snippets/GUID-187EFF3C-6544-4421-8D1E-9DFCF76354CD/_GUID-ED11CCC7-40D3-4ADD-A679-A3F6964834ED";
import GUID_92B97D46_70DD_4B77_80C3_E6A319680CD9_GUID_50D345C8_14F8_4A4A_AB1E_A6BBD19C49EF from "./snippets/GUID-92B97D46-70DD-4B77-80C3-E6A319680CD9/_GUID-50D345C8-14F8-4A4A-AB1E-A6BBD19C49EF";

## Description

![Classify Objects Using Deep Learning diagram](./images/GUID-DBFEDFA4-4CBD-4465-99B9-92D075BF0FE4-web.png)

The `ClassifyObjectsUsingDeepLearning`  task is used to classify objects based on overlaid imagery data using the designated deep learning model and generate a feature service with a new assigned label for each object.

<Note type={"note"}>

As of 10.8, you must license your ArcGIS Server as an ArcGIS Image Server to use this resource.

</Note>

##  Request parameters

<StyledTable headers={"Parameter,Details"}>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`inputRaster` 

(Required)

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

The input image used to classify objects. This can be specified as the portal item ID, image service URL, cloud raster dataset, shared raster dataset, a feature service with image attachments, or a raster dataset or image collection in the data store. At least one type of input must be provided in the JSON object. If multiple inputs are provided, the `itemId`  value takes priority.

Syntax: A JSON object describes the input raster.

Example:

```javascript
//Portal Item ID
inputRaster={"itemId": <portal item id>}

//Image Service URL
inputRaster={"url": <image service url>}

//Feature Service URL
inputRaster={"url": <feature service url>}

//URI for a cloud raster or shared data path
inputRaster={"uri": <cloud raster uri or shared data path>}

//Service Properties
inputRaster={"serviceProperties":{"name":" testrasteranalysis ","serviceUrl":"https://<server name>/server/rest/services/Hosted/testrasteranalysis /ImageServer"},"itemProperties":{"itemId":"8cfbd3ec25584d0d8f4ed23b8ff7c43b", "folderId":"sdfwerfbd3ec25584d0d8f4"}}

//Data store URI 
inputRaster={"uri":"/rasterStores/rasterstorename/A/B/C"}
or
inputRaster={"uri":"/fileShares/filesharedatastorename/A/B/C"}
or
inputRaster={"uri":"/cloudStores/cloudstorename/A/B/C"}


```

 

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`inputFeatures` 

(Optional)

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

The feature service layer that contains the points, polylines, or polygons that identify the location of each object to be classified and labeled. The layer index is needed for the feature service URL.

Syntax: A JSON object describes the input feature service layer.

Example:

```javascript
//Feature Service Layer URL
inputFeatures={"url": <feature service layer url>}

//Shared Data Path
inputFeatures={"uri": <shared data path>}

//Service Properties
inputFeatures={"serviceProperties":{"name":"testrasteranalysis","serviceUrl":"https://<server name>/server/rest/services/Hosted/testrasteranalysis/FeatureServer/0"},"itemProperties":{"itemId":"8cfbd3ec25584d0d8f4ed23b8ff7c43b","folderId":"sdfwerfbd3ec25584d0d8f4"}}
```

 

Example

```javascript
inputFeatures={"url": "https://myserver/arcgis/rest/services/Hosted/testrasteranalysis/FeatureServer/0}
```

 

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`outputFeatureClass` 

(Required)

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

The output hosted feature service properties. If you're using an existing hosted feature service, the portal item ID or service URL can be provided, and the output path of the feature class that is generated will be used to update the existing service definition. The service tool can also generate a new hosted feature service with the service properties provided.

The output hosted feature service is stored and shared on the hosting server.

Syntax: A JSON object describes the output feature service.

Example:

```javascript
//Portal Item ID
outputFeatureClass={"itemId": <portal item id>}

//Hosted Feature Service URL
outputFeatureClass={"url": <hosted feature service url>}

//Feature Class Local Output Path
outputFeatureClass={"uri": <feature class local output path>}

//Service Properties
outputFeatureClass={"serviceProperties":{"name":"testrasteranalysis","serviceUrl":"https://<server name>/server/rest/services/Hosted/testrasteranalysis/FeatureServer"},"itemProperties":{"itemId":"8cfbd3ec25584d0d8fed23b8ff7c43b","folderId":"sdfwerfbd3ec25584d0d8f4"}}
```

 

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`model` 

(Required)

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

The deep learning model used to classify objects. This can be specified as the deep learning model portal item ID, as an `.emd`  or `.dlpk`  file, or as the entire JSON string of the model definition.

Syntax: A JSON object describes the model.

Example:

```javascript
//Portal Item
model={"itemId": "x2u130909jcvojzkeeraedf"}
model={"url": "https://<portal name>/portal/sharing/rest/content/items/x2u130909jcvojzkeeraedf"}

//.emd or .dlpk file
model={"uri": "\\\\sharedstorage\\sharefolder\\ClassifyHouseDamage.emd"}
model={"uri": "\\\\sharedstorage\\sharefolder\\ClassifyHouseDamage.dlpk"}
model={"uri": "/rasterStores/rasterstorename/A/B/ClassifyHouseDamage.emd"}
model={"uri": "/rasterStores/rasterstorename/A/B/ClassifyHouseDamage.dlpk"}

//.emd or .dlpk file stored in raster store with file share type
model = {"uri": "/fileShares/filesharedatastorename/A/B/ClassifyHouseDamage.emd"}
model={"uri": "/fileShares/filesharedatastorename/A/B/model.dlpk"}

```

 

Example for JSON:

```javascript
model={
  "Framework": "Keras",
  "ModelConfiguration": {
    "Name": "KerasClassifier"
  },
  "ModelFile": "Damage_Classification_Model.h5",
  "ModelType": "ObjectClassification",
  "ImageHeight": 256,
  "ImageWidth": 256,
  "ExtractBands": [
    0,
    1,
    2
  ],
  "CropSizeFixed": 1,
  "BlackenAroundFeature": 1,
  "ImageSpaceUsed": "MAP_SPACE",
  "Classes": [
    {
      "Value": 0,
      "Name": "undamaged",
      "Color": [
        255,
        255,
        0
      ]
    },
    {
      "Value": 1,
      "Name": "damaged",
      "Color": [
        0,
        255,
        255
      ]
    }
  ]
}
```

 

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`modelArguments` 

(Optional)

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

The name of the value pairs of arguments and their values that can be customized by the clients.

Syntax: A JSON object describes the value pairs of arguments.

Example:

```javascript
modelArguments={"name1": "value1", "name2": "value2"}
```

 

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`classLabelField` 

(Optional)

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

The name of the field that will contain the classification label in the output feature service.

Syntax: String.

Example:

```javascript
classLabelField="ClassLabel"
```

 

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`processAllRasterItems` 

(Optional)

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Specifies how all raster items in an image service will be processed. If set to `true` , all raster items in the image service will be processed as separate images. If set to `false` , all raster items in the image service will be mosaicked together and processed. This is the default.

Values: `true`  \| `false` 

Example:

```javascript
processAllRasterItems=false
```

 

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`context` 

(Optional)

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

The environment settings that affect task execution. This task has the following settings:

-   <GUID_92B97D46_70DD_4B77_80C3_E6A319680CD9_LI_2DDA48A24C404781BB03BF05B81B3C19 />
-   <GUID_92B97D46_70DD_4B77_80C3_E6A319680CD9_LI_1744B5CA044F44D8ABF2E27EF9BC9A27 />
-   <GUID_92B97D46_70DD_4B77_80C3_E6A319680CD9_LI_30623A2523584FB586A882C09EA092E6 />
-   <GUID_92B97D46_70DD_4B77_80C3_E6A319680CD9_LI_CE9516B4F2CC486AB1D7309DCF46BB60 />

Example

```javascript
context={"cellSize": "20", "processorType": "CPU", "parallelProcessingFactor": "4"}
```

 

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`f` 

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

<GUID_187EFF3C_6544_4421_8D1E_9DFCF76354CD_GUID_56FBFBA3_C66E_404D_8D62_38D68537B266 />

<GUID_187EFF3C_6544_4421_8D1E_9DFCF76354CD_GUID_EB4A1F30_5539_4BD1_AB9D_2D4EA4603F0E />

</StyledTableCell>

</StyledTableRow>

</StyledTable>

## Example usage

The following is a sample request URL for `ClassifyObjectsUsingDeepLearning` :

```javascript
https://machine.domain.com/webadaptor/rest/services/System/RasterAnalysisTools/GPServer/ClassifyObjectsUsingDeepLearning?
inputRaster="url":"https://<server name>/arcgis/ArcGIS/rest/services/World_Imagery/MapServer"&inputFeatures="url":"https://<server name>/arcgis/server/rest/services/Hosted/test_parkinglot/FeatureServer/0"&outputFeatureClass={"serviceProperties":{"name":"test10210453"}}&model={"itemId": "d8d3902b41854529a907ad9f42af5a06"}&modelArguments={"padding": "0", "batch_size": "16"}&classLabelField=ClassLabel&processAllRasterItems=false&context={"extent": {"xmin": -13160539.4563053,"ymin": 3998752.62631951,"xmax": -13160427.5538234,"ymax": 3998824.51069532,"spatialReference": {"wkid": 3857}},"processorType": "CPU","parallelProcessingFactor": 2}}&f=json
```

 

The following is a sample POST request for `ClassifyObjectsUsingDeepLearning` :

```javascript
POST /webadaptor/rest/services/System/RasterAnalysisTools/GPServer/ClassifyObjectsUsingDeepLearning HTTP/1.1
Host: machine.domain.com
Content-Type: application/x-www-form-urlencoded
Content-Length: []

inputRaster={"url":"https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"}&inputFeatures={"url":"https://<server name>/arcgis/server/rest/services/Hosted/test_parkinglot/FeatureServer/0"}&outputFeatureClass={"serviceProperties": {"name":"test10210453"}}&model={"itemId": "d8d3902b41854529a907ad9f42af5a06"}modelArguments={"padding": "0", "batch_size": "16"
}classLabelField=ClassLabel&processAllRasterItems=false&context={"extent": {"xmin": -13160539.4563053,"ymin": 3998752.62631951,"xmax": -13160427.5538234,"ymax": 3998824.51069532,"spatialReference": {"wkid": 3857}},"processorType": "CPU", "parallelProcessingFactor": 2}}&f=json
```

 

Both of the requests above use the following parameters and values in their request:

```javascript
inputRaster={"url":"https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"}
iputFeatures={"url":"https://<server name>/arcgis/server/rest/services/Hosted/test_parkinglot/FeatureServer/0"}
outputFeatureClass={"serviceProperties":{"name":"test10210453"}}
model={"itemId": " d8d3902b41854529a907ad9f42af5a06"}
modelArguments={"padding": "0", "batch_size": "16"}
classLabelField=ClassLabel
processAllRasterItems=false
context={"extent": {"xmin": -13160539.4563053,"ymin": 3998752.62631951,"xmax": -13160427.5538234,"ymax": 3998824.51069532,"spatialReference": {"wkid": 3857}}, "processorType": "CPU", "parallelProcessingFactor": 2}}
f=json
```

 

## Response

<GUID_187EFF3C_6544_4421_8D1E_9DFCF76354CD_GUID_C5A064C3_43B4_400B_AA66_7C41F2A060FB />

<GUID_187EFF3C_6544_4421_8D1E_9DFCF76354CD_GUID_44A86E3D_176E_4BD4_A2E5_C112ED929DE9 />

<GUID_187EFF3C_6544_4421_8D1E_9DFCF76354CD_GUID_ED11CCC7_40D3_4ADD_A679_A3F6964834ED />

```javascript
https://<rasterAnalysisTools-url>/AddImage/jobs/<jobId>
```

 

<GUID_92B97D46_70DD_4B77_80C3_E6A319680CD9_GUID_50D345C8_14F8_4A4A_AB1E_A6BBD19C49EF />

```javascript
https://<rasterAnalysisTools-url>/AddImage/jobs/<jobId>/results/outObjects
```

 

## JSON Response example

The response returns the `outObjects`  output parameter, which has properties for parameter name, data type, and value. The content of value is always the output feature layer item ID and the image service URL.

```other
{
  "paramName": "outObjects",
  "dataType": "GPFeatureRecordSetLayer",
  "value": {
    "itemId": "f121390b85ef419790479fc75b493efd",
    "url": "https://<server name>/arcgis/rest/services/Hosted/<service name>/FeatureServer"
  }
}
```

 
