---
title: "Summarize Within"
description: "API reference for the Summarize Within service available on ArcGIS Online."
slug: "sa-summarize-within"
url: "/spatial-analysis/tasks/sa-summarize-within"
redirectFrom:
  - /sa-summarize-within
guid: "GUID-4F8A6F6D-A32E-4F58-8EA7-67A684829D83"
migratedTopicMetadata:
  FTITLE: "SA Summarize Within"
  FDESCRIPTION: "REST API doc"
  FCHANGES: ""
  FISHRELEASELABEL: ""
  FESRISOFTWARERELEASE: ""
  FESRITAGCLOUD: ""
  FESRIRECREATIONPROCEDURE: ""
  FESRIPRODUCTLIFECYCLE: "agol10.1 - * :11.0 - *"
  CREATED-ON: "28/02/2022 16:24:20"
  FAUTHOR: "sambrose"
  FSTATUS: "Released"
  MODIFIED-ON: "02/03/2022 13:23:09"
  VERSION: "9"
  FRESOLUTION: ""
  DOC-LANGUAGE: "en"
  FISHREVCOUNTER: "3"
  ED: "GUID-511D448C-F481-4152-8916-457C7987EB0F"
  FUSERGROUP: "VUSERGROUPARCGISONLINEDOC"
  READ-ACCESS: ""
restInfoMetadata: {}
---

import GUID_98478E86_0753_4C4D_A2EB_7DC84675B2DC_GUID_E0E9FDE9_9A98_4EA4_9164_0E878BADF591 from "../../snippets/GUID-98478E86-0753-4C4D-A2EB-7DC84675B2DC/_GUID-E0E9FDE9-9A98-4EA4-9164-0E878BADF591";
import GUID_98478E86_0753_4C4D_A2EB_7DC84675B2DC_GUID_D95DEC58_7F27_491A_AF3D_6E6A3C0A6F2D from "../../snippets/GUID-98478E86-0753-4C4D-A2EB-7DC84675B2DC/_GUID-D95DEC58-7F27-491A-AF3D-6E6A3C0A6F2D";
import GUID_98478E86_0753_4C4D_A2EB_7DC84675B2DC_GUID_E1EF792A_E9AD_4B1E_AE8D_248E4B37435A from "../../snippets/GUID-98478E86-0753-4C4D-A2EB-7DC84675B2DC/_GUID-E1EF792A-E9AD-4B1E-AE8D-248E4B37435A";
import GUID_98478E86_0753_4C4D_A2EB_7DC84675B2DC_GUID_5358FACD_95DC_41C9_AEF9_47FE2E7DD7E1 from "../../snippets/GUID-98478E86-0753-4C4D-A2EB-7DC84675B2DC/_GUID-5358FACD-95DC-41C9-AEF9-47FE2E7DD7E1";
import GUID_98478E86_0753_4C4D_A2EB_7DC84675B2DC_GUID_EBB8515E_527A_4013_A6EA_AA8EBF549CCF from "../../snippets/GUID-98478E86-0753-4C4D-A2EB-7DC84675B2DC/_GUID-EBB8515E-527A-4013-A6EA-AA8EBF549CCF";
import GUID_98478E86_0753_4C4D_A2EB_7DC84675B2DC_GUID_E836F966_C272_43B1_9BF9_55BA03755A13 from "../../snippets/GUID-98478E86-0753-4C4D-A2EB-7DC84675B2DC/_GUID-E836F966-C272-43B1-9BF9-55BA03755A13";
import GUID_98478E86_0753_4C4D_A2EB_7DC84675B2DC_GUID_E671F554_89D2_4CAD_B032_525E1CE90C18 from "../../snippets/GUID-98478E86-0753-4C4D-A2EB-7DC84675B2DC/_GUID-E671F554-89D2-4CAD-B032-525E1CE90C18";

![Summarize Within](../../images/GUID-9B12DB3F-AA7B-41EB-87C6-D2DEC3D52DA9-web.png)

The Summarize Within task finds the point, line, or polygon features (or portions of these features) that are within the boundaries of polygons in another layer. 

For example:

-   Given a layer of watershed boundaries and a layer of land-use boundaries by land-use type, calculate total acreage of land-use type for each watershed.
-   Given a layer of parcels in a county and a layer of city boundaries, summarize the average value of vacant parcels within each city boundary.
-   Given a layer of counties and a layer of roads, summarize the total mileage of roads by road type within each county.

You can think of Summarize Within as taking two layers and stacking them on top of each other. One of the layers, the `sumWithinLayer`, must be a polygon layer, and imagine that these polygon boundaries are all colored red. The other layer, the `summaryLayer`, can be any feature type—point, line, or polygon. After stacking these layers on top of each other, you peer down through the stack and count the number of features in the `summaryLayer` that fall within the polygons with the red boundaries (the `sumWithinLayer`). Not only can you count the number of features, you can also calculate simple statistics about the attributes of the features in the `summaryLayer`, such as sum, mean, minimum, maximum, and so on.

## Request URL

```javascript
http://<analysis url>/SummarizeWithin/submitJob
```

## Request parameters
<StyledTable headers={"Parameter,Description"}>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `sumWithinLayer`
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         The polygon features. Features, or portions of features, in the `summaryLayer` (below) that fall within the boundaries of these polygons will be summarized.

         <GUID_98478E86_0753_4C4D_A2EB_7DC84675B2DC_GUID_E0E9FDE9_9A98_4EA4_9164_0E878BADF591 />

         <GUID_98478E86_0753_4C4D_A2EB_7DC84675B2DC_GUID_D95DEC58_7F27_491A_AF3D_6E6A3C0A6F2D />
      </StyledTableCell>
   </StyledTableRow>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `summaryLayer`
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         Point, line, or polygon features that will be summarized for each polygon in the `sumWithinLayer`.

         <GUID_98478E86_0753_4C4D_A2EB_7DC84675B2DC_GUID_E0E9FDE9_9A98_4EA4_9164_0E878BADF591 />

         <GUID_98478E86_0753_4C4D_A2EB_7DC84675B2DC_GUID_D95DEC58_7F27_491A_AF3D_6E6A3C0A6F2D />
      </StyledTableCell>
   </StyledTableRow>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `sumShape`
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         A boolean value that instructs the task to calculate statistics based on shape type of the `summaryLayer`, such as the count of points, the total length of lines, or the total area of polygons of the `summaryLayer` within each polygon in the `sumWithinLayer`. If the `summaryLayer` is lines or polygons, the count of features within each summary polygon is returned.

         Values: `true` \| `false`

         <GUID_98478E86_0753_4C4D_A2EB_7DC84675B2DC_GUID_E1EF792A_E9AD_4B1E_AE8D_248E4B37435A />
      </StyledTableCell>
   </StyledTableRow>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `shapeUnits`
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         Values:
         -   When `summaryLayer` contains polygons: `Acres` \| `Hectares` \| `SquareMeters` \| `SquareKilometers` \| `SquareMiles` \| `SquareYards` \| `SquareFeet`
         -   When `summaryLayer` contains lines: `Meters` \| `Kilometers` \| `Feet` \| `Yards` \| `Miles`

         Example:
         `"shapeUnits": "Hectares"`
      </StyledTableCell>
   </StyledTableRow>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `summaryFields`

         (Required if `sumShape` is `false`)
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         A list of field names and statistical summary types that you want to calculate for all features in the `summaryLayer` that are within each polygon in the `sumWithinLayer`.

         Syntax: `["fieldName summaryType","fieldName summaryType", ...]`

         `fieldName` is one of the numeric or date fields from the `summaryLayer` parameter.

         `summaryType` is one of the following:
         -   `Sum`—Adds the total value of all the features in each polygon. This statistic type is not supported for date fields.
         -   `Mean`—Calculates the average of all the features in each polygon. This statistic type is not supported for date fields.
         -   `Min`—Finds the smallest value of all the features in each polygon. This statistic type is supported for date fields.
         -   `Max`—Finds the largest value of all the features in each polygon. This statistic type is supported for date fields.
         -   `Stddev`—Finds the standard deviation of all the features in each polygon. This statistic type is not supported for date fields.

         Example:
         `"summaryFields": ["Annual_Sales Sum", "Annual_Sales Mean"]`

         <GUID_98478E86_0753_4C4D_A2EB_7DC84675B2DC_GUID_5358FACD_95DC_41C9_AEF9_47FE2E7DD7E1 />
      </StyledTableCell>
   </StyledTableRow>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `groupByField`
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         This is a field of the `summaryLayer` features that you can use to calculate statistics separately for each unique attribute value. For example, suppose the `sumWithinLayer` contains city boundaries and the `summaryLayer` features are parcels. One of the fields of the parcels is `Status`, which contains two values: VACANT and OCCUPIED. To calculate the total area of vacant and occupied parcels within the boundaries of cities, use `Status` as the `groupByField` field.

         Example:
         `"groupByField": "Status"`

         <GUID_98478E86_0753_4C4D_A2EB_7DC84675B2DC_GUID_EBB8515E_527A_4013_A6EA_AA8EBF549CCF />
      </StyledTableCell>
   </StyledTableRow>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `minorityMajority`
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         This Boolean parameter is applicable only when a `groupByField` is specified. If `true`, the minority (least dominant) or the majority (most dominant) attribute values for each group field are calculated. Two new fields are added to the `resultLayer` prefixed with `Majority_` and `Minority_`.

         The default is `false`.

         Values: `true` \| `false`
      </StyledTableCell>
   </StyledTableRow>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `percentShape`
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         This Boolean parameter is applicable only when a `groupByField` is specified. If set to `true`, the percentage of each unique `groupByField` value is calculated for each `sumWithinLayer` polygon. The default is `false`.

         Values: `true` \| `false`
      </StyledTableCell>
   </StyledTableRow>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `outputName`
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         <GUID_98478E86_0753_4C4D_A2EB_7DC84675B2DC_GUID_E836F966_C272_43B1_9BF9_55BA03755A13 />
      </StyledTableCell>
   </StyledTableRow>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `context`
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         <GUID_98478E86_0753_4C4D_A2EB_7DC84675B2DC_GUID_E671F554_89D2_4CAD_B032_525E1CE90C18 />
      </StyledTableCell>
   </StyledTableRow>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `binType`
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         The type of bin that will be generated. These bins will summarize the features, or portions of features, in the `summaryLayer` that fall within the boundaries of each generated bin. Bin options are the following:
         -   `Hexagon`
         -   `Square`—This is the default.

         Example: `"binType" : "Hexagon"`

         When generating bins, for `Square`, the number and units specified determine the height and width of the square. For `Hexagon`, the number and units specified determine the distance between parallel sides.

         Either `binType` or `polygonLayer` must be specified. If `binType` is chosen, the `binSize` and `binSizeUnit` specifying the size of the bins must be included.
      </StyledTableCell>
   </StyledTableRow>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `binSize`

         (Required if `binType` is used)
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         The distance for the bins of type `binType` that the `SummaryLayer` will be summarized into.

         Example: `"binSize" : 100`
      </StyledTableCell>
   </StyledTableRow>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `binSizeUnit`

         (Required if `binType` is used)
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         The linear distance unit for the bins that `summaryLayer` will be summarized into.

         Values: `Meters` \| `Kilometers` \| `Feet` \| `Miles` \| `NauticalMiles` \| `Yards`

         The default is `Meters`.

         Example: `"binSizeUnit" : "Miles"`
      </StyledTableCell>
   </StyledTableRow>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `f`
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         The response format. The default response format is `html`.

         Values: `html` \| `json`
      </StyledTableCell>
   </StyledTableRow>
</StyledTable>
## Response
When you submit a request, the service assigns a unique job ID for the transaction. Syntax:
```javascript
{
"jobId": "<unique job identifier>",
"jobStatus": "<job status>"
}
```
After the initial request is submitted, you can use the `jobId` to periodically check the status of the job and messages as described in [Check job status](/checking-job-status-1). Once the job has successfully completed, you use the `jobId` to retrieve the results. To track the status, you can make a request of the following form:
```javascript
http://<analysis url>/SummarizeWithin/jobs/<jobId>
```
## Accessing results
When the status of the job request is `esriJobSucceeded`, you can access the results of the analysis by making a request of the following form:
```javascript
http://<analysis url>/SummarizeWithin/jobs/<jobId>/results/<output parameter name>?token=<your token>&f=json
```
<StyledTable headers={"Parameter,Description"}>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `resultLayer`
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         These are the polygon features of the `sumWithinLayer` with summary statistics about the features in the `summaryLayer` that fall within each polygon.

         Example:
         ```javascript
         {"url":"http://<analysis url>/SummarizeWithin/jobs/<jobId>/results/resultLayer"}
         ```
         The result has properties for parameter name, data type, and value. The contents of `value` depend on the `outputName` parameter provided in the initial request.
         -   If `outputName` was provided, `value` contains the URL to the feature service layer.
         ```javascript
         {
        "paramName":"resultLayer",
        "dataType":"GPString",
        "value":{"url":"<hosted featureservice layer url>"}
        }
         ```
         -   If `outputName` was not provided, `value` contains a feature collection.
         ```javascript
         {
         "paramName":"resultLayer",
         "dataType":"GPString",
         "value":{"layerDefinition": {}, "featureSet": {}}
         }
         ```
         See [Feature Output](/feature-output-1) for more information about how the result layer or collection is accessed.
      </StyledTableCell>
   </StyledTableRow>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `groupBySummary`
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         If a `groupByField` field was provided as input, the result will have a `groupBySummary` table that contains the calculated statistics for each unique group. Tables are a subset of features; that is, they contain attributes but no geometry.

         Example:
         ```javascript
         {"url":"http://<analysis url>/SummarizeWithin/jobs/<jobId>/results/groupBySummary"}

         ```
         The result has properties for parameter name, data type, and value. The contents of `value` depend on the `outputName` parameter provided in the initial request.
         -   If `outputName` was provided, `value` contains the URL to the feature service layer.
         ```javascript
         {
        "paramName":"groupBySummary",
        "dataType":"GPString",
        "value":{"url":"<hosted featureservice layer url>"}
        }
         ```
         -   If `outputName` was not provided, `value` contains a feature collection.
         ```javascript
         {
         "paramName":"groupBySummary",
         "dataType":"GPString",
         "value":{"layerDefinition": {}, "featureSet": {} }
         }
         ```
      </StyledTableCell>
   </StyledTableRow>
</StyledTable>
