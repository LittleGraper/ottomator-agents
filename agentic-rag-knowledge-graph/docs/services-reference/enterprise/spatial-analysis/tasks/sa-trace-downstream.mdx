---
title: "Trace Downstream"
description: "API reference for the Trace Downstream task available on ArcGIS Online."
slug: "sa-trace-downstream"
url: "/spatial-analysis/tasks/sa-trace-downstream"
redirectFrom:
  - /sa-trace-downstream
guid: "GUID-E22F16F0-7314-4919-AB83-605947EA4429"
migratedTopicMetadata:
  FTITLE: "SA trace-downstream"
  FDESCRIPTION: ""
  FCHANGES: "conref context param"
  FISHRELEASELABEL: ""
  FESRISOFTWARERELEASE: ""
  FESRITAGCLOUD: ""
  FESRIRECREATIONPROCEDURE: ""
  FESRIPRODUCTLIFECYCLE: "agol10.1 - *: 11.0-*"
  CREATED-ON: "28/02/2022 16:11:18"
  FAUTHOR: "sambrose"
  FSTATUS: "Released"
  MODIFIED-ON: "07/03/2022 09:32:18"
  VERSION: "5"
  FRESOLUTION: ""
  DOC-LANGUAGE: "en"
  FISHREVCOUNTER: "2"
  ED: "GUID-0B322349-BDC4-499A-A353-87A52E0E2D76"
  FUSERGROUP: "VUSERGROUPARCGISONLINEDOC"
  READ-ACCESS: ""
restInfoMetadata: {}
---

import GUID_98478E86_0753_4C4D_A2EB_7DC84675B2DC_GUID_E0E9FDE9_9A98_4EA4_9164_0E878BADF591 from "../../snippets/GUID-98478E86-0753-4C4D-A2EB-7DC84675B2DC/_GUID-E0E9FDE9-9A98-4EA4-9164-0E878BADF591";
import GUID_98478E86_0753_4C4D_A2EB_7DC84675B2DC_GUID_D95DEC58_7F27_491A_AF3D_6E6A3C0A6F2D from "../../snippets/GUID-98478E86-0753-4C4D-A2EB-7DC84675B2DC/_GUID-D95DEC58-7F27-491A-AF3D-6E6A3C0A6F2D";
import GUID_98478E86_0753_4C4D_A2EB_7DC84675B2DC_GUID_E836F966_C272_43B1_9BF9_55BA03755A13 from "../../snippets/GUID-98478E86-0753-4C4D-A2EB-7DC84675B2DC/_GUID-E836F966-C272-43B1-9BF9-55BA03755A13";
import GUID_98478E86_0753_4C4D_A2EB_7DC84675B2DC_GUID_E671F554_89D2_4CAD_B032_525E1CE90C18 from "../../snippets/GUID-98478E86-0753-4C4D-A2EB-7DC84675B2DC/_GUID-E671F554-89D2-4CAD-B032-525E1CE90C18";
import GUID_67BBDC51_6E6A_4390_A6A8_411955E2C7F7_GUID_D4574F98_5D00_467C_BE89_524529F67768 from "../../snippets/GUID-67BBDC51-6E6A-4390-A6A8-411955E2C7F7/_GUID-D4574F98-5D00-467C-BE89-524529F67768";
import GUID_67BBDC51_6E6A_4390_A6A8_411955E2C7F7_GUID_7481CF75_D411_4A63_BA85_01E8F0C58F67 from "../../snippets/GUID-67BBDC51-6E6A-4390-A6A8-411955E2C7F7/_GUID-7481CF75-D411-4A63-BA85-01E8F0C58F67";
import GUID_67BBDC51_6E6A_4390_A6A8_411955E2C7F7_GUID_03071520_C169_41C0_8E51_866D82061408 from "../../snippets/GUID-67BBDC51-6E6A-4390-A6A8-411955E2C7F7/_GUID-03071520-C169-41C0-8E51-866D82061408";

![Trace Downstream](../../images/GUID-1700E318-5F2D-4D4D-BF21-B12663F5D3C4-web.png)

The Trace Downstream task determines the trace, or flow path, in a downstream direction from the points in your analysis layer.

For example, suppose you have point features representing sources of contamination and you want to determine where in your study area the contamination will flow. You can use Trace Downstream to identify the path the contamination will take. This trace can also be divided into individual line segments by specifying a distance value and units. The line being returned can be the total length of the flow path, a specified maximum trace length, or clipped to area features such as your study area. In many cases, if the total length of the trace path is returned, it will be from the source all the way to the ocean.

## Request URL

```javascript
http://<analysis url>/TraceDownstream/submitJob
```

## Request Parameters
<StyledTable headers={"Parameter,Description"}>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `inputLayer`

         (Required)
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         The point features used for the starting location of a downstream trace.

         <GUID_98478E86_0753_4C4D_A2EB_7DC84675B2DC_GUID_E0E9FDE9_9A98_4EA4_9164_0E878BADF591 />

         <GUID_98478E86_0753_4C4D_A2EB_7DC84675B2DC_GUID_D95DEC58_7F27_491A_AF3D_6E6A3C0A6F2D />
      </StyledTableCell>
   </StyledTableRow>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `splitDistance`
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         The trace line will be split into multiple lines where each line is of the specified length. The resulting trace will have multiple line segments, each with fields `FromDistance` and `ToDistance`.
         Type: Double
      </StyledTableCell>
   </StyledTableRow>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `splitUnits`
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         The units used to specify split distance.
         Type: String
         -   Values: `Meters` \| `Kilometers` \| `Feet` \| `Yards` \| `Miles`
         -   Default: `Kilometers`
      </StyledTableCell>
   </StyledTableRow>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `maxDistance`
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         Determines the total length of the line that will be returned. If you provide a `boundingPolygonLayer` to clip the trace, the result will be clipped to the features in `boundingPolygonLayer`, regardless of the distance you enter here.
         Type: Double
      </StyledTableCell>
   </StyledTableRow>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `maxDistanceUnits`
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         The units used to specify maximum distance.
         Type: String
         -   Values: `Meters` \| `Kilometers` \| `Feet` \| `Yards` \| `Miles`
         -   Default: `Kilometers`
      </StyledTableCell>
   </StyledTableRow>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `boundingPolygonLayer`
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         A polygon layer specifying the area(s) where you want the trace downstreams to be calculated in. For example, if you only want to calculate the trace downstream with in a county polygon, provide a layer containing the county polygon and the resulting trace lines will be clipped to the county boundary.

         <GUID_98478E86_0753_4C4D_A2EB_7DC84675B2DC_GUID_E0E9FDE9_9A98_4EA4_9164_0E878BADF591 />
      </StyledTableCell>
   </StyledTableRow>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `sourceDatabase`
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         Keyword indicating the data source resolution that will be used in the analysis.
         Type: String
         -   Values: The values for this parameter are:
         -   `Finest` (Default): Finest resolution available at each location from all possible data sources.
         -   `30m`: The hydrologic source was built from 1 arc second - approximately 30 meter resolution, elevation data.
         -   `90m`: The hydrologic source was built from 3 arc second - approximately 90 meter resolution, elevation data.
      </StyledTableCell>
   </StyledTableRow>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `generalize`
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         Determines if the output trace downstream lines will be smoothed into simpler lines or conform to the cell edges of the original DEM.
         Type: Boolean
         -   Values:
         -   `True`: The polygons will be smoothed into simpler shapes. This is the default.
         -   `False`: The edge of the polygons will conform to the edges of the original DEM.
      </StyledTableCell>
   </StyledTableRow>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `outputName`
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         <GUID_98478E86_0753_4C4D_A2EB_7DC84675B2DC_GUID_E836F966_C272_43B1_9BF9_55BA03755A13 />
      </StyledTableCell>
   </StyledTableRow>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `context`
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         <GUID_98478E86_0753_4C4D_A2EB_7DC84675B2DC_GUID_E671F554_89D2_4CAD_B032_525E1CE90C18 />
      </StyledTableCell>
   </StyledTableRow>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `f`
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         The response format. The default response format is `html`.

         Values: `html` \| `json`
      </StyledTableCell>
   </StyledTableRow>
</StyledTable>

## Response
<GUID_67BBDC51_6E6A_4390_A6A8_411955E2C7F7_GUID_D4574F98_5D00_467C_BE89_524529F67768 />

<GUID_67BBDC51_6E6A_4390_A6A8_411955E2C7F7_GUID_7481CF75_D411_4A63_BA85_01E8F0C58F67 />
After the initial request is submitted you can use the `jobId` to periodically check the status of the job and messages as described in the topic [Check job status](/checking-job-status-1). Once the job has successfully completed, use the `jobId` to retrieve the results. To track the status, you can make a request of the following form:
```javascript
http://<analysis url>/TraceDownstream/jobs/<jobId>
```
## Accessing results
<GUID_67BBDC51_6E6A_4390_A6A8_411955E2C7F7_GUID_03071520_C169_41C0_8E51_866D82061408 />
```javascript
http://<analysis url>/TraceDownstream/jobs/<jobId>/results/traceLayer?token=yourToken&f=json
```
<StyledTable headers={"Parameter,Description"}>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `traceLayer`

      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         These are line features which are the trace lines, or trace line segments, from the input points.

         The resultant line features have the attributes from the input points as well the following attributes:
         -   `PourPtID`—The unique ID field from the input points feature
         -   `Description`— Describes the source database used in the analysis. US30m-which is derived from the 30m NHDPlusV2.1 for the continental United States, and the 90m HydroSHEDS for the world between 60 degrees North and 56 degrees South, plus some areas in Canada and Alaska north of 60 degrees.
         -   `DataResolution`— The data-source resolution that was be used in the analysis
         -   `AnalysisLength`—The length of the line in the units specified in your analysis. If units are not specified on the tool then the units in your [profile](https://enterprise.arcgis.com/en/portal/latest/use/profile.htm), which will either be miles or kilometers are used.

         If line segments are calculated there will be three additional attributes:
         -   `FromDistance`— Is how far down the trace each trace segment starts. The first from distance for each trace is always zero because the first trace segment starts at the origin of the trace.
         -   `ToDistance`— Is how far down the trace each trace segment stops. The last segment in a trace will have a to distance the equals the total distance.
         -   `TotalDistance`— Is the total distance of a trace. If max distance is specified then this will be the total distance.

         Request example:
         ```javascript
         {"url":"http://<analysis url>/TraceDownstream/jobs/<jobId>/results/traceLayer"}
         ```
         The result has properties for parameter name, data type, and value. The contents of value depend on the `outputName` parameter provided in the initial request.
         -   If `outputName` was provided, `value` contains the URL to the feature service layer.
         ```javascript
         {
          "paramName":"traceLayer",
          "dataType":"GPString",
          "value":{"url":"<hosted featureservice layer url>"}
        }
         ```
         -   If `outputName` was not provided, `value` contains a feature collection.
         ```javascript
         {
         "paramName":"traceLayer",
         "dataType":"GPString",
         "value":{"layerDefinition": {}, "featureSet": {}  }
         }
         ```
         See [Feature Output](/feature-output-1) for more information about how the result layer or collection is accessed.
      </StyledTableCell>
   </StyledTableRow>
</StyledTable>