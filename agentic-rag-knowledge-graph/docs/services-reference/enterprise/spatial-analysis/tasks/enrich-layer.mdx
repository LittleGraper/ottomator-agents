---
title: "Enrich Layer"
description: "API reference for the Enrich Layer service available on ArcGIS Online"
slug: "enrich-layer"
url: "/spatial-analysis/tasks/enrich-layer"
redirectFrom:
  - /enrich-layer
guid: "GUID-01333B06-96E2-4073-A570-A6A58E6288A9"
migratedTopicMetadata:
  FTITLE: "Enrich Layer"
  FDESCRIPTION: "REST API doc"
  FCHANGES: "Add Overwrite capability + context control"
  FISHRELEASELABEL: ""
  FESRISOFTWARERELEASE: ""
  FESRITAGCLOUD: ""
  FESRIRECREATIONPROCEDURE: ""
  FESRIPRODUCTLIFECYCLE: "agol 10.1-*; 11.0-*"
  CREATED-ON: "29/11/2021 13:09:48"
  FAUTHOR: "aring"
  FSTATUS: "Released"
  MODIFIED-ON: "06/06/2022 14:19:56"
  VERSION: "9"
  FRESOLUTION: ""
  DOC-LANGUAGE: "en"
  FISHREVCOUNTER: "3"
  ED: "GUID-516496DF-380C-442F-99EA-4B94B3DD408E"
  FUSERGROUP: "VUSERGROUPARCGISONLINEDOC"
  READ-ACCESS: ""
restInfoMetadata: {}
---

import GUID_98478E86_0753_4C4D_A2EB_7DC84675B2DC_GUID_E0E9FDE9_9A98_4EA4_9164_0E878BADF591 from "../../snippets/GUID-98478E86-0753-4C4D-A2EB-7DC84675B2DC/_GUID-E0E9FDE9-9A98-4EA4-9164-0E878BADF591";
import GUID_98478E86_0753_4C4D_A2EB_7DC84675B2DC_GUID_D95DEC58_7F27_491A_AF3D_6E6A3C0A6F2D from "../../snippets/GUID-98478E86-0753-4C4D-A2EB-7DC84675B2DC/_GUID-D95DEC58-7F27-491A-AF3D-6E6A3C0A6F2D";
import GUID_98478E86_0753_4C4D_A2EB_7DC84675B2DC_GUID_0C6E3320_938F_4F1F_9A55_1B8A224CE73F from "../../snippets/GUID-98478E86-0753-4C4D-A2EB-7DC84675B2DC/_GUID-0C6E3320-938F-4F1F-9A55-1B8A224CE73F";
import GUID_98478E86_0753_4C4D_A2EB_7DC84675B2DC_GUID_05C8D533_3215_4665_8119_E88188B710EC from "../../snippets/GUID-98478E86-0753-4C4D-A2EB-7DC84675B2DC/_GUID-05C8D533-3215-4665-8119-E88188B710EC";
import GUID_98478E86_0753_4C4D_A2EB_7DC84675B2DC_GUID_FE13A986_9033_452E_83AF_7FD8B1350C56 from "../../snippets/GUID-98478E86-0753-4C4D-A2EB-7DC84675B2DC/_GUID-FE13A986-9033-452E-83AF-7FD8B1350C56";
import GUID_98478E86_0753_4C4D_A2EB_7DC84675B2DC_GUID_33258BFF_24E9_48DC_AC9B_DB0AAD9D0868 from "../../snippets/GUID-98478E86-0753-4C4D-A2EB-7DC84675B2DC/_GUID-33258BFF-24E9-48DC-AC9B-DB0AAD9D0868";
import GUID_98478E86_0753_4C4D_A2EB_7DC84675B2DC_GUID_30F3F406_9E06_4BE5_ABF8_AC3AC7C14E1C from "../../snippets/GUID-98478E86-0753-4C4D-A2EB-7DC84675B2DC/_GUID-30F3F406-9E06-4BE5-ABF8-AC3AC7C14E1C";

![Enrich Layer](../../images/GUID-5B2D9742-AFD2-4054-8D05-ED6A80EDAF4D-web.png)

The Enrich Layer task enriches your data by getting facts about the people, places, and businesses that surround your data locations. 

For example: What kind of people live here? What do people like to do in this area? What are their habits and lifestyles? What kind of businesses are there in this area?

The result will be a new layer containing all demographic and geographic information from given data collections. This new information is added as fields in the table.

## Licensing

As described in the [Get Started](http://developers.arcgis.com/rest/analysis/api-reference/getting-started.htm) topic, in order to use any analysis task, the administrator of the organization needs to grant you certain basic privileges. To use the **Enrich Layer** task, you need to be granted the **GeoEnrichment** privilege. In addition, to enrich features based on one of the available travel modes, you need to be granted the **Network Analysis** privilege.

## Request URL

```javascript
http://<analysis url>/EnrichLayer/submitJob
```

## Limits

There are limits to number of features and distance when `bufferType` is set to a travel mode other than `"StraightLine"`. 

-   `inputLayer`—Maximum 1,000 features
-   `distance`—Maximum 300 minutes or 482.80 kilometers (300 miles)

## Request Parameters
<StyledTable headers={"Parameter,Description"}>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `inputLayer`
         (Required)
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         The features to enrich with new data.

         <GUID_98478E86_0753_4C4D_A2EB_7DC84675B2DC_GUID_E0E9FDE9_9A98_4EA4_9164_0E878BADF591 />

         <GUID_98478E86_0753_4C4D_A2EB_7DC84675B2DC_GUID_D95DEC58_7F27_491A_AF3D_6E6A3C0A6F2D />
      </StyledTableCell>
   </StyledTableRow>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `dataCollections`
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         This optional parameter defines the collections of data you want to use to enrich your features. Its value is a list of strings. If you don't provide this parameter, you must provide the `analysisVariables` parameter.

         For more information about data collections and the values for this parameter, visit the [Esri Demographics site](http://doc.arcgis.com/en/esri-demographics/data/data.htm).

         Example:
         `"dataCollections": ["KeyGlobalFacts", "KeyUSFacts"]`
      </StyledTableCell>
   </StyledTableRow>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `analysisVariables`
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         The parameter defines the specific variables within a data collection you want to use to enrich your features. Its value is a list of strings in the form of "dataCollection.VariableName". If you don't provide this parameter, you must provide the `dataCollections` parameter. You can provide both parameters. For example, if you want all variables in the KeyGlobalFacts data collection, specify it in the `dataCollections` parameter and use this parameter for specific variables in other collections.

         Example:
         "analysisVariables": ["KeyGlobalFacts.AVGHHSIZE", "KeyUSFacts.TOTPOP10", "KeyUSFacts.HINC100_CY_P"]`

         For more information about variables in data collections, visit the [Esri Demographics site](http://doc.arcgis.com/en/esri-demographics/data/data.htm). Each data collection has a PDF file describing variables and their names.
      </StyledTableCell>
   </StyledTableRow>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `country`
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         This optional parameter further defines what is returned from data collection. For example, your input features may be countries in Western Europe, and you want to enrich them with the `KeyWEFacts` data collection. However, you only want data for France, not every country in your input layer. The value is the two-character country code.

         Example:
         `"country": "FR"`

         For more information about data collections and the values for this parameter, visit the [Esri Demographics site](http://doc.arcgis.com/en/esri-demographics/data/data.htm).
      </StyledTableCell>
   </StyledTableRow>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `bufferType`
         (Required if `inputLayer` contains point or line features)
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         If your input features are points or lines, you must define an area around your features that you want to enrich. Features that are within (or equal to) the distances you enter will be enriched. You can specify either straight-line distance or a travel mode.

         <GUID_98478E86_0753_4C4D_A2EB_7DC84675B2DC_GUID_0C6E3320_938F_4F1F_9A55_1B8A224CE73F />

         <GUID_98478E86_0753_4C4D_A2EB_7DC84675B2DC_GUID_05C8D533_3215_4665_8119_E88188B710EC />

         When using a travel mode for the `bufferType` parameter, use a JSON object representing travel mode settings for the value. When you use the `GetTravelModes` operation from the Utilities service, the result is a string representing the travel mode JSON object. You must convert this string to a valid JSON object using the API and pass the JSON object as the value for the `bufferType` parameter.

         <GUID_98478E86_0753_4C4D_A2EB_7DC84675B2DC_GUID_FE13A986_9033_452E_83AF_7FD8B1350C56 />

         <GUID_98478E86_0753_4C4D_A2EB_7DC84675B2DC_GUID_33258BFF_24E9_48DC_AC9B_DB0AAD9D0868 />

         Convert the value above to a valid JSON object and pass it as the value for the `bufferType` parameter.

         `bufferType=`
         ```javascript
         {
          "attributeParameterValues": [
            {
              "parameterName": "Restriction Usage",
              "attributeName": "Walking",
              "value": "PROHIBITED"
            },
            {
              "parameterName": "Restriction Usage",
              "attributeName": "Preferred for Pedestrians",
              "value": "PREFER_LOW"
            },
            {
              "parameterName": "Walking Speed (km\/h)",
              "attributeName": "WalkTime",
              "value": 5
            }
          ],
          "description": "Follows paths and roads that allow pedestrian traffic and finds solutions that optimize travel time. The walking speed is set to 5 kilometers per hour.",
          "impedanceAttributeName": "WalkTime",
          "simplificationToleranceUnits": "esriMeters",
          "uturnAtJunctions": "esriNFSBAllowBacktrack",
          "restrictionAttributeNames": [
            "Preferred for Pedestrians",
            "Walking"
          ],
          "useHierarchy": false,
          "simplificationTolerance": 2,
          "timeAttributeName": "WalkTime",
          "distanceAttributeName": "Miles",
          "type": "WALK",
          "id": "caFAgoThrvUpkFBW",
          "name": "Walking Time"
        }
         ```
         Example:
         `"bufferType": "StraightLine"`
      </StyledTableCell>
   </StyledTableRow>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `distance`
         (Required if `inputLayer` contains point or line features)
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         A double value that defines the search distance or time. The units of the distance value is supplied by the units parameter.

         Example:
         `"distance": 4.0`
      </StyledTableCell>
   </StyledTableRow>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `units`
         (Required if distance parameter used)
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         The linear unit to be used with the distance value(s) specified in the distance parameter.

         If `bufferType` is `StraightLine` or a distance based travel mode, the following values can be used as units: `Meters` \| `Kilometers` \| `Feet` \| `Yards` \| `Miles`

         If `bufferType` is a time based travel mode, the following values can be used as units: `Seconds` \| `Minutes` \| `Hours`

         Example:
         `"units": "Miles"`
      </StyledTableCell>
   </StyledTableRow>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `returnBoundaries`
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         Applies only for point and line input features. If `True`, a result layer of areas is returned. The returned areas are defined by the specified `bufferType`. For example, if using a `bufferType` of `StraightLine` with a `distance` of 5 miles, your result will contain areas with a 5 mile radius around the input features and requested `analysisVariables` variables. If `False`, the resulting layer will return the same features as the input layer with `analysisVariables` variables.

         The default is `False`

         Values: `True` \| `False`
      </StyledTableCell>
   </StyledTableRow>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `outputName`
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         <GUID_98478E86_0753_4C4D_A2EB_7DC84675B2DC_GUID_30F3F406_9E06_4BE5_ABF8_AC3AC7C14E1C />
      </StyledTableCell>
   </StyledTableRow>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `context`
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         [Context](../../reference/spatial-reference) contains additional settings that affect task execution. For Enrich Layers, there are two settings.
         1.  [Extent](../../reference/spatial-reference#extent) (`extent`)—a bounding box that defines the analysis area. Only those features in the input layer that intersect the bounding box will be enriched.
         2.  [Output Spatial Reference](../../reference/spatial-reference#output-spatial-reference) (`outSR`)—the output features will be projected into the output spatial reference.
         Syntax:
         ```javascript
         {
         "extent" : {extent}
         "outSR" : {spatial reference}
         }
         ```
      </StyledTableCell>
   </StyledTableRow>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `f`
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         The response format. The default response format is `html`.

         Values: `html` \| `json`
      </StyledTableCell>
   </StyledTableRow>
</StyledTable>
## Response
When you submit a request, the service assigns a unique job ID for the transaction.
Syntax:
```javascript
{
"jobId": "<unique job identifier>",
"jobStatus": "<job status>"
}
```
After the initial request is submitted you can use the jobId to periodically check the status of the job and messages as described in the topic [Check job status](/checking-job-status-1). Once the job has successfully completed, you use the jobId to retrieve the results. To track the status, you can make a request of the following form:
```javascript
http://<analysis url>/EnrichLayer/jobs/<jobId>
```
## Accessing results
When the status of the job request is `esriJobSucceeded`, you can access the results of the analysis by making a request of the following form.
```javascript
http://<analysis url>/EnrichLayer/jobs/<jobId>/results/enrichedLayer?token=<your token>&f=json
```
<StyledTable headers={"Parameter,Description"}>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `enrichedLayer`
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         If the `inputLayer` contained polygons, enrichedLayer will be the input polygons with new fields added from the data collection. If the `inputLayer` was points or lines, the output will be the input points or lines with fields added from the data collection. Note, however, that the field values returned are for the buffered area defined by the `bufferType` and `distance` parameters.

         Example:
         ```javascript
         {"url":"http://<analysis url>/EnrichLayer/jobs/<jobId>/results/enrichedLayer"}
         ```
         The result has properties for parameter name, data type, and value. The contents of value depends upon the `outputName` parameter provided in the initial request.
         -   If `outputName` was provided, value contains the url to the feature service layer.
         ```javascript
         {
         "paramName":"enrichedLayer",
         "dataType":"GPString",
         "value":{"url":"<hosted featureservice layer url>"}
         }
         ```
         -   If `outputName` was not provided, value contains a feature collection.
         ```javascript
         {
         "paramName":"enrichedLayer",
         "dataType":"GPString",
         "value":{"layerDefinition": {}, "featureSet": {} }
         }
         ```
         See [Feature Output ](/feature-output-1) for more information about how the result layer or collection is accessed.
      </StyledTableCell>
   </StyledTableRow>
</StyledTable>
