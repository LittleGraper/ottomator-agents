---
title: "Choose Best Facilities"
description: "API reference for the Choose Best Facilities service available on ArcGIS Online"
slug: "choose-best-facilities"
url: "/spatial-analysis/tasks/choose-best-facilities"
redirectFrom:
  - /choose-best-facilities
guid: "GUID-E5E84F88-79C7-4F51-8E21-064863A8C6EC"
migratedTopicMetadata:
  FTITLE: "Choose Best Facilities"
  FDESCRIPTION: ""
  FCHANGES: "conref context"
  FISHRELEASELABEL: ""
  FESRISOFTWARERELEASE: ""
  FESRITAGCLOUD: ""
  FESRIRECREATIONPROCEDURE: ""
  FESRIPRODUCTLIFECYCLE: "agol10.1-*:11.0-*"
  CREATED-ON: "28/02/2022 16:32:40"
  FAUTHOR: "sambrose"
  FSTATUS: "Released"
  MODIFIED-ON: "04/03/2022 09:04:13"
  VERSION: "5"
  FRESOLUTION: ""
  DOC-LANGUAGE: "en"
  FISHREVCOUNTER: "3"
  ED: "GUID-9D6E3C83-881A-44F8-BDD6-F0725D2ADC27"
  FUSERGROUP: "VUSERGROUPARCGISONLINEDOC"
  READ-ACCESS: ""
restInfoMetadata: {}
---

import GUID_98478E86_0753_4C4D_A2EB_7DC84675B2DC_LI_61DFBF99C00A48F8A83E3140DE0B4416 from "../../snippets/GUID-98478E86-0753-4C4D-A2EB-7DC84675B2DC/_LI_61DFBF99C00A48F8A83E3140DE0B4416";
import GUID_98478E86_0753_4C4D_A2EB_7DC84675B2DC_LI_E932AF25CC1A4D09A92E26458B145CF9 from "../../snippets/GUID-98478E86-0753-4C4D-A2EB-7DC84675B2DC/_LI_E932AF25CC1A4D09A92E26458B145CF9";
import GUID_98478E86_0753_4C4D_A2EB_7DC84675B2DC_LI_D2714C31891F4E04BA986D97218E38A2 from "../../snippets/GUID-98478E86-0753-4C4D-A2EB-7DC84675B2DC/_LI_D2714C31891F4E04BA986D97218E38A2";
import GUID_98478E86_0753_4C4D_A2EB_7DC84675B2DC_LI_01A32F6D3EBD4BF4A439521FD081562A from "../../snippets/GUID-98478E86-0753-4C4D-A2EB-7DC84675B2DC/_LI_01A32F6D3EBD4BF4A439521FD081562A";
import GUID_98478E86_0753_4C4D_A2EB_7DC84675B2DC_GUID_E0E9FDE9_9A98_4EA4_9164_0E878BADF591 from "../../snippets/GUID-98478E86-0753-4C4D-A2EB-7DC84675B2DC/_GUID-E0E9FDE9-9A98-4EA4-9164-0E878BADF591";
import GUID_98478E86_0753_4C4D_A2EB_7DC84675B2DC_GUID_D95DEC58_7F27_491A_AF3D_6E6A3C0A6F2D from "../../snippets/GUID-98478E86-0753-4C4D-A2EB-7DC84675B2DC/_GUID-D95DEC58-7F27-491A-AF3D-6E6A3C0A6F2D";
import GUID_98478E86_0753_4C4D_A2EB_7DC84675B2DC_GUID_05C8D533_3215_4665_8119_E88188B710EC from "../../snippets/GUID-98478E86-0753-4C4D-A2EB-7DC84675B2DC/_GUID-05C8D533-3215-4665-8119-E88188B710EC";
import GUID_98478E86_0753_4C4D_A2EB_7DC84675B2DC_GUID_B883476B_8A4E_409C_971C_2BC082BDF2AD from "../../snippets/GUID-98478E86-0753-4C4D-A2EB-7DC84675B2DC/_GUID-B883476B-8A4E-409C-971C-2BC082BDF2AD";
import GUID_98478E86_0753_4C4D_A2EB_7DC84675B2DC_GUID_FE13A986_9033_452E_83AF_7FD8B1350C56 from "../../snippets/GUID-98478E86-0753-4C4D-A2EB-7DC84675B2DC/_GUID-FE13A986-9033-452E-83AF-7FD8B1350C56";
import GUID_98478E86_0753_4C4D_A2EB_7DC84675B2DC_GUID_33258BFF_24E9_48DC_AC9B_DB0AAD9D0868 from "../../snippets/GUID-98478E86-0753-4C4D-A2EB-7DC84675B2DC/_GUID-33258BFF-24E9-48DC-AC9B-DB0AAD9D0868";
import GUID_98478E86_0753_4C4D_A2EB_7DC84675B2DC_GUID_0FDA7502_11D1_4ED0_8535_BC379FA78278 from "../../snippets/GUID-98478E86-0753-4C4D-A2EB-7DC84675B2DC/_GUID-0FDA7502-11D1-4ED0-8535-BC379FA78278";
import GUID_98478E86_0753_4C4D_A2EB_7DC84675B2DC_GUID_726693EE_0CBC_4072_82E2_6C34A91E5349 from "../../snippets/GUID-98478E86-0753-4C4D-A2EB-7DC84675B2DC/_GUID-726693EE-0CBC-4072-82E2-6C34A91E5349";
import GUID_98478E86_0753_4C4D_A2EB_7DC84675B2DC_GUID_E836F966_C272_43B1_9BF9_55BA03755A13 from "../../snippets/GUID-98478E86-0753-4C4D-A2EB-7DC84675B2DC/_GUID-E836F966-C272-43B1-9BF9-55BA03755A13";
import GUID_98478E86_0753_4C4D_A2EB_7DC84675B2DC_GUID_BCAD1BCB_EC1F_4FF5_BACA_1171DEB5013B from "../../snippets/GUID-98478E86-0753-4C4D-A2EB-7DC84675B2DC/_GUID-BCAD1BCB-EC1F-4FF5-BACA-1171DEB5013B";
import GUID_98478E86_0753_4C4D_A2EB_7DC84675B2DC_GUID_4EA0954B_62E1_4D16_B2C8_3A0CA487D187 from "../../snippets/GUID-98478E86-0753-4C4D-A2EB-7DC84675B2DC/_GUID-4EA0954B-62E1-4D16-B2C8-3A0CA487D187";
import GUID_98478E86_0753_4C4D_A2EB_7DC84675B2DC_GUID_D8788E05_2F9E_4C4B_BD85_2C3827D7F599 from "../../snippets/GUID-98478E86-0753-4C4D-A2EB-7DC84675B2DC/_GUID-D8788E05-2F9E-4C4B-BD85-2C3827D7F599";
import GUID_98478E86_0753_4C4D_A2EB_7DC84675B2DC_GUID_04884644_A8CD_424F_9E82_BFBC940E69F3 from "../../snippets/GUID-98478E86-0753-4C4D-A2EB-7DC84675B2DC/_GUID-04884644-A8CD-424F-9E82-BFBC940E69F3";
import GUID_98478E86_0753_4C4D_A2EB_7DC84675B2DC_GUID_17F01AF8_5FA9_49A8_8A33_09600EE7A0DA from "../../snippets/GUID-98478E86-0753-4C4D-A2EB-7DC84675B2DC/_GUID-17F01AF8-5FA9-49A8-8A33-09600EE7A0DA";
import GUID_98478E86_0753_4C4D_A2EB_7DC84675B2DC_GUID_0B76781C_FB26_4214_B7AA_EB7BCCEA3D55 from "../../snippets/GUID-98478E86-0753-4C4D-A2EB-7DC84675B2DC/_GUID-0B76781C-FB26-4214-B7AA-EB7BCCEA3D55";
import GUID_98478E86_0753_4C4D_A2EB_7DC84675B2DC_GUID_E671F554_89D2_4CAD_B032_525E1CE90C18 from "../../snippets/GUID-98478E86-0753-4C4D-A2EB-7DC84675B2DC/_GUID-E671F554-89D2-4CAD-B032-525E1CE90C18";

![Choose Best Facilities](../../images/GUID-E57BEC1A-C404-436B-B389-65711FF83088-web.png)

The Choose Best Facilities task finds the set of facilities that will best serve demand from surrounding areas.

Facilities might be public institutions that offer a service, such as fire stations, schools, or libraries, or they might be commercial ones such as drug stores or distribution centers for a parcel delivery service. Demand represents the need for a service that the facilities can meet. Demand is associated with point locations, with each location representing a given amount of demand.

## Licensing

As described in the [Get Started](http://developers.arcgis.com/rest/analysis/api-reference/getting-started.htm) topic, in order to use any analysis task, the administrator of the organization needs to grant you certain basic privileges. To use the **Choose Best Facilities** task, you need to be granted the **Network Analysis** privilege.

## Limits
-   `demandLocationsLayer`—Maximum 10,000 features.
-   `candidateFacilitiesLayer`—Maximum of 1,000.
-   `candidateCount`—Maximum 100 features. This means that the number of features in the `requiredFacilitiesLayer` cannot exceed 100 since all features in the `requiredFacilitiesLayer` are allocated before any features in the `candidateFacilitiesLayer`. For example, if there are 99 features in the `requiredFacilitiesLayer`, only one feature from the `candidateFacilitiesLayer` will be allocated.
-   <GUID_98478E86_0753_4C4D_A2EB_7DC84675B2DC_LI_61DFBF99C00A48F8A83E3140DE0B4416 />
-   <GUID_98478E86_0753_4C4D_A2EB_7DC84675B2DC_LI_E932AF25CC1A4D09A92E26458B145CF9 />
-   <GUID_98478E86_0753_4C4D_A2EB_7DC84675B2DC_LI_D2714C31891F4E04BA986D97218E38A2 />
-   <GUID_98478E86_0753_4C4D_A2EB_7DC84675B2DC_LI_01A32F6D3EBD4BF4A439521FD081562A />

## Request URL
```javascript
http://<analysis url>/ChooseBestFacilities/submitJob
```

## Request Parameters
For more information on using this task, see [Choose Best Facilities](https://doc.arcgis.com/en/arcgis-online/analyze/choose-best-facilities.htm) in the ArcGIS Online help. The table below shows the correspondence between the values for the `goal` parameter and the terms used in the Choose Best Facilities help topic.

<StyledTable headers={"ArcGIS Online,REST"}>
    <StyledTableRow>
        <StyledTableCell cellStyle="markdown">
         **Allocate to existing facilities**
        </StyledTableCell>
        <StyledTableCell cellStyle="markdown">
        `Allocate`
        </StyledTableCell>
    </StyledTableRow>
    <StyledTableRow>
        <StyledTableCell cellStyle="markdown">
        **Minimize travel**
        </StyledTableCell>
        <StyledTableCell cellStyle="markdown">
        `MinimizeImpedance`
        </StyledTableCell>
    </StyledTableRow>
    <StyledTableRow>
        <StyledTableCell cellStyle="markdown">
         **Maximize coverage**
         </StyledTableCell>
         <StyledTableCell cellStyle="markdown">
        `MaximizeCoverage`
        </StyledTableCell>
    </StyledTableRow>
    <StyledTableRow>
        <StyledTableCell cellStyle="markdown">
        **Maximize coverage with capacity**
        </StyledTableCell>
        <StyledTableCell cellStyle="markdown">
        `MaximizeCapacitatedCoverage`
        </StyledTableCell>
    </StyledTableRow>
    <StyledTableRow>
        <StyledTableCell cellStyle="markdown">
        **Cover a percentage of demand**
        </StyledTableCell>
        <StyledTableCell cellStyle="markdown">
        `PercentCoverage`
        </StyledTableCell>
    </StyledTableRow>
</StyledTable>

The table below shows the tool parameters.

<StyledTable headers={"Parameter,Description"}>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `goal`

         (Required)
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         The goal to satisfy when allocating demand locations to facilities. See the ArcGIS Online help topic [Choose Best Facilities](https://doc.arcgis.com/en/arcgis-online/analyze/choose-best-facilities.htm) and the correspondence table above. Default value is `Allocate`.

         Values: `Allocate` \| `MinimizeImpedance` \| `MaximizeCoverage` \| `MaximizeCapacitatedCoverage` \| `PercentCoverage`
      </StyledTableCell>
   </StyledTableRow>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `demandLocationsLayer`

         (Required)
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         A point layer specifying the locations that have demand for facilities.

         <GUID_98478E86_0753_4C4D_A2EB_7DC84675B2DC_GUID_E0E9FDE9_9A98_4EA4_9164_0E878BADF591 />

         <GUID_98478E86_0753_4C4D_A2EB_7DC84675B2DC_GUID_D95DEC58_7F27_491A_AF3D_6E6A3C0A6F2D />
      </StyledTableCell>
   </StyledTableRow>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `demand`
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         A double value representing amount of demand available at every demand location.

         The default value is 1.0.
      </StyledTableCell>
   </StyledTableRow>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `demandField`
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         A numeric field on the `demandLocationsLayer` representing the amount of demand available at each demand location. If specified, the `demand` parameter is ignored.
      </StyledTableCell>
   </StyledTableRow>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `maxTravelRange`
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         A double value representing the maximum travel time or distance allowed between a demand location and the facility it is allocated to. The default is unlimited (2,147,483,647.0)
      </StyledTableCell>
   </StyledTableRow>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `maxTravelRangeField`
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         A numeric field on the `demandLocationsLayer` containing the maximum travel time or distance allowed between a demand location and the facility it is allocated to. If specified, the `maxTravelRange` parameter is ignored.

         Example: `"maxTravelRangeField" : "NStudents"`
      </StyledTableCell>
   </StyledTableRow>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `maxTravelRangeUnits`
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         The units for the maximum travel time or distance allowed between a demand location and the facility it is allocated to. The default is `Minutes`.

         Values: `Seconds` \| `Minutes` \| `Hours` \| `Days` \| `Meters` \| `Kilometers` \| `Feet` \| `Yards` \| `Miles`

         Example: `"maxTravelRangeUnits" :  "Miles"`
      </StyledTableCell>
   </StyledTableRow>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `travelMode`
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         The mode of transportation for the analysis.

         <GUID_98478E86_0753_4C4D_A2EB_7DC84675B2DC_GUID_05C8D533_3215_4665_8119_E88188B710EC />

         <GUID_98478E86_0753_4C4D_A2EB_7DC84675B2DC_GUID_B883476B_8A4E_409C_971C_2BC082BDF2AD />

         <GUID_98478E86_0753_4C4D_A2EB_7DC84675B2DC_GUID_FE13A986_9033_452E_83AF_7FD8B1350C56 />

         <GUID_98478E86_0753_4C4D_A2EB_7DC84675B2DC_GUID_33258BFF_24E9_48DC_AC9B_DB0AAD9D0868 />

         <GUID_98478E86_0753_4C4D_A2EB_7DC84675B2DC_GUID_0FDA7502_11D1_4ED0_8535_BC379FA78278 />

         <GUID_98478E86_0753_4C4D_A2EB_7DC84675B2DC_GUID_726693EE_0CBC_4072_82E2_6C34A91E5349 />
      </StyledTableCell>
   </StyledTableRow>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `timeOfDay`
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         Specify whether travel times should consider traffic conditions. To use traffic in the analysis, To use traffic in the analysis, set `travelMode` to a travel mode object whose `impedanceAttributeName` property is set to `TravelTime` and assign a value to `timeOfDay`. (A travel mode with other `impedanceAttributeName` values don't support traffic.). The `timeOfDay` value represents the time at which travel begins, or departs, from the input points. The time is specified as Unix time (milliseconds since midnight, January 1 1970).

         The service supports two kinds of traffic: typical and live. Typical traffic references travel speeds that are made up of historical averages for each five-minute interval spanning a week. Live traffic retrieves speeds from a traffic feed that processes phone probe records, sensors, and other data sources to record actual travel speeds and predict speeds for the near future.

         The [Data Coverage page](http://links.esri.com/arcgis-online-data-coverage-map-for-directions-and-routes) shows the countries Esri currently provides traffic data for.

         _Typical Traffic_:

         To ensure the task uses typical traffic in locations where it is available, choose a time and day of the week, and then convert the day of the week to one of the following dates from 1990:
         -   Monday—1/1/1990
         -   Tuesday—1/2/1990
         -   Wednesday—1/3/1990
         -   Thursday—1/4/1990
         -   Friday—1/5/1990
         -   Saturday—1/6/1990
         -   Sunday—1/7/1990

         Set the time and date as Unix time in milliseconds.

         For example, to solve for 1:03 p.m. on Thursdays, set the time and date to 1:03 p.m., 4 January 1990; and convert to milliseconds (631458180000).

         <Note type={"note"}>
            Although the dates representing days of the week are from 1990, typical traffic is calculated from recent traffic trends—usually over the last several months.
         </Note>

         _Live Traffic_:

         To use live traffic when and where it is available, choose a time and date and convert to Unix time.

         Esri saves live traffic data for 4 hours and references predictive data extending 4 hours into the future. If the time and date you specify for this parameter is outside the 8-hour time window, or the travel time in the analysis continues past the predictive data window, the task falls back to typical traffic speeds.

         <Note type={"note"}>
            -   All points in `inputLayer` need to be in the same time zone when using traffic and setting `overlapPolicy` to `split` or `dissolve`.
            -   This parameter is ignored when `breakUnits` is set to distance unit.
            -   The time zone for `timeOfDay` can be UTC or the time zone or zones in which the points in `inputLayer` are located. Specify time zones with the `timeZoneForTimeOfDay` parameter.
         </Note>

         Syntax: The number of milliseconds since the Unix epoch (January 1, 1970).

         Examples:
         -   `"timeOfDay":631458180000` // 13:03, 4 January 1990. Typical traffic on Thursdays at 1:03 p.m.
         -   `"timeOfDay":  631731600000` // 17:00, 7 January 1990. Typical traffic on Sundays at 5:00 p.m.
         -   `"timeOfDay": 1413964800000` // 8:00, 22 October 2014. If the current time is between 8:00 p.m., 21 Oct. 2014 and 8:00 p.m., 22 Oct. 2014, live traffic speeds are referenced in the analysis; otherwise, typical traffic speeds are referenced.
         -   `"timeOfDay": 1426674000000` // 10:20, 18 March 2015. If the current time is between 10:20 p.m., 17 Mar. 2015 and 10:20 p.m., 18 Mar. 2015, live traffic speeds are referenced in the analysis; otherwise, typical traffic speeds are referenced.
      </StyledTableCell>
   </StyledTableRow>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `timeZoneForTimeOfDay`
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         Specify the time zone or zones of the `timeOfDay` parameter. There are two options: `GeoLocal` (default) and `UTC`.

         `GeoLocal`:

         The `timeOfDay` value refers to the time zone or zones in which the input points are located. This option causes the analysis to have rolling start times across time zones.

         GeoLocal Illustration: Setting `timeOfDay` to 9:00 a.m., 4 January 1990 (631443600000 milliseconds); `timeZoneForTimeOfDay` to `GeoLocal`; and submitting a valid request causes the drive times for points in the Eastern Time Zone to start at 9:00 a.m. Eastern Time and 9:00 a.m. Central Time for points in the Central Time Zone. (The start times are offset by an hour in real or UTC time.)

         ![](../../images/GUID-8EF026DC-A990-48C4-B8D6-04A72F3EB907-web.png)

         _Input_: `timeOfDay` is 9:00 a.m., 4 Jan. 1990 (631443600000 milliseconds), and `timeZoneForTimeOfDay` is set to `GeoLocal`_

         `UTC`:

         The `timeOfDay` value refers to Coordinated Universal Time (UTC). The start times for all points are simultaneous, regardless of time zones.

         UTC Illustration: Setting `timeOfDay` to 9:00 a.m., 4 January 1990 (631443600000 milliseconds) and `timeZoneForTimeOfDay` to `UTC`, the start time for points in the Eastern Time Zone is 4:00 a.m. Eastern Time and 3:00 a.m. Central Time for those in the Central Time Zone.

         ![](../../images/GUID-069122DB-BBF5-4A00-A199-00C331CA81E4-web.png)

         _Input_: `timeOfDay` is 9:00 a.m., 4 Jan. 1990 (631443600000 milliseconds), and `timeZoneForTimeOfDay` is set to `UTC`_

         Values: `GeoLocal` \| `UTC`
      </StyledTableCell>
   </StyledTableRow>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `travelDirection`
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         Determines whether to measure travel times or distances from facilities to demand locations or from demand locations to facilities. The default is `FacilityToDemand`.

         Values: `FacilityToDemand` \| `DemandToFacility`

         Example: `"travelDirection" :  "DemandToFacility"`
      </StyledTableCell>
   </StyledTableRow>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `requiredFacilitiesLayer`

         (Required if `goal` is set to `Allocate`. Optional for all other goals. )
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         A point layer specifying one or more locations that act as facilities by providing some kind of service. Facilities specified by this parameter are required to be part of the output solution and will be used before any facilities from the `candidatesFacilitiesLayer` when allocating demand locations.

         <GUID_98478E86_0753_4C4D_A2EB_7DC84675B2DC_GUID_E0E9FDE9_9A98_4EA4_9164_0E878BADF591 />

         <GUID_98478E86_0753_4C4D_A2EB_7DC84675B2DC_GUID_D95DEC58_7F27_491A_AF3D_6E6A3C0A6F2D />
      </StyledTableCell>
   </StyledTableRow>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `requiredFacilitiesCapacity`
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         A double value representing how much demand every facility in the `requiredFacilitiesLayer` is capable of supplying. Default value is unlimited (2,147,483,647).
      </StyledTableCell>
   </StyledTableRow>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `requiredFacilitiesCapacityField`
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         A field on the `requiredFacilitiesLayer` representing how much demand each facility in the `requiredFacilitiesLayer` is capable of supplying. If specified, the `requiredFacilitiesCapacity` parameter is ignored.

         Example: `"requiredFacilitiesCapacityField" : "NumberOfSeats"`
      </StyledTableCell>
   </StyledTableRow>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `candidateFacilitiesLayer`

         (Required for all goals except `Allocate`.)
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         A point layer specifying one or more locations that act as facilities by providing some kind of service. Facilities specified by this parameter are not required to be part of the output solution and will be used only after all the facilities from the `requiredFacilitiesLayer` have been used when allocating demand locations.

         <GUID_98478E86_0753_4C4D_A2EB_7DC84675B2DC_GUID_E0E9FDE9_9A98_4EA4_9164_0E878BADF591 />

         <GUID_98478E86_0753_4C4D_A2EB_7DC84675B2DC_GUID_D95DEC58_7F27_491A_AF3D_6E6A3C0A6F2D />
      </StyledTableCell>
   </StyledTableRow>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `candidateCount`
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         The number of candidate facilities to choose when allocating demand locations. Note that the sum of the features in the `requiredFacilitiesLayer` and the value specified for `candidateCount` cannot exceed 100. The default value is 1.
      </StyledTableCell>
   </StyledTableRow>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `candidateFacilitiesCapacity`
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         A double value representing how much demand every facility in the `candidateFacilitiesLayer` is capable of supplying. Default value is unlimited (2,147,483,647.0).
      </StyledTableCell>
   </StyledTableRow>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `candidateFacilitiesCapacityField`
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         A field on the `candidateFacilitiesLayer` representing how much demand each facility in the `candidatesFacilitiesLayer` is capable of supplying. If specified, the `candidateFacilitiesCapacity` parameter is ignored.
      </StyledTableCell>
   </StyledTableRow>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `percentDemandCoverage`
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         A double value containing the percentage of the total demand that you want the candidate and required facilities to capture. The default value is 100.
      </StyledTableCell>
   </StyledTableRow>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `outputName`
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         <GUID_98478E86_0753_4C4D_A2EB_7DC84675B2DC_GUID_E836F966_C272_43B1_9BF9_55BA03755A13 />
      </StyledTableCell>
   </StyledTableRow>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `pointBarrierLayer`
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         <GUID_98478E86_0753_4C4D_A2EB_7DC84675B2DC_GUID_BCAD1BCB_EC1F_4FF5_BACA_1171DEB5013B />
         <GUID_98478E86_0753_4C4D_A2EB_7DC84675B2DC_GUID_4EA0954B_62E1_4D16_B2C8_3A0CA487D187 />
         <GUID_98478E86_0753_4C4D_A2EB_7DC84675B2DC_GUID_E0E9FDE9_9A98_4EA4_9164_0E878BADF591 />
         <GUID_98478E86_0753_4C4D_A2EB_7DC84675B2DC_GUID_D95DEC58_7F27_491A_AF3D_6E6A3C0A6F2D />
      </StyledTableCell>
   </StyledTableRow>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `lineBarrierLayer`
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         <GUID_98478E86_0753_4C4D_A2EB_7DC84675B2DC_GUID_D8788E05_2F9E_4C4B_BD85_2C3827D7F599 />
         <GUID_98478E86_0753_4C4D_A2EB_7DC84675B2DC_GUID_04884644_A8CD_424F_9E82_BFBC940E69F3 />
         <GUID_98478E86_0753_4C4D_A2EB_7DC84675B2DC_GUID_E0E9FDE9_9A98_4EA4_9164_0E878BADF591 />
         <GUID_98478E86_0753_4C4D_A2EB_7DC84675B2DC_GUID_D95DEC58_7F27_491A_AF3D_6E6A3C0A6F2D />
      </StyledTableCell>
   </StyledTableRow>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `polygonBarrierLayer`
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         <GUID_98478E86_0753_4C4D_A2EB_7DC84675B2DC_GUID_17F01AF8_5FA9_49A8_8A33_09600EE7A0DA />
         <GUID_98478E86_0753_4C4D_A2EB_7DC84675B2DC_GUID_0B76781C_FB26_4214_B7AA_EB7BCCEA3D55 />
         <GUID_98478E86_0753_4C4D_A2EB_7DC84675B2DC_GUID_E0E9FDE9_9A98_4EA4_9164_0E878BADF591 />
         <GUID_98478E86_0753_4C4D_A2EB_7DC84675B2DC_GUID_D95DEC58_7F27_491A_AF3D_6E6A3C0A6F2D />
      </StyledTableCell>
   </StyledTableRow>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `context`
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         <GUID_98478E86_0753_4C4D_A2EB_7DC84675B2DC_GUID_E671F554_89D2_4CAD_B032_525E1CE90C18 />
      </StyledTableCell>
   </StyledTableRow>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `f`
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         The response format. The default response format is `html`.

         Values: `html` \| `json`
      </StyledTableCell>
   </StyledTableRow>
</StyledTable>

## Response
When you submit a request, the service assigns a unique job ID for the transaction.

Syntax:
```javascript
{
"jobId": "<unique job identifier>",
"jobStatus": "<job status>"
}
```
After the initial request is submitted you can use the jobId to periodically check the status of the job and messages as described in the topic [Check job status](/checking-job-status-1). Once the job has successfully completed, you use the jobId to retrieve the results. To track the status, you can make a request of the following form:
```javascript
http://<analysis url>/ChooseBestFacilities/jobs/<jobId>
```
## Accessing results
When the status of the job request is `esriJobSucceeded`, you can access the results of the analysis by making a request of the following form.
```javascript
http://<analysis url>/ChooseBestFacilities/jobs/<jobId>/results/allocatedDemandLocationsLayer?token=<your token>&f=json
```
<StyledTable headers={"Parameter,Description"}>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `allocatedDemandLocationsLayer`
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         The output layer containing the set of demand locations that were allocated to a facility. Example:
         ```javascript
         {"url":"http://<analysis url>/ChooseBestFacilities/jobs/<jobId>/results/allocatedDemandLocationsLayer"}
         ```
         The result has properties for parameter name, data type, and value. The contents of value depends upon the `outputName` parameter provided in the initial request.
         -   If `outputName` was provided, value contains the url to the feature service layer.
         ```javascript
         {
         "paramName":"allocatedDemandLocationsLayer",
         "dataType":"GPString",
         "value":{"url":"<hosted featureservice layer url>"}
         }
         ```
         -   If `outputName` was not provided, value contains a feature collection.
         ```javascript
         {
         "paramName":"allocatedDemandLocationsLayer",
         "dataType":"GPString",
         "value":{"layerDefinition": {}, "featureSet": {} }
         }
         ```
         See [Feature Output ](/feature-output-1) for more information about how the result layer or collection is accessed.
      </StyledTableCell>
   </StyledTableRow>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `allocationLinesLayer`
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         The output layer containing a set of lines, each line connecting the demand location to its assigned facility. Example:
         ```javascript
         {"url":"http://<analysis url>/ChooseBestFacilities/jobs/<jobId>/results/allocationLinesLayer"}
         ```
         The result has properties for parameter name, data type, and value. The contents of value depends upon the `outputName` parameter provided in the initial request.
         -   If `outputName` was provided, value contains the url to the feature service layer.
         ```javascript
         {
         "paramName":"allocationLinesLayer",
         "dataType":"GPString",
         "value":{"url":"<hosted featureservice layer url>"}
         }
         ```
         -   If `outputName` was not provided, value contains a feature collection.
         ```javascript
         {
         "paramName":"allocationLinesLayer",
         "dataType":"GPString",
         "value":{"layerDefinition": {}, "featureSet": {} }
         }
         ```
         See [Feature Output ](/feature-output-1) for more information about how the result layer or collection is accessed.
      </StyledTableCell>
   </StyledTableRow>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `assignedFacilitiesLayer`
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         The output layer containing the facilities that were assigned demand.

         Example:
         ```javascript
         {"url":"http://<analysis url>/ChooseBestFacilities/jobs/<jobId>/results/assignedFacilitiesLayer"}
         ```
         The result has properties for parameter name, data type, and value. The contents of value depends upon the `outputName` parameter provided in the initial request.
         -   If `outputName` was provided, value contains the url to the feature service layer.
         ```javascript
         {
         "paramName":"assignedFacilitiesLayer",
         "dataType":"GPString",
         "value":{"url":"<hosted featureservice layer url>"}
         }
         ```
         -   If `outputName` was not provided, value contains a feature collection.
         ```javascript
         {
         "paramName":"assignedFacilitiesLayer",
         "dataType":"GPString",
         "value":{"layerDefinition": {}, "featureSet": {} }
         }
         ```
         See [Feature Output ](/feature-output-1) for more information about how the result layer or collection is accessed.
      </StyledTableCell>
   </StyledTableRow>
</StyledTable>