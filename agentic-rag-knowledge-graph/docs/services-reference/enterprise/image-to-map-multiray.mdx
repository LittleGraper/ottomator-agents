---
title: "Image To Map Multiray"
description: "The imageToMapMultiray  operation computes a 3D geometry in a map from multiple image space geometries on multiple corresponding raster items of one same object"
slug: "image-to-map-multiray"
url: "/image-to-map-multiray"
guid: "GUID-41C65877-E213-4BE1-B4FE-A86819A70660"
migratedTopicMetadata:
  FTITLE: "Image To Map Multiray"
  FDESCRIPTION: ""
  FCHANGES: ""
  FISHRELEASELABEL: ""
  FESRISOFTWARERELEASE: ""
  FESRITAGCLOUD: ""
  FESRIRECREATIONPROCEDURE: ""
  FESRIPRODUCTLIFECYCLE: "11.2 - *"
  CREATED-ON: "19/09/2023 07:43:43"
  FAUTHOR: "jswain"
  FSTATUS: "Released"
  MODIFIED-ON: "29/09/2023 09:56:14"
  VERSION: "1"
  FRESOLUTION: ""
  DOC-LANGUAGE: "en"
  FISHREVCOUNTER: "12"
  ED: "GUID-FD65A9A2-EDE3-4F2B-8C0E-60ABCD30D655"
  FUSERGROUP: "VUSERGROUPARCGISONLINEDOC"
  READ-ACCESS: ""
restInfoMetadata:
  apiPath: /imageToMapMultiray
  urlSegments:
    - name: <imageservice-url>
      url: /image-service
    - name: /imageToMapMultiray
  methods: []
  sslOnly: 'no'
  versionIntroduced: '11.2'
  requiredCapability: Catalog
---

import GUID_512E1710_163F_43F9_8ABC_FA35AE6DD5DF_GUID_9B5D5783_E386_45F7_8EA8_88843A1BB484 from "./snippets/GUID-512E1710-163F-43F9-8ABC-FA35AE6DD5DF/_GUID-9B5D5783-E386-45F7-8EA8-88843A1BB484";

## Description

The `imageToMapMultiray` operation computes a 3D geometry in a map from multiple image space geometries on multiple corresponding raster items of one same object. For example, a house shows up in several raster items. Users may specify the house location on each image using the geometries parameter. In the `rasterIds` parameter, specify the `rasterIds` of the images in the same order. Then the `imageToMapMultiray` operation will find the house location in the map space. 

##  Request parameters

<StyledTable headers={"Parameter,Details"}>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`geometries` 

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

The array of geometries for the same object in each raster item (use image space coordinates). The structure of each geometry in the array is the same as the structure of the [JSON geometry objects](/geometry-objects).

Examples

```javascript
//Example one
geometries={
  "geometries": [
    {
      "x": 110.99999871311138,
      "y": -222.00000275354887
    },
    {
      "x": 149.88271993130002,
      "y": -1332.124490085996
    },
    {
      "x": 212.3135059459787,
      "y": -2405.780743590703
    }
  ],
  "geometryType": "esriGeometryPoint"
}

//Example two
geometries={
  "geometries": [
    {
      "rings": [
        [
          [
            407.18848443657043,
            -47.53429040903461,
            632.83443
          ],
          [
            4073.1899990601496,
            -478.534976572578,
            632.83443
          ],
          [
            404.19004220650277,
            -477.52214124464854,
            632.83443
          ],
          [
            407.18848443657043,
            -47.53429040903461,
            632.83443
          ]
        ]
      ]
    },
    {
      "rings": [
        [
          [
            435.4416439257707,
            -1154.9573799256277,
            632.83443
          ],
          [
            4064.897144450215,
            -1581.4135131905628,
            632.83443
          ],
          [
            435.43320639918966,
            -1580.4688456028869,
            632.83443
          ],
          [
            435.4416439257707,
            -1154.9573799256277,
            632.83443
          ]
        ]
      ]
    }
  ],
  "geometryType": "esriGeometryPolygon"
}
```

 

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`rasterIds` 

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Specifies the objectIds of the raster items. The order needs to match the geometries parameter.

Example

```javascript
rasterIds=1,2
```

 

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`outSR` 

(optional)

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

The spatial reference of the output `geometry`. The spatial reference can be specified as either as well-known ID or as a [spatial reference JSON object](/geometry-objects). 

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`f` 

(optional)

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

<GUID_512E1710_163F_43F9_8ABC_FA35AE6DD5DF_GUID_9B5D5783_E386_45F7_8EA8_88843A1BB484 />

Values: `html`  \| `json`  \| `pjson` 

</StyledTableCell>

</StyledTableRow>

</StyledTable>

## Example usage

The following is a sample request URL for the `imageToMapMultiray` operation:

```javascript
https://machine.domain.com/webadaptor/rest/services/imageinspection/ImageServer/imageToMapMultiray?geometries={"geometries":[{"rings":[[[407.18848443657043,-47.53429040903461,632.83443],[4073.1899990601496,-478.534976572578,632.83443],[404.19004220650277,-477.52214124464854,632.83443],[407.18848443657043,-47.53429040903461,632.83443]]]},{"rings":[[[435.4416439257707,-1154.9573799256277,632.83443],[4064.897144450215,-1581.4135131905628,632.83443],[435.43320639918966,-1580.4688456028869,632.83443],[435.4416439257707,-1154.9573799256277,632.83443]]]}],"geometryType":"esriGeometryPolygon"}&rasterIds=1,2&outSR=&f=html
```

 

## JSON Response syntax

### Point syntax

```json
{
  "x": <x>,
  "y": <y>,
  "z": <z>, 
  "spatialReference": {
    <spatialReference>
  }
}
```

 

### Multipoint syntax

```json
{  
  "hasZ": <true|false>,
  "points": [
    [
      <x1>,
      <y1>,
      <z1>
    ],
    [
      <x2>,
      <y2>,
      <z2>
    ]
  ], 
  "spatialReference": {
    <spatialReference>
  }
}
```

 

### Polyline syntax

```json
{
  "hasZ": <true|false>,
  "paths": [
    [
      [<x11>, <y11>, <z11>],
      [<x1N>, <y1N>, <z1N>]
    ],
    [
      [<xk1>, <yk1>, <zk1>],
      [<xkM>, <ykM>, <zkM>]
    ]
  ],
  "spatialReference": {<spatialReference>}
}
```

 

### Polygon syntax

```json
{
  "hasZ": <true | false>,
  "rings": [
    [
      [<x11>, <y11>, <z11>],
      [<x1N>, <y1N>, <z1N>]
    ],
    [
      [<xk1>, <yk1>, <zk1>],
      [<xkM>, <ykM>, <zkM>]
    ]
  ],
  "spatialReference": {<spatialReference>}
}
```

 

## JSON Response example

```json
{
  "hasZ": true,
  "rings": [
    [
      [
        491401.54924809793,
        3762933.304103659,
        726.4049935976818
      ],
      [
        491315.3563173413,
        3762950.815125823,
        722.4229142777622
      ],
      [
        491316.3635633588,
        3762950.6344630867,
        722.4680534284562
      ],
      [
        491315.3563173413,
        3762950.815125823,
        722.4229142777622
      ],
      [
        491401.54924809793,
        3762933.304103659,
        726.4049935976818
      ]
    ]
  ],
  "spatialReference": {
    "wkid": 32611,
    "latestWkid": 32611
  }
}
```

 
