---
title: "Find Point Clusters"
description: "API reference for the Find Point Clusters task available in ArcGIS GeoAnalytics Server."
slug: "find-point-clusters"
url: "/geoanalytics/tasks/find-point-clusters"
redirectFrom:
  - /find-point-clusters/
guid: "GUID-A75F5C5A-B576-44B3-B78A-1D037187A334"
migratedTopicMetadata:
  FTITLE: "Find Point Clusters"
  FDESCRIPTION: "Template conversion"
  FCHANGES: "GeoAnalytics template conversion"
  FISHRELEASELABEL: ""
  FESRISOFTWARERELEASE: ""
  FESRITAGCLOUD: ""
  FESRIRECREATIONPROCEDURE: ""
  FESRIPRODUCTLIFECYCLE: "10.7 - *"
  CREATED-ON: "18/06/2019 08:19:39"
  FAUTHOR: "tohara"
  FSTATUS: "Released"
  MODIFIED-ON: "01/10/2019 17:39:15"
  VERSION: "1"
  FRESOLUTION: ""
  DOC-LANGUAGE: "en"
  FISHREVCOUNTER: "14"
  ED: "GUID-AAB27B54-6C58-49FD-A669-99AF61F7FC25"
  FUSERGROUP: "VUSERGROUPARCGISONLINEDOC"
  READ-ACCESS: ""
restInfoMetadata:
  apiPath: /FindPointClusters
  urlSegments:
    - name: <geoanalytics-url>
      url: /geoanalytics-tasks
    - name: /FindPointClusters
  methods: []
  sslOnly: 'no'
  versionIntroduced: 10.6.1
---

import GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_DC085569_B522_4EE0_B0B5_2F7A608B8064 from "../../snippets/GUID-53340951-6261-4C65-BAA3-4AF9D206C6D2/_GUID-DC085569-B522-4EE0-B0B5-2F7A608B8064";
import GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_8280F941_0439_4805_B034_1E224F28280C from "../../snippets/GUID-53340951-6261-4C65-BAA3-4AF9D206C6D2/_GUID-8280F941-0439-4805-B034-1E224F28280C";
import GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_B66A5391_775F_4E9A_B717_F84D52A10572 from "../../snippets/GUID-53340951-6261-4C65-BAA3-4AF9D206C6D2/_GUID-B66A5391-775F-4E9A-B717-F84D52A10572";
import GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_E671F554_89D2_4CAD_B032_525E1CE90C18 from "../../snippets/GUID-53340951-6261-4C65-BAA3-4AF9D206C6D2/_GUID-E671F554-89D2-4CAD-B032-525E1CE90C18";
import GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_9BD8524A_A4D0_4128_876A_6CA8568233A7 from "../../snippets/GUID-53340951-6261-4C65-BAA3-4AF9D206C6D2/_GUID-9BD8524A-A4D0-4128-876A-6CA8568233A7";
import GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_9B5D5783_E386_45F7_8EA8_88843A1BB484 from "../../snippets/GUID-53340951-6261-4C65-BAA3-4AF9D206C6D2/_GUID-9B5D5783-E386-45F7-8EA8-88843A1BB484";
import GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_C771449E_6BA7_4CB4_9328_2C855A14B2B2 from "../../snippets/GUID-53340951-6261-4C65-BAA3-4AF9D206C6D2/_GUID-C771449E-6BA7-4CB4-9328-2C855A14B2B2";
import GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_9562E716_BEF8_4A70_A787_C7231BB32C3E from "../../snippets/GUID-53340951-6261-4C65-BAA3-4AF9D206C6D2/_GUID-9562E716-BEF8-4A70-A787-C7231BB32C3E";
import GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_CBCE73F1_60C0_4D53_BDE3_B2C3ACEBD24A from "../../snippets/GUID-53340951-6261-4C65-BAA3-4AF9D206C6D2/_GUID-CBCE73F1-60C0-4D53-BDE3-B2C3ACEBD24A";
import GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_EE2D677C_9158_4D61_A164_2444C6476C92 from "../../snippets/GUID-53340951-6261-4C65-BAA3-4AF9D206C6D2/_GUID-EE2D677C-9158-4D61-A164-2444C6476C92";
import GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_03071520_C169_41C0_8E51_866D82061408 from "../../snippets/GUID-53340951-6261-4C65-BAA3-4AF9D206C6D2/_GUID-03071520-C169-41C0-8E51-866D82061408";
import GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_A0501D59_23F2_456F_AAFF_3BCC593D9E34 from "../../snippets/GUID-53340951-6261-4C65-BAA3-4AF9D206C6D2/_GUID-A0501D59-23F2-456F-AAFF-3BCC593D9E34";
import GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_A771740E_17FA_47C6_A2FC_6BF0B76090CA from "../../snippets/GUID-53340951-6261-4C65-BAA3-4AF9D206C6D2/_GUID-A771740E-17FA-47C6-A2FC-6BF0B76090CA";
import GAX_DEPRECATION_NOTICE from "../../snippets/GUID-53340951-6261-4C65-BAA3-4AF9D206C6D2/_gax-general-deprecation-notice.mdx";

## Description

<GAX_DEPRECATION_NOTICE />

![Find Point Clusters](../../images/GUID-B087C980-A1FB-476E-8DC4-E83F25574F1E-web.png)

The `FindPointClusters` operation extracts clusters from your input point features and identifies any surrounding noise. Two clustering methods can be used, DBSCAN or HDBSCAN. Both methods can find clusters in space, while DBSCAN can find spatiotemporal clusters in time-enabled point layers.
For example, a non governmental organization is studying a particular pest-borne disease. It has a point dataset representing households in a study area, some of which are infested, and some of which are not. By using the `Find Point Clusters` tool, an analyst can identify clusters of infested households to help pinpoint an area to begin treatment and extermination of pests.
To learn more, see the ArcGIS Pro documentation on [How Density-based Clustering works](http://pro.arcgis.com/en/pro-app/tool-reference/spatial-statistics/how-density-based-clustering-works.htm).

##  Request parameters 
<StyledTable headers={"Parameter,Details"}>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">
      `inputLayer`
      (Required)
    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">
      The point features from which clusters will be found.

      <GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_DC085569_B522_4EE0_B0B5_2F7A608B8064 />

      REST examples
      ```javascript
      //REST web example
      {"url": "https://myportal.domain.com/server/rest/services/Hosted/hurricaneTrack/FeatureServer/0", "filter": "Month = 'September'"}

      //REST scripting example
      "inputLayer": {"url": "https://myportal.domain.com/server/rest/services/Hosted/hurricaneTrack/FeatureServer/0", "filter": "Month = 'September'"}
      ```
    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">
      `clusterMethod`
      (Required)
    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">
      The algorithm used for cluster analysis. This parameter must be specified as either `DBSCAN` or `HDBSCAN`. The `DBSCAN` algorithm uses a specified distance to separate dense clusters from sparser noise. `DBSCAN` is faster than `HDBSCAN`, but is only appropriate if there is a very clear `searchDistance` to use that works well to define all clusters that may be present. `DBSCAN` finds clusters that have similar densities. The `HDBSCAN` algorithm finds clusters of points similar to `DBSCAN` but uses varying distances allowing for clusters with varying densities based on cluster probability (or stability). `HDBSCAN` is very data-driven and does not require or use `searchDistance`, but is a more time-consuming calculation than `DBSCAN`.
      The DBSCAN algorithm finds clusters in two-dimensional space only by default. When `timeMethod` is set to `Linear` and `inputLayer` is time enabled and is of type instant, DBSCAN will discover clusters in both space and time. When searching for cluster members, `minFeaturesCluster` must be found within a specified search range and search duration to form a cluster. Temporal clustering is available at ArcGIS Enterprise 10.8. `HDBSCAN` currently only supports spatial clustering and will not use time to discover clusters.
      <Note type={"note"}>
        When using the `HDBSCAN` algorithm with an input layer containing more than 3 million features, the tool may fail unless you increase the value of the `javaHeapSize` parameter on the GeoAnalyticsTools GP Service. Roughly 2 GB of heap size is needed per 3 million features. The amount of RAM specified by `javaHeapSize` should be available on each GeoAnalytics Server machine in addition to the 16 GB normally required by GeoAnalytics Server. For example, if you want to cluster 9 million features with `HDBSCAN`, you should set `javaHeapSize` to no less than 6144 MB (or 6 GB). In this case, each GeoAnalytics Server machine should have a total of at least 22 GB or RAM available.
      </Note>
      REST examples
      ```javascript
      //REST web example
      DBSCAN

      //REST scripting example
      "clusterMethod": "DBSCAN"
      ```
    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">
      `timeMethod`
      (Optional)
    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">
      When this parameter is set to `Linear` and `clusterMethod` is `DBSCAN` , both space and time will be used to find point clusters. If `clusterMethod` is `HDBSCAN` , this parameter will be ignored and clusters will be found in space only. This parameter can only be used if `inputLayer` has time enabled and is of type instant. Temporal clustering is available at ArcGIS Enterprise 10.8.

      REST examples
      ```javascript
      //REST web example
      Linear

      //REST scripting example
      "timeMethod": "Linear"
      ```
    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">
      `minFeaturesCluster`
      (Required)
    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">
      This parameter is used differently depending on the clustering method chosen. For `DBSCAN`, this parameter specifies the number of features that must be found within a search range of a point for that point to start forming a cluster. The results may include clusters with fewer features than this value. The search range distance is set using the `searchDistance` parameter. For `HDBSCAN`, the `minFeaturesCluster` parameter specifies the number of features neighboring each point (including the point itself) that will be considered when estimating density. This number is also the minimum cluster size allowed when extracting clusters.

      REST examples
      ```javascript
      //REST web example
      10

      //REST scripting example
      "minFeaturesCluster": 5
      ```
    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">
      `searchDistance`
      (Optional)
    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">
      When using `DBSCAN` , this parameter is the distance within which `minFeaturesCluster` must be found. This parameter is not used when `HDBSCAN` is chosen as the clustering method.

      REST examples
      ```javascript
      //REST web example
      108.3

      //REST scripting example
      "searchDistance": 100
      ```
    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">
      `searchDistanceUnit`
      (Optional)
    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">
      The units used for the `searchDistance` parameter. This parameter is required when using `DBSCAN` but will not be used with `HDBSCAN`.

      <GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_8280F941_0439_4805_B034_1E224F28280C />

      REST examples
      ```javascript
      //REST web example
      Meters

      //REST scripting example
      "searchDistanceUnit": "Miles"
      ```
    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">
      `searchDuration`
      (Optional)
    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">
      When using DBSCAN with `timeMethod` set as `Linear`, this parameter is the time duration within which `minFeaturesCluster` must be found. This parameter is not used when HDBSCAN is chosen as the clustering method or when `timeMethod` is not used.
    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">
      `searchDurationUnit`
      (Optional)
    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">
      The units used for the `searchDuration` parameter. This parameter is required when using DBSCAN but will not be used with HDBSCAN or space-only DBSCAN.
    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">
      `outputName`
      (Required)
    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">

      <GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_B66A5391_775F_4E9A_B717_F84D52A10572 />

      REST examples
      ```javascript
      //REST web example
      myOutput

      //REST scripting example
      "outputName": "myOutput"
      ```
    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">
      `context`
      (Optional)
    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">

      <GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_E671F554_89D2_4CAD_B032_525E1CE90C18 />

      <GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_9BD8524A_A4D0_4128_876A_6CA8568233A7 />

    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">
      `f`
    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">

      <GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_9B5D5783_E386_45F7_8EA8_88843A1BB484 />

      <GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_C771449E_6BA7_4CB4_9328_2C855A14B2B2 />

    </StyledTableCell>
  </StyledTableRow>
</StyledTable>

## Example usage
Below is a sample request URL for `FindPointClusters` :
```other
https://hostname.domain.com/webadaptor/rest/services/System/GeoAnalyticsTools/GPServer/FindHotSpots/submitJob?inputLayer={"url":"https://hostname.domain.com/webadaptor/rest/services/Hurricane/hurricaneTrack/0"}&clusterMethod=HDBSCAN&minFeaturesCluster=10&searchDistance=&searchDistanceUnit=&outputName=myOutput&context={"extent":{"xmin":-122.68,"ymin":45.53,"xmax":-122.45,"ymax":45.6,"spatialReference":{"wkid":4326}}}&f=json
```

## Response

<GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_9562E716_BEF8_4A70_A787_C7231BB32C3E />

<GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_CBCE73F1_60C0_4D53_BDE3_B2C3ACEBD24A />

<GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_EE2D677C_9158_4D61_A164_2444C6476C92 />

```other
https://<analysis url>/FindPointClusters/jobs/<jobId>
```

### Access results

<GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_03071520_C169_41C0_8E51_866D82061408 />

```other
https://<analysis-url>/FindPointClusters/jobs/<jobId>/results/output?token=<your token>&f=json
```
<StyledTable headers={"Response,Description"}>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">
      `output`
    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">
      The `output` parameter will contain the cluster results. Fields added to `output` include all the fields from the `inputLayer` and the following:

      -   `CLUSTER_ID`—A numeric value showing you which cluster a feature falls into. A feature with a `CLUSTER_ID` of -1 does not fall into a cluster and is noise.
      -   `COLOR_ID`—An ID value used for rendering results. Multiple clusters will each be assigned a different color. Colors will be assigned and repeated so that each cluster is visually distinct from its neighboring clusters.

      When the HDBSCAN algorithm is used to find clusters, the following fields will also be added to `output`:

      -   `PROB`—The probability that a feature belongs in its assigned cluster.
      -   `OUTLIER`—The likelihood that a feature is an outlier within its own cluster. A larger value indicates that the feature is more likely to be an outlier.
      -   `EXEMPLAR`— Indicates which features are most representative of each cluster. These features are indicated by a value of 1.
      -   `STABILITY`— The persistence of each cluster across a range of scales. A larger score indicates that a cluster persists over a wider range of distance scales.

      ```javascript
      {"url": "https://<analysis-url>/FindPointClusters/jobs/<jobId>/results/output"}
      ```

      <GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_A0501D59_23F2_456F_AAFF_3BCC593D9E34 />

      <GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_A771740E_17FA_47C6_A2FC_6BF0B76090CA />

    </StyledTableCell>
  </StyledTableRow>
</StyledTable>