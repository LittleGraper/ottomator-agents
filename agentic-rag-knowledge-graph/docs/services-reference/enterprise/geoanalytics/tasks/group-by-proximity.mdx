---
title: "Group By Proximity"
description: "API reference for the Group By Proximity task available through the ArcGIS GeoAnalytics Server service."
slug: "group-by-proximity"
url: "/geoanalytics/tasks/group-by-proximity"
redirectFrom:
  - /group-by-proximity/
guid: "GUID-5DA51C1E-39F9-4E08-9C32-9B98AC44B9DB"
migratedTopicMetadata:
  FTITLE: "Group By Proximity"
  FDESCRIPTION: ""
  FCHANGES: ""
  FISHRELEASELABEL: ""
  FESRISOFTWARERELEASE: ""
  FESRITAGCLOUD: ""
  FESRIRECREATIONPROCEDURE: ""
  FESRIPRODUCTLIFECYCLE: "11.0 - *"
  CREATED-ON: "02/04/2022 09:42:12"
  FAUTHOR: "sambrose"
  FSTATUS: "Released"
  MODIFIED-ON: "24/05/2022 10:07:31"
  VERSION: "2"
  FRESOLUTION: ""
  DOC-LANGUAGE: "en"
  FISHREVCOUNTER: "6"
  ED: "GUID-F4027492-5B24-46C9-8526-8994361DEA95"
  FUSERGROUP: "VUSERGROUPARCGISONLINEDOC"
  READ-ACCESS: ""
restInfoMetadata:
  apiPath: /GroupByProximity
  urlSegments:
    - name: <geoanalytics-url>
      url: /geoanalytics-tasks
    - name: /GroupByProximity
  methods: []
  sslOnly: 'no'
  versionIntroduced: 10.9.1
---

import GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_DC085569_B522_4EE0_B0B5_2F7A608B8064 from "../../snippets/GUID-53340951-6261-4C65-BAA3-4AF9D206C6D2/_GUID-DC085569-B522-4EE0-B0B5-2F7A608B8064";
import GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_12CDD0F6_311B_4245_80A0_5EEE63E168BF from "../../snippets/GUID-53340951-6261-4C65-BAA3-4AF9D206C6D2/_GUID-12CDD0F6-311B-4245-80A0-5EEE63E168BF";
import GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_8280F941_0439_4805_B034_1E224F28280C from "../../snippets/GUID-53340951-6261-4C65-BAA3-4AF9D206C6D2/_GUID-8280F941-0439-4805-B034-1E224F28280C";
import GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_26ADC962_2D43_443C_B197_E1B9B7BCB2CD from "../../snippets/GUID-53340951-6261-4C65-BAA3-4AF9D206C6D2/_GUID-26ADC962-2D43-443C-B197-E1B9B7BCB2CD";
import GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_B66A5391_775F_4E9A_B717_F84D52A10572 from "../../snippets/GUID-53340951-6261-4C65-BAA3-4AF9D206C6D2/_GUID-B66A5391-775F-4E9A-B717-F84D52A10572";
import GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_E671F554_89D2_4CAD_B032_525E1CE90C18 from "../../snippets/GUID-53340951-6261-4C65-BAA3-4AF9D206C6D2/_GUID-E671F554-89D2-4CAD-B032-525E1CE90C18";
import GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_9BD8524A_A4D0_4128_876A_6CA8568233A7 from "../../snippets/GUID-53340951-6261-4C65-BAA3-4AF9D206C6D2/_GUID-9BD8524A-A4D0-4128-876A-6CA8568233A7";
import GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_9B5D5783_E386_45F7_8EA8_88843A1BB484 from "../../snippets/GUID-53340951-6261-4C65-BAA3-4AF9D206C6D2/_GUID-9B5D5783-E386-45F7-8EA8-88843A1BB484";
import GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_C771449E_6BA7_4CB4_9328_2C855A14B2B2 from "../../snippets/GUID-53340951-6261-4C65-BAA3-4AF9D206C6D2/_GUID-C771449E-6BA7-4CB4-9328-2C855A14B2B2";
import GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_9562E716_BEF8_4A70_A787_C7231BB32C3E from "../../snippets/GUID-53340951-6261-4C65-BAA3-4AF9D206C6D2/_GUID-9562E716-BEF8-4A70-A787-C7231BB32C3E";
import GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_CBCE73F1_60C0_4D53_BDE3_B2C3ACEBD24A from "../../snippets/GUID-53340951-6261-4C65-BAA3-4AF9D206C6D2/_GUID-CBCE73F1-60C0-4D53-BDE3-B2C3ACEBD24A";
import GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_EE2D677C_9158_4D61_A164_2444C6476C92 from "../../snippets/GUID-53340951-6261-4C65-BAA3-4AF9D206C6D2/_GUID-EE2D677C-9158-4D61-A164-2444C6476C92";
import GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_03071520_C169_41C0_8E51_866D82061408 from "../../snippets/GUID-53340951-6261-4C65-BAA3-4AF9D206C6D2/_GUID-03071520-C169-41C0-8E51-866D82061408";
import GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_A0501D59_23F2_456F_AAFF_3BCC593D9E34 from "../../snippets/GUID-53340951-6261-4C65-BAA3-4AF9D206C6D2/_GUID-A0501D59-23F2-456F-AAFF-3BCC593D9E34";
import GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_A771740E_17FA_47C6_A2FC_6BF0B76090CA from "../../snippets/GUID-53340951-6261-4C65-BAA3-4AF9D206C6D2/_GUID-A771740E-17FA-47C6-A2FC-6BF0B76090CA";
import GAX_DEPRECATION_NOTICE from "../../snippets/GUID-53340951-6261-4C65-BAA3-4AF9D206C6D2/_gax-general-deprecation-notice.mdx";

## Description

<GAX_DEPRECATION_NOTICE />

The `GroupByProximity` tool groups features that are within spatial or spatiotemporal proximity of each other.

The following are examples:

-   Which roads are connected?
-   Where do I have gaps in my data?
-   Which GPS points are within 1 mile of each other within 10 minutes?

<Note type={"note"}>

Sliver features may be excluded based on the tolerance of the processing spatial reference.

</Note>

The output result is a copy of the input with a new field named `group_id`. The `group_id` field represents the grouping of features. Features with the same `group_id`  value are in the same group. The group numbers represent membership in a particular group and don't imply value. The group numbers may not be sequential or the same number in repeat use of the tool.

##  Request parameters 

<StyledTable headers={"Parameter,Description"}>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `inputLayer`
         (Required)
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         The point, line, or polygon features that will be grouped.
         <GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_DC085569_B522_4EE0_B0B5_2F7A608B8064 />

         REST examples
         ```javascript
         //REST web example
         inputLayer={"url": "https://myportal.domain.com/server/rest/services/Hosted/hurricaneTrack/FeatureServer/0", "filter": "Month = 'September'"}

         //REST scripting example
         "inputLayer": {"url": "https://myportal.domain.com/server/rest/services/Hosted/hurricaneTrack/FeatureServer/0", "filter": "Month = 'September'"}
         ```
      </StyledTableCell>
   </StyledTableRow>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `spatialRelationship`
         (Required)
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         The type of relationship to group by. For more information on the values for this parameter, see the [Spatial relationships](#spatial-relationships) section below.

         Values: `Intersects` \| `Touches` \| `NearGeodesic` \| `NearPlanar`

         REST examples
         ```javascript
         //REST web example
         spatialRelationship=Intersect

         //REST scripting example
         "spatialRelationship": "Touches"
         ```
      </StyledTableCell>
   </StyledTableRow>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `spatialNearDistance`
         (Required if `spatialRelationship` is `NearGeodesic` or `NearPlanar`
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         A double value used for the search distance to determine if features are near one another. This is only applied if `NearGeodesic` or `NearPlanar` is the selected `spatialRelationship`. You can enter a single distance value. The units of the distance values are supplied by the `spatialNearDistanceUnit` parameter.
         <GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_12CDD0F6_311B_4245_80A0_5EEE63E168BF />

         REST examples
         ```javascript
         //REST web example
         spatialNearDistance=4

         //REST scripting example
         "spatialNearDistance": 4
         ```
      </StyledTableCell>
   </StyledTableRow>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `spatialNearDistanceUnit`
         (Required if `spatialRelationship` is `NearPlanar` or `NearGeodesic`)
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         The linear unit to be used with the distance value specified in `spatialNearDistance`. The default value is `Meters`.
         <GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_8280F941_0439_4805_B034_1E224F28280C />

         REST examples
         ```javascript
         //REST web example
         spatialNearDistanceUnit=Miles

         //REST scripting example
         "spatialNearDistanceUnit": "Miles"
         ```
      </StyledTableCell>
   </StyledTableRow>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `temporalRelationship`
         (Optional)
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         The type of temporal relationship to group by. For more information on the values for this parameter, see the [Temporal relationships](#temporal-relationships) section below.

         Values: `Intersects` \| `Near`

         REST examples
         ```javascript
         //REST web example
         temporalRelationship=Intersect

         //REST scripting example
         "temporalRelationship": "Erase"
         ```
      </StyledTableCell>
   </StyledTableRow>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `temporalNearDistance`
         (Required if `temporalRelationship` is `Near`
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         A double value used for the temporal search distance to determine if features are near one another. This is only applied if `Near` is the selected `temporalRelationship` parameter. You can enter a single distance value. The units of the distance values are supplied by the `temporalNearDistanceUnit` parameter.

         REST examples
         ```javascript
         //REST web example
         temporalNearDistance=4

         //REST scripting example
         "temporalNearDistance": 4
         ```
      </StyledTableCell>
   </StyledTableRow>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `temporalNearDistanceUnit`
         (Required if `temporalRelationship` is `Near`)
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         The temporal unit to be used with the distance value specified in `temporalNearDistance`.
         <GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_26ADC962_2D43_443C_B197_E1B9B7BCB2CD />

         REST examples
         ```javascript
         //REST web example
         temporalNearDistanceUnit=Miles

         //REST scripting example
         "temporalNearDistanceUnit": "Hours"
         ```
      </StyledTableCell>
   </StyledTableRow>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `attributeRelationship`
         (Optional)
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         This parameter is available at ArcGIS Enterprise 11.0 or later. An attribute relationship to group features by. The attribute expression is a symmetric operation. The tool takes an input layer that's compared against itself to find groups. Because of this, the input layer is denoted as both a and b, and all expressions should include both a and b.

         REST examples
         ```javascript
         //REST web example
         "$a['REGION'] == $b['REGION']

         //REST scripting example
         "attributeRelationship": "Abs($a['ACCURACY'] - $b['ACCURACY']) < 2"
         ```
      </StyledTableCell>
   </StyledTableRow>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `outputName`
         (Required)
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         <GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_B66A5391_775F_4E9A_B717_F84D52A10572 />

         REST examples
         ```javascript
         //REST web example
         outputName=myOutput

         //REST scripting example
         "outputName": "myOutput"
         ```
      </StyledTableCell>
   </StyledTableRow>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `context`
         (Optional)
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         <GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_E671F554_89D2_4CAD_B032_525E1CE90C18 />
         <GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_9BD8524A_A4D0_4128_876A_6CA8568233A7 />
      </StyledTableCell>
   </StyledTableRow>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `f`
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         <GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_9B5D5783_E386_45F7_8EA8_88843A1BB484 />
         <GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_C771449E_6BA7_4CB4_9328_2C855A14B2B2 />
      </StyledTableCell>
   </StyledTableRow>
</StyledTable>

## Spatial relationships

The tables below describe the overlay relationships supported by the `spatialRelationship` parameter.

<StyledTable headers={"Spatial Relationship,Description"}>
<StyledTableRow>
   <StyledTableCell cellStyle="markdown">
      `Intersects`
   </StyledTableCell>
   <StyledTableCell cellStyle="markdown">
      Computes a geometric intersection of the input layers. Features or portions of features that overlap are grouped. This is the default. `Intersects` supports the following geometries as inputs:
      -   Points
      -   Lines
      -   Polygons
   </StyledTableCell>
</StyledTableRow>
<StyledTableRow>
   <StyledTableCell cellStyle="markdown">
      `Touches`
   </StyledTableCell>
   <StyledTableCell cellStyle="markdown">
      A feature touches another feature if they have an intersecting vertex, but the features do not overlap. `Touches` supports the following geometries as inputs:
      -   Line
      -   Polygon
   </StyledTableCell>
</StyledTableRow>
<StyledTableRow>
   <StyledTableCell cellStyle="markdown">
      `NearPlanar`
   </StyledTableCell>
   <StyledTableCell cellStyle="markdown">
      Conceptually, these operators buffer the features using the specified distance and return all the features that intersect the join features with the buffer applied. The distance calculation uses a planar distance. `NearPlanar`  supports the following geometries as inputs:
      -   Points
      -   Lines
      -   Polygons
   </StyledTableCell>
</StyledTableRow>
<StyledTableRow>
   <StyledTableCell cellStyle="markdown">
      `NearGeodesic`
   </StyledTableCell>
   <StyledTableCell cellStyle="markdown">
      Conceptually, these operators buffer the features using the specified distance and return all the features that intersect the join features with the buffer applied. The distance calculation uses a geodesic distance. `NearGeodesic`  supports the following geometries as inputs:
      -   Points
      -   Lines
      -   Polygons
   </StyledTableCell>
</StyledTableRow>
</StyledTable>

## Temporal relationships

The table below describes the temporal relationships supported by the `temporalRelationship` parameter.

<StyledTable headers={"Temporal relationship,Description"}>
<StyledTableRow>
   <StyledTableCell cellStyle="markdown">
      `Intersects`
   </StyledTableCell>
   <StyledTableCell cellStyle="markdown">
      When any part of a feature's time overlaps another. `Intersects` supports the following time types as inputs:
      -   Instants
      -   Intervals
   </StyledTableCell>
</StyledTableRow>
<StyledTableRow>
   <StyledTableCell cellStyle="markdown">
      `Near`
   </StyledTableCell>
   <StyledTableCell cellStyle="markdown">
      A feature is near another if the time is within a given temporal distance of the other feature.
      -   Instants
      -   Intervals
   </StyledTableCell>
</StyledTableRow>
</StyledTable>

## Example usage

The following is a sample request URL for `GroupByProximity`:

```javascript
https://machine.domain.com/webadaptor/rest/services/System/GeoAnalyticsTools/GPServer/GroupByProximity/submitJob?&inputLayer={"url":"https://webadaptor.domain.com/server/rest/services/Hurricane/hurricaneTrack/0"}&spatialRelationship=Intersects&outputName=myOutput&context={"extent":{"xmin":-122.68,"ymin":45.53,"xmax":-122.45,"ymax":45.6,"spatialReference":{"wkid":4326}}}&f=json
```

 

## Response

<GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_9562E716_BEF8_4A70_A787_C7231BB32C3E />

<GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_CBCE73F1_60C0_4D53_BDE3_B2C3ACEBD24A />

<GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_EE2D677C_9158_4D61_A164_2444C6476C92 />

```javascript
https://<analysis url>/GroupByProximity/jobs/<jobId>
```

 

### Access results

<GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_03071520_C169_41C0_8E51_866D82061408 />

```javascript
https://<analysis-url>/GroupByProximity/jobs/<jobId>/results/output?token=<your token>&f=json
```

 

<StyledTable headers={"Response,Description"}>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `output`
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         The features that are the result of the grouping with a new field called `group_id` that represents the grouping of features. The type of feature (point, line, or polygon) depends on the input layers.
         ```javascript
         {"url": "https://<analysis-url>/GroupByProximity/jobs/<jobId>/results/output"}
         ```
         <GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_A0501D59_23F2_456F_AAFF_3BCC593D9E34 />
         <GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_A771740E_17FA_47C6_A2FC_6BF0B76090CA />
      </StyledTableCell>
   </StyledTableRow>
</StyledTable>