---
title: "Find Similar Locations"
description: "API reference of the Find Similar Locations task available through the ArcGIS GeoAnalytics Server service."
slug: "find-similar-locations"
url: "/geoanalytics/tasks/find-similar-locations"
redirectFrom:
  - /find-similar-locations/
guid: "GUID-D3A1FA6A-31BE-429B-BBE6-C8F2B4B3F04B"
migratedTopicMetadata:
  FTITLE: "Find Similar Locations"
  FDESCRIPTION: "Template conversion"
  FCHANGES: ""
  FISHRELEASELABEL: ""
  FESRISOFTWARERELEASE: ""
  FESRITAGCLOUD: ""
  FESRIRECREATIONPROCEDURE: ""
  FESRIPRODUCTLIFECYCLE: "10.8 - *"
  CREATED-ON: "14/11/2019 16:15:45"
  FAUTHOR: "sambrose"
  FSTATUS: "Released"
  MODIFIED-ON: "15/11/2019 13:12:58"
  VERSION: "2"
  FRESOLUTION: ""
  DOC-LANGUAGE: "en"
  FISHREVCOUNTER: "2"
  ED: "GUID-D7FE0337-5E82-4C82-891C-9C6AD350CA60"
  FUSERGROUP: "VUSERGROUPARCGISONLINEDOC"
  READ-ACCESS: ""
restInfoMetadata:
  apiPath: /FindSimilarLocations
  urlSegments:
    - name: <geoanalytics-url>
      url: /geoanalytics-tasks
    - name: /FindSimilarLocations
  methods: []
  sslOnly: 'no'
  versionIntroduced: '10.5'
---

import GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_DC085569_B522_4EE0_B0B5_2F7A608B8064 from "../../snippets/GUID-53340951-6261-4C65-BAA3-4AF9D206C6D2/_GUID-DC085569-B522-4EE0-B0B5-2F7A608B8064";
import GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_B66A5391_775F_4E9A_B717_F84D52A10572 from "../../snippets/GUID-53340951-6261-4C65-BAA3-4AF9D206C6D2/_GUID-B66A5391-775F-4E9A-B717-F84D52A10572";
import GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_E671F554_89D2_4CAD_B032_525E1CE90C18 from "../../snippets/GUID-53340951-6261-4C65-BAA3-4AF9D206C6D2/_GUID-E671F554-89D2-4CAD-B032-525E1CE90C18";
import GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_9BD8524A_A4D0_4128_876A_6CA8568233A7 from "../../snippets/GUID-53340951-6261-4C65-BAA3-4AF9D206C6D2/_GUID-9BD8524A-A4D0-4128-876A-6CA8568233A7";
import GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_9B5D5783_E386_45F7_8EA8_88843A1BB484 from "../../snippets/GUID-53340951-6261-4C65-BAA3-4AF9D206C6D2/_GUID-9B5D5783-E386-45F7-8EA8-88843A1BB484";
import GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_C771449E_6BA7_4CB4_9328_2C855A14B2B2 from "../../snippets/GUID-53340951-6261-4C65-BAA3-4AF9D206C6D2/_GUID-C771449E-6BA7-4CB4-9328-2C855A14B2B2";
import GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_9562E716_BEF8_4A70_A787_C7231BB32C3E from "../../snippets/GUID-53340951-6261-4C65-BAA3-4AF9D206C6D2/_GUID-9562E716-BEF8-4A70-A787-C7231BB32C3E";
import GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_CBCE73F1_60C0_4D53_BDE3_B2C3ACEBD24A from "../../snippets/GUID-53340951-6261-4C65-BAA3-4AF9D206C6D2/_GUID-CBCE73F1-60C0-4D53-BDE3-B2C3ACEBD24A";
import GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_EE2D677C_9158_4D61_A164_2444C6476C92 from "../../snippets/GUID-53340951-6261-4C65-BAA3-4AF9D206C6D2/_GUID-EE2D677C-9158-4D61-A164-2444C6476C92";
import GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_03071520_C169_41C0_8E51_866D82061408 from "../../snippets/GUID-53340951-6261-4C65-BAA3-4AF9D206C6D2/_GUID-03071520-C169-41C0-8E51-866D82061408";
import GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_A0501D59_23F2_456F_AAFF_3BCC593D9E34 from "../../snippets/GUID-53340951-6261-4C65-BAA3-4AF9D206C6D2/_GUID-A0501D59-23F2-456F-AAFF-3BCC593D9E34";
import GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_A771740E_17FA_47C6_A2FC_6BF0B76090CA from "../../snippets/GUID-53340951-6261-4C65-BAA3-4AF9D206C6D2/_GUID-A771740E-17FA-47C6-A2FC-6BF0B76090CA";
import GAX_DEPRECATION_NOTICE from "../../snippets/GUID-53340951-6261-4C65-BAA3-4AF9D206C6D2/_gax-general-deprecation-notice.mdx";

## Description

<GAX_DEPRECATION_NOTICE />

![Find Similar Locations](../../images/GUID-4495AAD4-E011-4BD6-B3A6-912EAA94A1D6-web.png)

The `FindSimilarLocations` operation measures the similarity of candidate locations to one or more reference locations.

Based on criteria you specify, `FindSimilarLocations` can answer questions such as the following:

-   Which of your stores are most similar to your top performers with regard to customer profiles?
-   Based on characteristics of villages hardest hit by the disease, which other villages are high risk?

To answer questions such as these, you provide the reference locations (the `inputLayer` parameter), the candidate
location (the `searchLayer` parameter), and the fields representing the criteria you want to match. For example, the
`inputLayer` might be a layer containing your top performing stores or the villages hardest hit by the disease. The
`searchLayer` contains your candidate locations to search. This might be all of your stores or all other villages.
Finally, you supply a list of fields to use for measuring similarity. The `FindSimilarLocations` operation will rank
all of the candidate locations by how closely they match your reference locations across all of the fields you have selected.

##  Request parameters 

<StyledTable headers={"Parameter,Details"}>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `inputLayer`
         (Required)
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         The `inputLayer` contains one or more reference locations against which features in the `searchLayer` will be evaluated for similarity. For example, the `inputLayer` might contain your top performing stores or the villages hardest hit by a disease. For more information on `inputLayer` and `searchLayer`, [see below](#notes-on-inputlayer-and-searchlayer).
         <GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_DC085569_B522_4EE0_B0B5_2F7A608B8064 />

         REST examples
         ```javascript
         //REST web example
         {"url": "https://myportal.domain.com/server/rest/services/Hosted/hurricaneTrack/FeatureServer/0", "filter": "Month = 'September'"}

         //REST scripting example
         "inputLayer": {"url": "https://myportal.domain.com/server/rest/services/Hosted/hurricaneTrack/FeatureServer/0", "filter": "Month = 'September'"}
         ```
      </StyledTableCell>
   </StyledTableRow>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `searchLayer`
         (Required)
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         The layer containing candidate locations that will be evaluated against the reference locations. For more information on `inputLayer` and `searchLayer`, [see below](#notes-on-inputlayer-and-searchlayer).
         <GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_DC085569_B522_4EE0_B0B5_2F7A608B8064 />

         REST examples
         ```javascript
         //REST web example
         {"url":"https://myportal.domain.com/server/rest/services/Hosted/hurricaneTrack/FeatureServer/0", "filter": "Month = 'September'"}

         //REST scripting example
         "searchLayer": {"url":"https://myportal.domain.com/server/rest/services/Hosted/hurricaneTrack/FeatureServer/0", "filter": "Month = 'September'"}
         ```
      </StyledTableCell>
   </StyledTableRow>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `analysisFields`
         (Required)
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         A list of fields whose values are used to determine similarity. They must be numeric fields, and the fields must exist on both the `inputLayer` and the `searchLayer`. Depending on the `matchMethod` selected, the task will find features that are most similar based on values or profiles of the fields.

         REST examples
         ```javascript
         //REST web example
         CrimeRate, Beat

         //REST scripting example
         "analysisFields": "CrimeRate, Beat"
         ```
      </StyledTableCell>
   </StyledTableRow>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `mostOrLeastSimilar`
         (Required)
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         The features you want to be returned. You can search for features that are either most similar or least similar to the `inputLayer`, or search both the most and least similar.

         Values: `MostSimilar` \| `LeastSimilar` \| `Both`

         REST examples
         ```javascript
         //REST web example
         LeastSimilar

         //REST scripting example
         "mostOrLeastSimilar": "MostSimilar"
         ```
      </StyledTableCell>
   </StyledTableRow>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `matchMethod`
         (Required)
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         The method that specifies how matching is determined. The `AttributeValues` method uses the squared differences of standardized values. This is the default. The `AttributeProfiles` method uses cosine similarity mathematics to compare the profile of standardized values. Using `AttributeProfiles` requires the use of at least two analysis fields.

         Values: `AttributeValues` \| `AttributeProfiles`

         REST examples
         ```javascript
         //REST web example
         AttributeValues

         //REST scripting example
         "matchMethod": "AttributeProfiles"
         ```
      </StyledTableCell>
   </StyledTableRow>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `numberOfResults`
         (Required)
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         The number of ranked candidate locations output to `similarResultLayer`. If `numberOfResults` is not set, the 10 locations will be returned. The maximum number of results is 10000.

         REST examples
         ```javascript
         //REST web example
         15

         //REST scripting example
         "numberOfResults": 15
         ```
      </StyledTableCell>
   </StyledTableRow>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `appendFields`
         (Optional)
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         Add fields to your data from your search layer. By default, all fields from the search layer are appended.

         REST examples
         ```javascript
         //REST web example
         ID Number

         //REST scripting example
         "appendFields": "ID Number"
         ```
      </StyledTableCell>
   </StyledTableRow>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `outputName`
         (Required)
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         <GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_B66A5391_775F_4E9A_B717_F84D52A10572 />

         REST examples
         ```javascript
         //REST web example
         myOutput

         //REST scripting example
         "outputName": "myOutput"
         ```
      </StyledTableCell>
   </StyledTableRow>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `context`
         (Optional)
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         <GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_E671F554_89D2_4CAD_B032_525E1CE90C18 />
         <GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_9BD8524A_A4D0_4128_876A_6CA8568233A7 />
      </StyledTableCell>
   </StyledTableRow>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `f`
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         <GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_9B5D5783_E386_45F7_8EA8_88843A1BB484 />
         <GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_C771449E_6BA7_4CB4_9328_2C855A14B2B2 />
      </StyledTableCell>
   </StyledTableRow>
</StyledTable>

## Notes on inputLayer and searchLayer

It is not uncommon for `inputLayer` and `searchLayer` to be the same feature service. For example, the feature service
contains locations of all stores, one of which is your top performing store. If you want to rank the remaining stores
from most to least similar to your top performing store, you can provide a filter for both `inputLayer` and
`searchLayer`. The filter on `inputLayer` would select the top performing store, while the filter on `searchLayer`
would select all stores except for the top performing store. You can use the optional filter parameter to specify reference locations.

If there is more than one reference location, similarity will be based on averages for the fields you specify in the
`analysisFields` parameter. For example, if there are two reference locations and you are interested in matching
population, the task will look for candidate locations in `searchLayer` with populations that are most like the
average population for both reference locations. If the values for the reference locations are 100 and 102, for
example, the task will look for candidate locations with populations near 101. Consequently, you will want to use
fields for the reference locations fields that have similar values. If, for example, the population values for one
reference location is 100 and the other is 100,000, the tool will look for candidate locations with population values
near the average of those two values: 50,050. Notice that this averaged value is nothing like the population for either
of the reference locations.

## Example usage

Below is a sample request URL for `FindSimilarLocations`:

```javascript
https://webadaptor.domain.com/server/rest/services/System/GeoAnalyticsTools/GPServer/FindHotSpots/submitJob?inputLayer={"url":"https://webadaptor.domain.com/server/rest/services/Hurricane/hurricaneTrack/0"}&searchLayer={"url":"https://webadaptor.domain.com/server/rest/services/Hosted/tornadoTrack/0"}&analysisFields=shelterLocations, shelterCapacity&mostOrLeastSimilar=MostSimilar&matchMethod=AttributeValues&numberOfResults=20&appendFields=&outputName=myOutput&context={"extent":{"xmin":-122.68,"ymin":45.53,"xmax":-122.45,"ymax":45.6,"spatialReference":{"wkid":4326}}}&f=json
```

## Response

<GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_9562E716_BEF8_4A70_A787_C7231BB32C3E />

<GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_CBCE73F1_60C0_4D53_BDE3_B2C3ACEBD24A />

<GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_EE2D677C_9158_4D61_A164_2444C6476C92 />

```javascript
https://<analysis-url>/FindSimilarLocations/jobs/<jobId>
```

### Accessing results

<GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_03071520_C169_41C0_8E51_866D82061408 />

```javascript
https://<anaylsis-url>/FindSimilarLocations/jobs/<jobId>/results/<result type>?token=<your token>&f=json
```

<StyledTable headers={"Response,Description"}>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `output`
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         Contains features from the `inputLayer` and the `searchLayer`. The number of features from the `searchLayer` is based on the value of the `numberOfResults` parameter. Fields added to `outputName` include all the fields from the `searchLayer` and the following:
         -   `location_type` —A string denoting if the feature was an input reference location or a search location.
         -   `simrank` —The similarity rank. Contains the rank for search locations, where 1 equals the candidate location most similar to the reference locations. Contains zero for reference locations.
         -   `dissimrank` —The dissimilarity rank. Contains the rank for search locations, where -1 equals the candidate location most dissimilar to the reference locations. Contains zero for reference locations.
         -   `simindex` —Quantifies how similar a candidate is compared to the reference locations. If a candidate location matches a reference location exactly, the value is zero. The larger the value, the more dissimilar a candidate is from the reference locations.
         -   `cosimindex` —Quantifies how similar a candidate's profile is compared to the reference location's profile. If the profile of a candidate location matches the profile of a reference location exactly, the value is zero. The larger the value, the more dissimilar a candidate is from the reference locations.
         -   `labelrank` —Used for labelling and rendering the outputs. The higher the values, the more similar; the lower the values, the more dissimilar. Values of 0 represent the reference locations.
         -   `reference_id` — A unique ID value for reference features. Search features are given a null value.
         -   `search_id` — A unique ID value for search value features. Reference features are given a null value.
         ```javascript
         {"url": "https://<analysis-url>/FindSimilarLocations/jobs/<jobId>/results/output"}
         ```
         <GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_A0501D59_23F2_456F_AAFF_3BCC593D9E34 />
         <GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_A771740E_17FA_47C6_A2FC_6BF0B76090CA />
      </StyledTableCell>
   </StyledTableRow>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `processInfo`
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         The `processInfo` parameter contains strings that summarize the `Find Similar Locations` result. These strings are used for reporting by the Find Similar Locations tool found in Map Viewer Classic. You can create your own custom reports for your application using these strings. There are four parts in the returned json:
         -   `messageCode` —The serial number for each unique message.
         -   `message` —Text that may or may not contain parameters (in `${paramsName}` format) that need to be replaced by values.
         -   `params` —A dictionary of the keys and values to be inserted into the `${paramsName}` parameter in the message.
         -   `style` —The formatting of the report produced by the [Find Similar Locations](https://enterprise.arcgis.com/en/portal/latest/use/geoanalytics-find-similar-locations.htm) tool in Map Viewer Classic.
         ```javascript
         {
         "messageCode" : "SS_84507",
         "message" : ["Attribute", "Min", "Max", "SD", "Mean","Input"],
         "params" : {},
         "style" : "<table><tr><th></th><th></th><th></th><th></th><th></th><th></th></tr>"
         }
         ```
      </StyledTableCell>
   </StyledTableRow>
</StyledTable>