---
title: "Detect Incidents"
description: "API reference for the Detect Incidents task available in the ArcGIS GeoAnalytics Server service."
slug: "detect-incidents"
url: "/geoanalytics/tasks/detect-incidents"
redirectFrom:
  - /detect-incidents/
guid: "GUID-F5835F52-31A8-4A4A-A122-321FF9994FD3"
migratedTopicMetadata:
  FTITLE: "Detect Incidents"
  FDESCRIPTION: "Template conversion"
  FCHANGES: ""
  FISHRELEASELABEL: ""
  FESRISOFTWARERELEASE: ""
  FESRITAGCLOUD: ""
  FESRIRECREATIONPROCEDURE: ""
  FESRIPRODUCTLIFECYCLE: "10.9.1 - *"
  CREATED-ON: "25/08/2021 11:19:06"
  FAUTHOR: "nslocum"
  FSTATUS: "Released"
  MODIFIED-ON: "28/09/2021 10:44:21"
  VERSION: "2"
  FRESOLUTION: ""
  DOC-LANGUAGE: "en"
  FISHREVCOUNTER: "3"
  ED: "GUID-10820A9A-1F21-4CB9-BB7C-AE2E5B9D0651"
  FUSERGROUP: "VUSERGROUPARCGISONLINEDOC"
  READ-ACCESS: ""
restInfoMetadata:
  apiPath: /DetectIncidents
  urlSegments:
    - name: <geoanalytics-url>
      url: /geoanalytics-tasks
    - name: /DetectIncidents
  methods: []
  sslOnly: 'no'
  versionIntroduced: '10.6'
---

import GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_DC085569_B522_4EE0_B0B5_2F7A608B8064 from "../../snippets/GUID-53340951-6261-4C65-BAA3-4AF9D206C6D2/_GUID-DC085569-B522-4EE0-B0B5-2F7A608B8064";
import GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_9D93A3DC_0BC3_4112_9F02_01A1C73B2A30 from "../../snippets/GUID-53340951-6261-4C65-BAA3-4AF9D206C6D2/_GUID-9D93A3DC-0BC3-4112-9F02-01A1C73B2A30";
import GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_BC568A80_67D1_4E15_AF84_938865F9BEFB from "../../snippets/GUID-53340951-6261-4C65-BAA3-4AF9D206C6D2/_GUID-BC568A80-67D1-4E15-AF84-938865F9BEFB";
import GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_C91B130A_FD09_424A_9B71_F26A2D394BD9 from "../../snippets/GUID-53340951-6261-4C65-BAA3-4AF9D206C6D2/_GUID-C91B130A-FD09-424A-9B71-F26A2D394BD9";
import GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_26ADC962_2D43_443C_B197_E1B9B7BCB2CD from "../../snippets/GUID-53340951-6261-4C65-BAA3-4AF9D206C6D2/_GUID-26ADC962-2D43-443C-B197-E1B9B7BCB2CD";
import GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_87A951E6_B820_40ED_905E_38CFCD3D8D8E from "../../snippets/GUID-53340951-6261-4C65-BAA3-4AF9D206C6D2/_GUID-87A951E6-B820-40ED-905E-38CFCD3D8D8E";
import GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_B66A5391_775F_4E9A_B717_F84D52A10572 from "../../snippets/GUID-53340951-6261-4C65-BAA3-4AF9D206C6D2/_GUID-B66A5391-775F-4E9A-B717-F84D52A10572";
import GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_E671F554_89D2_4CAD_B032_525E1CE90C18 from "../../snippets/GUID-53340951-6261-4C65-BAA3-4AF9D206C6D2/_GUID-E671F554-89D2-4CAD-B032-525E1CE90C18";
import GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_9BD8524A_A4D0_4128_876A_6CA8568233A7 from "../../snippets/GUID-53340951-6261-4C65-BAA3-4AF9D206C6D2/_GUID-9BD8524A-A4D0-4128-876A-6CA8568233A7";
import GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_9B5D5783_E386_45F7_8EA8_88843A1BB484 from "../../snippets/GUID-53340951-6261-4C65-BAA3-4AF9D206C6D2/_GUID-9B5D5783-E386-45F7-8EA8-88843A1BB484";
import GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_C771449E_6BA7_4CB4_9328_2C855A14B2B2 from "../../snippets/GUID-53340951-6261-4C65-BAA3-4AF9D206C6D2/_GUID-C771449E-6BA7-4CB4-9328-2C855A14B2B2";
import GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_9562E716_BEF8_4A70_A787_C7231BB32C3E from "../../snippets/GUID-53340951-6261-4C65-BAA3-4AF9D206C6D2/_GUID-9562E716-BEF8-4A70-A787-C7231BB32C3E";
import GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_CBCE73F1_60C0_4D53_BDE3_B2C3ACEBD24A from "../../snippets/GUID-53340951-6261-4C65-BAA3-4AF9D206C6D2/_GUID-CBCE73F1-60C0-4D53-BDE3-B2C3ACEBD24A";
import GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_EE2D677C_9158_4D61_A164_2444C6476C92 from "../../snippets/GUID-53340951-6261-4C65-BAA3-4AF9D206C6D2/_GUID-EE2D677C-9158-4D61-A164-2444C6476C92";
import GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_03071520_C169_41C0_8E51_866D82061408 from "../../snippets/GUID-53340951-6261-4C65-BAA3-4AF9D206C6D2/_GUID-03071520-C169-41C0-8E51-866D82061408";
import GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_A0501D59_23F2_456F_AAFF_3BCC593D9E34 from "../../snippets/GUID-53340951-6261-4C65-BAA3-4AF9D206C6D2/_GUID-A0501D59-23F2-456F-AAFF-3BCC593D9E34";
import GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_A771740E_17FA_47C6_A2FC_6BF0B76090CA from "../../snippets/GUID-53340951-6261-4C65-BAA3-4AF9D206C6D2/_GUID-A771740E-17FA-47C6-A2FC-6BF0B76090CA";
import GAX_DEPRECATION_NOTICE from "../../snippets/GUID-53340951-6261-4C65-BAA3-4AF9D206C6D2/_gax-general-deprecation-notice.mdx";

## Description

<GAX_DEPRECATION_NOTICE />

![DetectIncidents](../../images/GUID-9239300D-AF0C-43FD-9B91-289E167149CF-web.png)

The `DetectIncidents` task works with a time-enabled layer of points, lines, areas, or tables that represent an instant in time. Using sequentially ordered features, called tracks, this tool determines which features are incidents of interest. Incidents are determined by conditions that you specify. First, the tool determines which features belong to a track using one or more fields. Using the time at each feature, the tracks are ordered sequentially and the incident condition is applied. Features that meet the starting incident condition are marked as an incident. You can optionally apply an ending incident condition; when the end condition is true, the feature is no longer an incident. The results will be returned with the original features with new columns representing the incident name and indicate which feature meets the incident condition. You can return all original features, only features that are incidents, or all of the feature within tracks where at least one incident occurred.

For example, suppose you have GPS measurements of hurricanes every 10 minutes. Each GPS measurement records the hurricane's name, location, time of recording, and wind speed. Using these fields, you could create an incident where any measurement with a wind speed great than 209 km/h is an incident titled Catastrophic. By not setting an end condition, the incident would end if the feature no longer meets the start condition (wind speeds slows down to less than 208).

Using another example, suppose you were monitoring concentrations of a chemical in your local water supply using a field called `containmentLevel`. You know that the recommended levels are less than 0.01 mg/L, and dangerous levels are above 0.03 mg/L. To detect incidents, where a value above 0.03 mg/L is an incident, and remains an incident until contamination levels are back to normal, you create an incident using a start condition of `containmentLevel > 0.03` and an end condition of `containmentLevel < 0.01`. This will mark any sequence where values exceed 0.03mg/L until they return to a value less than 0.01.

##  Request parameters 

<StyledTable headers={"Parameter,Details"}>
    <StyledTableRow>
        <StyledTableCell cellStyle="markdown">
            `inputLayer`
            (Required)
        </StyledTableCell>
        <StyledTableCell cellStyle="markdown">
            The table, point, line, or polygon features containing potential incidents.
            <GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_DC085569_B522_4EE0_B0B5_2F7A608B8064 />
            
            REST examples
            ```javascript
            //REST web example
            {"url": "https://myportal.domain.com/server/rest/services/Hosted/hurricaneTrack/FeatureServer/0", "filter":"Month = 'September'"}
            //REST scripting example
            "inputLayer":{"url": "https://myportal.domain.com/server/rest/services/Hosted/hurricaneTrack/FeatureServer/0", "filter":"Month = 'September'"}
            ```
        </StyledTableCell>
    </StyledTableRow>
    <StyledTableRow>
        <StyledTableCell cellStyle="markdown">
            `trackFields`
            (Required)
        </StyledTableCell>
        <StyledTableCell cellStyle="markdown">
            The fields used to identify distinct tracks. There can be multiple `trackFields`.
           
            REST examples
            ```javascript
            //REST web examples
            Hurricane Name
            BoatName, ConvoyID
            //REST scripting examples
            "trackFields": "Hurricane Name"
            "trackFields": "BoatName, ConvoyID"
            ```
        </StyledTableCell>
    </StyledTableRow>
    <StyledTableRow>
        <StyledTableCell cellStyle="markdown">
            `startConditionExpression`
            (Required)
        </StyledTableCell>
        <StyledTableCell cellStyle="markdown">
            The condition used to identify incidents. If there is no `endConditionExpression` specified, any feature that meets this condition is an incident. If there is an end condition, any feature that meets the `startConditionExpression` and does not meet the `endConditionExpression` is an incident. The `startConditionExpression` parameter uses [Arcade expressions](https://enterprise.arcgis.com/en/portal/latest/use/geoanalytics-detect-incidents-expression.htm).
            
            REST examples
            ```javascript
            //REST web example
            $feature["wind_speed"] > 111
            //REST scripting example
            "startConditionExpression": "$feature["wind_speed"] > 111"
            ```
        </StyledTableCell>
    </StyledTableRow>
    <StyledTableRow>
        <StyledTableCell cellStyle="markdown">
            `endConditionExpression`
            (Optional)
        </StyledTableCell>
        <StyledTableCell cellStyle="markdown">
            The condition used to identify incidents. If there is no `endConditionExpression` specified, any feature that meets this condition is an incident. If there is an end condition, any feature that meets the `startConditionExpression` and does not meet the `endConditionExpression` is an incident. The `endConditionExpression` parameter uses [Arcade expressions](https://enterprise.arcgis.com/en/portal/latest/use/geoanalytics-detect-incidents-expression.htm).
            
            REST examples
            ```javascript
            //REST web example
            $feature["speed"] > 7820 && $feature["height"] < 500
            //REST scripting example
            "endConditionExpression": "$feature["speed"] > 7820 && $feature["height"] < 500"
            ```
        </StyledTableCell>
    </StyledTableRow>
    <StyledTableRow>
        <StyledTableCell cellStyle="markdown">
            `outputMode`
            (Optional)
        </StyledTableCell>
        <StyledTableCell cellStyle="markdown">
            Determines which features are returned. Two modes are available:
            -   `AllFeatures`—All of the input features are returned. This is the default.
            -   `Incidents`—Only feature that were found to be incident are returned.
            
            REST examples
            ```javascript
            //REST web example
            AllFeatures
            //REST scripting example
            "outputMode": "AllFeatures"
            ```
        </StyledTableCell>
    </StyledTableRow>
    <StyledTableRow>
        <StyledTableCell cellStyle="markdown">
            `timeBoundarySplit`
            (Optional)
        </StyledTableCell>
        <StyledTableCell cellStyle="markdown">
            <GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_9D93A3DC_0BC3_4112_9F02_01A1C73B2A30 />
            <GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_BC568A80_67D1_4E15_AF84_938865F9BEFB />
            
            REST examples
            ```javascript
            //REST web example
            2
            //REST scripting example
            "timeBoundarySplit": 2
            ```
        </StyledTableCell>
    </StyledTableRow>
    <StyledTableRow>
        <StyledTableCell cellStyle="markdown">
            `timeBoundarySplitUnit`
            (Optional)
        </StyledTableCell>
        <StyledTableCell cellStyle="markdown">
            <GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_C91B130A_FD09_424A_9B71_F26A2D394BD9 />
            <GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_26ADC962_2D43_443C_B197_E1B9B7BCB2CD />
            
            REST examples
            ```javascript
            //REST web example
            Weeks
            //REST scripting example
            "timeBoundarySplitUnit": "Weeks"
            ```
        </StyledTableCell>
    </StyledTableRow>
    <StyledTableRow>
        <StyledTableCell cellStyle="markdown">
            `timeBoundaryReference`
            (Optional)
        </StyledTableCell>
        <StyledTableCell cellStyle="markdown">
            <GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_87A951E6_B820_40ED_905E_38CFCD3D8D8E />
            
            REST examples
            ```javascript
            //REST web example
            9466835800000
            //REST scripting example
            "timeBoundaryReference": 946684800000
            ```
        </StyledTableCell>
    </StyledTableRow>
    <StyledTableRow>
        <StyledTableCell cellStyle="markdown">
            `outputName`
            (Required)
        </StyledTableCell>
        <StyledTableCell cellStyle="markdown">
            <GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_B66A5391_775F_4E9A_B717_F84D52A10572 />
            
            REST examples
            ```javascript
            //REST web example
            HurricaneIncidents
            //REST scripting example
            "outputName": "HurricaneIncidents"
            ```
        </StyledTableCell>
    </StyledTableRow>
    <StyledTableRow>
        <StyledTableCell cellStyle="markdown">
            `context`
            (Optional)
        </StyledTableCell>
        <StyledTableCell cellStyle="markdown">
            <GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_E671F554_89D2_4CAD_B032_525E1CE90C18 />
            <GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_9BD8524A_A4D0_4128_876A_6CA8568233A7 />
        </StyledTableCell>
    </StyledTableRow>
    <StyledTableRow>
        <StyledTableCell cellStyle="markdown">
            `f`
        </StyledTableCell>
        <StyledTableCell cellStyle="markdown">
            <GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_9B5D5783_E386_45F7_8EA8_88843A1BB484 />
            <GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_C771449E_6BA7_4CB4_9328_2C855A14B2B2 />
        </StyledTableCell>
    </StyledTableRow>
</StyledTable>

## Example usage

Below is a sample request URL for `DetectIncidents`:

```javascript
https://webadaptor.domain.com/server/rest/services/System/GeoAnalyticsTools/GPServer/DescribeDataset/submitJob?inputLayer={"url":"https://webadaptor.domain.com/server/rest/services/Hurricane/hurricaneTrack/0"}&trackFields=Hurricane Name&startConditionExpression=$feature["wind_speed"] > 111&endConditionExpression=$feature["speed"] > 7820 && $feature["height"] < 500&outputMode=Incidents&timeBoundarySplit=2&timeBoundarySplitUnit=Hours&timeBoundaryReference=946684800000&outputName=myOutput&context={"extent":{"xmin":-122.68,"ymin":45.53,"xmax":-122.45,"ymax":45.6,"spatialReference":{"wkid":4326}}}&f=json
```

 

## Response

<GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_9562E716_BEF8_4A70_A787_C7231BB32C3E />

<GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_CBCE73F1_60C0_4D53_BDE3_B2C3ACEBD24A />

<GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_EE2D677C_9158_4D61_A164_2444C6476C92 />

```javascript
https://<analysis url>/DetectIncidents/jobs/<jobId>
```

 

### Access results

<GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_03071520_C169_41C0_8E51_866D82061408 />

```javascript
https://<analysis-url>/DetectIncidents/jobs/<jobId>/results/output?token=<your token>&f=json
```

 

<StyledTable headers={"Response,Description"}>
    <StyledTableRow>
        <StyledTableCell cellStyle="markdown">
            `output`
        </StyledTableCell>
        <StyledTableCell cellStyle="markdown">
            The `output` features will be the same type of feature as the input. Tables are tables, points are points, lines are lines, and polygons are polygons. There will be two new fields: 
            -   `IncidentID`—This is a unique ID for each incident.
            -   `IncidentStatus`—This is the status of the incident. The status can be `null` if the feature is not an incident, `Started` when an incident begins, `OnGoing` while the incident condition is still being met, and `Ended` when the condition is no longer met. In a single track, there can be multiple strings of incidents. 
            ```javascript
            {"url": "https://<analysis-url>/DetectIncidents/jobs/<jobId>/results/output"}
            ```
            <GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_A0501D59_23F2_456F_AAFF_3BCC593D9E34 />
            <GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_A771740E_17FA_47C6_A2FC_6BF0B76090CA />
        </StyledTableCell>
    </StyledTableRow>
</StyledTable>
