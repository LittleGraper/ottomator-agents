---
title: "Forest-based Classification And Regression"
description: "API reference for the Forest-based Classification And Regression task available through the ArcGIS GeoAnalytics Server service."
slug: "forest-based-classification-and-regression"
url: "/geoanalytics/tasks/forest-based-classification-and-regression"
redirectFrom:
  - /forest-based-classification-and-regression/
guid: "GUID-583DA6C3-C8CB-4FB0-B79C-9A37E23A4824"
migratedTopicMetadata:
  FTITLE: "Forest-based Classification and Regression"
  FDESCRIPTION: "Template conversion"
  FCHANGES: ""
  FISHRELEASELABEL: ""
  FESRISOFTWARERELEASE: ""
  FESRITAGCLOUD: ""
  FESRIRECREATIONPROCEDURE: ""
  FESRIPRODUCTLIFECYCLE: "10.8 - *"
  CREATED-ON: "14/11/2019 16:44:43"
  FAUTHOR: "sambrose"
  FSTATUS: "Released"
  MODIFIED-ON: "15/11/2019 14:11:26"
  VERSION: "2"
  FRESOLUTION: ""
  DOC-LANGUAGE: "en"
  FISHREVCOUNTER: "2"
  ED: "GUID-602A7128-5AB6-4979-9181-7FCFF07A6B8C"
  FUSERGROUP: "VUSERGROUPARCGISONLINEDOC"
  READ-ACCESS: ""
restInfoMetadata:
  apiPath: /ForestBasedClassificationAndRegression
  urlSegments:
    - name: <geoanalytics-url>
      url: /geoanalytics-tasks
    - name: /ForestBasedClassificationAndRegression
  methods: []
  sslOnly: 'no'
  versionIntroduced: '10.7'
---

import GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_DC085569_B522_4EE0_B0B5_2F7A608B8064 from "../../snippets/GUID-53340951-6261-4C65-BAA3-4AF9D206C6D2/_GUID-DC085569-B522-4EE0-B0B5-2F7A608B8064";
import GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_B66A5391_775F_4E9A_B717_F84D52A10572 from "../../snippets/GUID-53340951-6261-4C65-BAA3-4AF9D206C6D2/_GUID-B66A5391-775F-4E9A-B717-F84D52A10572";
import GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_E671F554_89D2_4CAD_B032_525E1CE90C18 from "../../snippets/GUID-53340951-6261-4C65-BAA3-4AF9D206C6D2/_GUID-E671F554-89D2-4CAD-B032-525E1CE90C18";
import GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_9BD8524A_A4D0_4128_876A_6CA8568233A7 from "../../snippets/GUID-53340951-6261-4C65-BAA3-4AF9D206C6D2/_GUID-9BD8524A-A4D0-4128-876A-6CA8568233A7";
import GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_9B5D5783_E386_45F7_8EA8_88843A1BB484 from "../../snippets/GUID-53340951-6261-4C65-BAA3-4AF9D206C6D2/_GUID-9B5D5783-E386-45F7-8EA8-88843A1BB484";
import GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_C771449E_6BA7_4CB4_9328_2C855A14B2B2 from "../../snippets/GUID-53340951-6261-4C65-BAA3-4AF9D206C6D2/_GUID-C771449E-6BA7-4CB4-9328-2C855A14B2B2";
import GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_9562E716_BEF8_4A70_A787_C7231BB32C3E from "../../snippets/GUID-53340951-6261-4C65-BAA3-4AF9D206C6D2/_GUID-9562E716-BEF8-4A70-A787-C7231BB32C3E";
import GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_CBCE73F1_60C0_4D53_BDE3_B2C3ACEBD24A from "../../snippets/GUID-53340951-6261-4C65-BAA3-4AF9D206C6D2/_GUID-CBCE73F1-60C0-4D53-BDE3-B2C3ACEBD24A";
import GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_EE2D677C_9158_4D61_A164_2444C6476C92 from "../../snippets/GUID-53340951-6261-4C65-BAA3-4AF9D206C6D2/_GUID-EE2D677C-9158-4D61-A164-2444C6476C92";
import GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_03071520_C169_41C0_8E51_866D82061408 from "../../snippets/GUID-53340951-6261-4C65-BAA3-4AF9D206C6D2/_GUID-03071520-C169-41C0-8E51-866D82061408";
import GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_A771740E_17FA_47C6_A2FC_6BF0B76090CA from "../../snippets/GUID-53340951-6261-4C65-BAA3-4AF9D206C6D2/_GUID-A771740E-17FA-47C6-A2FC-6BF0B76090CA";
import GAX_DEPRECATION_NOTICE from "../../snippets/GUID-53340951-6261-4C65-BAA3-4AF9D206C6D2/_gax-general-deprecation-notice.mdx";

## Description

<GAX_DEPRECATION_NOTICE />

![Forest-based Classification And Regression](../../images/GUID-F82B8235-8752-4246-9069-A6CB4827F07C-web.png)

The `ForestBasedClassificationAndRegression` operation creates models and generates predictions using an adaptation of Leo Breiman's random forest algorithm, which is a supervised machine learning method. Predictions can be performed for both categorical variables (classification) and continuous variables (regression). Explanatory variables can take the form of fields in the attribute table of the training features. In addition to validation of model performance on the training data, predictions can be made to another feature dataset.

The following are examples:

-   You have seagrass occurrence and a number of environmental explanatory variables that have been enriched using a multivariable grid to calculate distances to factories upstream and major ports. Future seagrass occurrence can be predicted based on future projections for those same environmental explanatory variables.
-   You have crop yield data at hundreds of farms across the country, along with other attributes at each of those farms (number of employees, acreage, and so on). Using this data, you can provide a set of features representing farms where you don't have crop yield (but you do have all of the other variables), and make a prediction about crop yield.
-   Housing values can be predicted based on the prices of houses sold in the current year. The sale price of homes sold, along with information about the number of bedrooms, distance to schools, proximity to major highways, average income, and crime counts, can be used to predict sale prices of similar homes.

##  Request parameters 

<StyledTable headers={"Parameter,Details"}>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `predictionType`
         (Required)
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         Specifies the operation mode of the tool. The tool can be run to train a model to only assess performance or to train a model and predict features. Prediction types are as follows:
         -   `Train`—This is the default. A model will be trained, but no predictions will be generated. Use this option to assess the accuracy of your model before generating predictions.
         -   `TrainAndPredict`—Predictions or classifications will be generated for features. Explanatory variables must be provided for both the training features and the features to be predicted. The output of this option will be a feature service, model diagnostics, and an optional table of variable importance.
         
		 REST examples
         ```javascript
         //REST web example
         Train
         //REST scripting example
         "predictionType": "TrainAndPredict"
         ```
      </StyledTableCell>
   </StyledTableRow>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `inFeatures`
         (Required)
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         The features that will be used to train the dataset. This layer must include fields representing the variable to predict and the explanatory variables.
         <GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_DC085569_B522_4EE0_B0B5_2F7A608B8064 />
         REST examples
         ```javascript
         //REST web example
         {"url": "https://myportal.domain.com/server/rest/services/Hosted/hurricaneTrack/FeatureServer/0", "filter": "Month = 'September'"}
         //REST scripting example
         "inFeatures": {"url": "https://myportal.domain.com/server/rest/services/Hosted/hurricaneTrack/FeatureServer/0", "filter": "Month = 'September'"}
         ```
      </StyledTableCell>
   </StyledTableRow>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `featuresToPredict`
         (Required if using `TrainAndPredict` )
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         A feature layer representing locations where predictions will be made. This layer must include explanatory variable fields that correspond to fields used in `inFeatures`. This parameter is only used when `predictionType` is `TrainAndPredict` and is required in that case.
         <GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_DC085569_B522_4EE0_B0B5_2F7A608B8064 />
         REST examples
         ```javascript
         //REST web example
         {"url": "https://myportal.domain.com/server/rest/services/Hosted/hurricaneTrack/FeatureServer/0", "filter": "Month = 'September'"}
         //REST scripting example
         "featuresToPredict": {"url": "https://myportal.domain.com/server/rest/services/Hosted/hurricaneTrack/FeatureServer/0", "filter": "Month = 'September'"}
         ```
      </StyledTableCell>
   </StyledTableRow>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `variablePredict`
         (Required)
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         The variable from the `inFeatures` parameter containing the values to be used to train the model and a Boolean denoting whether it's categorical. This field contains known (training) values of the variable that will be used to predict at unknown locations.
         
		 REST examples
         ```javascript
         //REST web example
         {"fieldName": "variablePredict", "categorical": true}
         //REST scripting example
         "variablePredict": {"fieldName": "variablePredict", "categorical": true}
         ```
      </StyledTableCell>
   </StyledTableRow>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `explanatoryVariables`
         (Required)
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         A list of fields representing the explanatory variables and a Boolean value denoting whether the fields are categorical. The explanatory variables help predict the value or category of the `variablePredict` parameter. Use the categorical parameter for any variables that represent classes or categories (such as land cover or presence or absence). Specify the variable as `true`  for any that represent classes or categories such as land cover or presence or absence and `false`  if the variable is continuous.
         In the example below, `fieldName` is the name of the field in the `inFeatures` used to predict the `variablePredict`, and categorical is either `true` or `false`. A string field should always be set as `true`, and a continuous value should always be set as `false`.
         
		 REST examples
         ```javascript
         //REST web example
         [{"fieldName": "CrimeType", "categorical": true},{"fieldName": "population", "categorical": false}]
         //REST scripting example
         "variablePredict": [{"fieldName": "isSunny", "categorical": true},{"fieldName": "isWeekend","categorical": true},{"fieldName": "hoursOutside", "categorical": false}]
         ```
      </StyledTableCell>
   </StyledTableRow>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `numberOfTrees`
         (Optional)
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         The number of trees to create in the forest model. More trees will generally result in more accurate model prediction, but the model will take longer to calculate. The default number of trees is 100. Values must be greater than 0.
         
		 REST examples
         ```javascript
         //REST web example
         20
         //REST scripting example
         "numberOfTrees": 50
         ```
      </StyledTableCell>
   </StyledTableRow>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `minimumLeafSize`
         (Optional)
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         The minimum number of observations required to keep a leaf (that is, the terminal node on a tree without further splits). The default minimum for regression is 5, and the default for classification is 1. For very large data, increasing these numbers will decrease the run time of the tool.
         
		 REST examples
         ```javascript
         //REST web example
         3
         //REST scripting example
         "minimumLeafSize": 6
         ```
      </StyledTableCell>
   </StyledTableRow>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `maximumTreeDepth`
         (Optional)
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         The maximum number of splits that will be made down a tree. Using a large maximum depth, more splits will be created, which may increase the chances of overfitting the model. The default is data driven and depends on the number of trees created and the number of variables included.
         
		 REST examples
         ```javascript
         //REST web example
         14
         //REST scripting example
         "minimumLeafSize": 10
         ```
      </StyledTableCell>
   </StyledTableRow>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `sampleSize`
         (Optional)
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         The percentage of the `inFeatures` used for each decision tree. The default is 100 percent of the data. Samples for each tree are taken randomly from two-thirds of the data specified. Each decision tree in the forest is created using a random sample or subset (approximately two-thirds) of the training data available. Using a lower percentage of the input data for each decision tree increases the speed of the tool for very large dataset.
         
		 REST examples
         ```javascript
         //REST web example
         95
         //REST scripting example
         "sampleSize": 70
         ```
      </StyledTableCell>
   </StyledTableRow>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `randomVariables`
         (Optional)
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         The number of explanatory variables used to create each decision tree. Each of the decision trees in the forest is created using a random subset of the explanatory variables specified. Increasing the number of variables used in each decision tree will increase the chances of overfitting your model, particularly if there are one or two dominate variables. A common practice is to use the square root of the total number of explanatory variables if your `variablePredict` is categorical, or to divide the total number of explanatory variables by 3 if `variablePredict` is numeric.
         
		 REST examples
         ```javascript
         //REST web example
         3
         //REST scripting example
         "randomVariables": 2
         ```
      </StyledTableCell>
   </StyledTableRow>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `percentageForValidation`
         (Optional)
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         The percentage (between 0 percent and 50 percent) of `inFeatures` to reserve as the test dataset for validation. The default is 10 percent. The model will be trained without its random subset of data, and the observed values for those features will be compared to the predicted value.
         
		 REST examples
         ```javascript
         //REST web example
         15
         //REST scripting example
         "percentageForValidation": 45
         ```
      </StyledTableCell>
   </StyledTableRow>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `createVariableOfImportanceTable`
         (Optional)
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         A Boolean that specifies whether an output table will be generated that contains information describing the importance of each explanatory variable used in the model created.
         Values: `true` \| `false`
         
		 REST examples
         ```javascript
         //REST web example
         false
         //REST scripting example
         "createVariableImportanceTable": false
         ```
      </StyledTableCell>
   </StyledTableRow>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `explanatoryVariableMatching`
         (Optional)
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         A list of the `explanatoryVariables` specified from the `inFeatures` and their corresponding fields from the `featuresToPredict`. By default, if an `explanatoryVariable` is not mapped, it will match to a field with the same name in the `featuresToPredict`. This parameter is only used if there is a `featuresToPredict` input. You do not need to use it if the names and types of the fields match between your two input datasets.
         `predictionLayerField` is the name of a field specified in the `explanatoryVariables` parameter and `trainingLayerField` is the field that will match the field in `explanatoryVariables`.
         
		 REST examples
         ```javascript
         //REST web example
         [{"predictionLayerField": "CrimeType", "trainingLayerField": "TypeOfCrime"},{"predictionLayerField": "population", "trainingLayerField": "population"}]
         //REST scripting example
         "variablePredict": [{"predictionLayerField": "isSunny", "trainingLayerField": "isSunny2010"}]
         ```
      </StyledTableCell>
   </StyledTableRow>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `outputTrainedName`
         (Required)
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         <GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_B66A5391_775F_4E9A_B717_F84D52A10572 />
         REST examples
         ```javascript
         //REST web example
         myOutput
         //REST scripting example
         "outputName": "myOutput"
         ```
      </StyledTableCell>
   </StyledTableRow>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `context`
         (Optional)
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         <GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_E671F554_89D2_4CAD_B032_525E1CE90C18 />
         <GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_9BD8524A_A4D0_4128_876A_6CA8568233A7 />
      </StyledTableCell>
   </StyledTableRow>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `f`
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         <GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_9B5D5783_E386_45F7_8EA8_88843A1BB484 />
         <GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_C771449E_6BA7_4CB4_9328_2C855A14B2B2 />
      </StyledTableCell>
   </StyledTableRow>
</StyledTable>

## Example usage

Below is a sample request URL for `ForestBasedClassificationAndRegression`:

```javascript
https://machine.domain.com/webadaptor/rest/services/System/GeoAnalyticsTools/GPServer/FindHotSpots/submitJob?
predictionType=Train&inFeatures={"url":"https://webadaptor.domain.com/server/rest/services/Hurricane/hurricaneTrack/0"}&featuresToPredict={"url":"https://webadaptor.domain.com/server/rest/services/USA/cities/0"}&variablePredict={"fieldName":"shelterCapacity","categorical":true}&explanatoryVariables={"fieldName":"townDensity","categorical":true}&numberOfTrees=20&minimumLeafSize=6&maximumTreeDepth=10&sampleSize=95&randomVariables=3&percentageForValidation=10&createVariableOfImportanceTab=false&explanatoryVariableMatching=[{"predictionLayerField":"Hurricane2019","trainingLayerField":"hurricanesIn2019"},{"predictionLayerField":"ShelterLocations","trainingLayerField":"CorpusChristiShelters"&outputTrainedName=myOutput&context={"extent":{"xmin":-122.68,"ymin":45.53,"xmax":-122.45,"ymax":45.6,"spatialReference":{"wkid":4326}}}&f=json
```

 

## Response

<GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_9562E716_BEF8_4A70_A787_C7231BB32C3E />

<GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_CBCE73F1_60C0_4D53_BDE3_B2C3ACEBD24A />

<GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_EE2D677C_9158_4D61_A164_2444C6476C92 />

```javascript
https://<analysis url>/ForestBasedClassificationAndRegression/jobs/<jobId>
```

 

### Access results

<GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_03071520_C169_41C0_8E51_866D82061408 />

```javascript
https://<analysis-url>/ForestBasedClassificationAndRegression/jobs/<jobId>/results/<response type>?token=<your token>&f=json
```

 

<StyledTable headers={"Response,Description"}>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `outputTrained`
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         The input features that are fit to the model. The type of feature (point, line, or polygon) depends on the input layers.
         ```javascript
         {"url": "https://<analysis-url>/ForestBasedClassificationAndRegression/jobs/<jobId>/results/outputTrained"}
         ```
         The result has properties for parameter name, data type, and value. The contents of `value` depend on the `outputName` parameter provided in the initial request. The `value`  contains the URL of the feature service layer.
         ```javascript
         {
         "paramName":"outputTrained",
         "dataType":"GPRecordSet",
         "value":{"url":"<hosted featureservice layer url>"}}
         ```
         <GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_A771740E_17FA_47C6_A2FC_6BF0B76090CA />
      </StyledTableCell>
   </StyledTableRow>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `outputPredicted`
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         The features predicted using the model. The type of feature (table, point, line, or polygon) depends on the input layers. This result is optional and is only returned when `featureToPredict` is provided as input.
         ```javascript
         {"url": "https://<analysis-url>/ForestBasedClassificationAndRegression/jobs/<jobId>/results/outputPredicted"}
         ```
      </StyledTableCell>
   </StyledTableRow>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `variableOfImportance`
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         A table representing the variable of importance from the model fit. This result is optional and is only returned when `createVariableImportanceTable` is true.
         ```javascript
         {"url": "https://<analysis-url>/ForestBasedClassificationAndRegression/jobs/<jobId>/results/variableOfImportance"}
         ```
      </StyledTableCell>
   </StyledTableRow>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `processInfo`
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         The `processInfo` parameter contains strings that summarize the `ForestBasedClassificationAndRegression` result. These strings are used for reporting tool results. You can create custom reports for your application using these strings. There are four parts in the returned JSON as follows:
         -   `messageCode`—The serial number for each unique message
         -   `message`—Text that may or may not contain parameters (in `${paramsName}` format) that must be replaced by values
         -   `params`—A dictionary of the keys and values to be inserted into the `${paramsName}` parameter in the message
         -   `style`—The formatting of the report produced by the Forest-based Classification And Regression tool in the map viewer.
         ```javascript
         {
         "messageCode" : "SS_84507",
         "message" : ["Attribute", "Min", "Max", "SD", "Mean","Input"],
         "params" : {},
         "style" : "<table><tr><th></th><th></th><th></th><th></th><th></th><th></th></tr>"
         }
         ```
      </StyledTableCell>
   </StyledTableRow>
</StyledTable>
