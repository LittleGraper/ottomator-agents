---
title: "Create Space Time Cube"
description: "API reference for the Create Space Time Cube task available through the ArcGIS GeoAnalytics Server service."
slug: "create-space-time-cube"
url: "/geoanalytics/tasks/create-space-time-cube"
redirectFrom:
  - /create-space-time-cube/
guid: "GUID-CE74FA8E-CCFC-41FB-9514-4A451ED39045"
migratedTopicMetadata:
  FTITLE: "Create Space Time Cube"
  FDESCRIPTION: "Template conversion"
  FCHANGES: ""
  FISHRELEASELABEL: ""
  FESRISOFTWARERELEASE: ""
  FESRITAGCLOUD: ""
  FESRIRECREATIONPROCEDURE: ""
  FESRIPRODUCTLIFECYCLE: "11.1 - *"
  CREATED-ON: "02/12/2022 15:55:39"
  FAUTHOR: "nslocum"
  FSTATUS: "Released"
  MODIFIED-ON: "24/02/2023 13:38:35"
  VERSION: "2"
  FRESOLUTION: ""
  DOC-LANGUAGE: "en"
  FISHREVCOUNTER: "4"
  ED: "GUID-55A82C4E-9870-47DD-B66E-CAE8C583AC7B"
  FUSERGROUP: "VUSERGROUPARCGISONLINEDOC"
  READ-ACCESS: ""
restInfoMetadata:
  apiPath: /CreateSpaceTimeCube
  urlSegments:
    - name: <geoanalytics-url>
      url: /geoanalytics-tasks
    - name: /CreateSpaceTimeCube
  methods: []
  sslOnly: 'no'
  versionIntroduced: '10.5'
---

import GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_DC085569_B522_4EE0_B0B5_2F7A608B8064 from "../../snippets/GUID-53340951-6261-4C65-BAA3-4AF9D206C6D2/_GUID-DC085569-B522-4EE0-B0B5-2F7A608B8064";
import GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_2707E332_E968_4054_8834_6F9906C98C3E from "../../snippets/GUID-53340951-6261-4C65-BAA3-4AF9D206C6D2/_GUID-2707E332-E968-4054-8834-6F9906C98C3E";
import GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_8280F941_0439_4805_B034_1E224F28280C from "../../snippets/GUID-53340951-6261-4C65-BAA3-4AF9D206C6D2/_GUID-8280F941-0439-4805-B034-1E224F28280C";
import GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_26ADC962_2D43_443C_B197_E1B9B7BCB2CD from "../../snippets/GUID-53340951-6261-4C65-BAA3-4AF9D206C6D2/_GUID-26ADC962-2D43-443C-B197-E1B9B7BCB2CD";
import GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_2B00F22B_A072_4DDD_9D4C_D1485E78BB54 from "../../snippets/GUID-53340951-6261-4C65-BAA3-4AF9D206C6D2/_GUID-2B00F22B-A072-4DDD-9D4C-D1485E78BB54";
import GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_86A6CA78_F7FB_4827_B1B7_48A8C372CD5B from "../../snippets/GUID-53340951-6261-4C65-BAA3-4AF9D206C6D2/_GUID-86A6CA78-F7FB-4827-B1B7-48A8C372CD5B";
import GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_9B5D5783_E386_45F7_8EA8_88843A1BB484 from "../../snippets/GUID-53340951-6261-4C65-BAA3-4AF9D206C6D2/_GUID-9B5D5783-E386-45F7-8EA8-88843A1BB484";
import GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_C771449E_6BA7_4CB4_9328_2C855A14B2B2 from "../../snippets/GUID-53340951-6261-4C65-BAA3-4AF9D206C6D2/_GUID-C771449E-6BA7-4CB4-9328-2C855A14B2B2";
import GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_9562E716_BEF8_4A70_A787_C7231BB32C3E from "../../snippets/GUID-53340951-6261-4C65-BAA3-4AF9D206C6D2/_GUID-9562E716-BEF8-4A70-A787-C7231BB32C3E";
import GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_CBCE73F1_60C0_4D53_BDE3_B2C3ACEBD24A from "../../snippets/GUID-53340951-6261-4C65-BAA3-4AF9D206C6D2/_GUID-CBCE73F1-60C0-4D53-BDE3-B2C3ACEBD24A";
import GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_EE2D677C_9158_4D61_A164_2444C6476C92 from "../../snippets/GUID-53340951-6261-4C65-BAA3-4AF9D206C6D2/_GUID-EE2D677C-9158-4D61-A164-2444C6476C92";
import GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_03071520_C169_41C0_8E51_866D82061408 from "../../snippets/GUID-53340951-6261-4C65-BAA3-4AF9D206C6D2/_GUID-03071520-C169-41C0-8E51-866D82061408";
import GAX_DEPRECATION_NOTICE from "../../snippets/GUID-53340951-6261-4C65-BAA3-4AF9D206C6D2/_gax-general-deprecation-notice.mdx";

## Description

<GAX_DEPRECATION_NOTICE />

![Create Space Time Cube](../../images/GUID-6D09725A-D965-45A9-BD5B-1DB6238997EB-web.png)

The `CreateSpaceTimeCube` operation works with a layer of point features that are time enabled. It aggregates the data into a 3D cube of space-time bins. When determining the point in a space-time bin relationship, statistics about all points in the space-time bins are calculated and assigned to the bins. The most basic statistic is the number of points in the bins, but you can calculate other statistics as well.

For example, suppose you have point feature of crimes in a city, and you want to summarize the number of crimes in both space and time. You can calculate the space-time cube for the dataset, and use the cube to further analyze trends such as emerging hot and cold spots.

##  Request parameters 

<StyledTable headers={"Parameter,Details"}>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `pointLayer`
         (Required)
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         The point features that will be aggregated into the bins specified in geographical size by the `binSize` and `binSizeUnit` parameters and temporal size by the `timeStepInterval` and `timeStepIntervalUnit` parameters.
         <GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_DC085569_B522_4EE0_B0B5_2F7A608B8064 />
         <Note type={"note"}>
            <GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_2707E332_E968_4054_8834_6F9906C98C3E />
         </Note>

         REST examples
         ```javascript
         //REST web example
         {"url": "https://myportal.domain.com/server/rest/services/Hosted/hurricaneTrack/FeatureServer/0", "filter": "Month = 'September'"}

         //REST scripting example
         "pointLayer": {"url": "https://myportal.domain.com/server/rest/services/Hosted/hurricaneTrack/FeatureServer/0", "filter": "Month = 'September'"}
         ```
      </StyledTableCell>
   </StyledTableRow>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `binSize`
         (Required)
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         The distance for the bins into which the `pointLayer` value will be aggregated.

         REST examples
         ```javascript
         //REST web example
         108.3

         //REST scripting example
         "binSize": 100
         ```
      </StyledTableCell>
   </StyledTableRow>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `binSizeUnit`
         (Required)
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         The distance unit for the bins into which the `pointLayer` value will be aggregated.
         <GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_8280F941_0439_4805_B034_1E224F28280C />

         REST examples
         ```javascript
         //REST web example
         Meters

         //REST scripting example
         "binSizeUnit": "Miles"
         ```
      </StyledTableCell>
   </StyledTableRow>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `timeStepInterval`
         (Required)
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         A numeric value that specifies the duration of the time bin.

         REST examples
         ```javascript
         //REST web example
         20

         //REST scripting example
         "timeStepInterval": 20
         ```
      </StyledTableCell>
   </StyledTableRow>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `timeStepIntervalUnit`
         (Required)
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         The duration unit of the time bin.
         <GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_26ADC962_2D43_443C_B197_E1B9B7BCB2CD />

         REST examples
         ```javascript
         //REST web example
         Minutes

         //REST scripting example
         "timeStepIntervalUnit": "Minutes"
         ```
      </StyledTableCell>
   </StyledTableRow>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `timeStepAlignment`
         (Optional)
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         Defines how aggregation will occur based on a given `timeInterval` value. Options are as follows:
         -   `StartTime`—Time is aligned to the first feature in time.
         -   `EndTime`—Time is aligned to the last feature in time.
         -   `ReferenceTime`—Time is aligned to a specified time.

         REST examples
         ```javascript
         //REST web example
         StartTime

         //REST scripting example
         "timeStepAlignment": "StartTime"
         ```
      </StyledTableCell>
   </StyledTableRow>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `timeStepReference`
         (Required if `timeStepAlignment` is `ReferenceTime`)
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         A date that specifies the reference time to align the time bins to if `ReferenceTime` is specified for `timeIntervalAlignment`. This time is in milliseconds from epoch.

         REST examples
         ```javascript
         //REST web example
         946684800000

         //REST scripting example
         "timeStepReference": 946684800000
         ```
      </StyledTableCell>
   </StyledTableRow>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `summaryFields`
         (Optional)
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         A list of field names, statistical summary types, and the fill option for empty values that will be calculated for all points in each space-time bin. The count of points in each bin is always returned. By default, all statistics are returned.

         `onStatisticField` specifies the name of the fields in the target layer. `statisticType` can be specified as one of the following:
         -   `Sum`—Adds the total value of all the points in each polygon. This is used for numeric fields.
         -   `Mean`—Calculates the average of all the points in each polygon. This is used for numeric fields.
         -   `Min`—Finds the smallest value of all the points in each polygon. This is used for numeric fields.
         -   `Max`—Finds the largest value of all the points in each polygon. This is used for numeric fields.
         -   `Std`—Finds the standard deviation of all the points in each polygon. This is used for numeric fields.
         -   `Count`—Totals the number of string for all the points in each polygon. This is used for string fields.

         `fillType`can be specified as one of the following:
         -   `zeros`—Fills missing values with zeros. This is most appropriate for fields representing counts.
         -   `spatialNeighbors`—Fills missing values by averaging the spatial neighbors. Neighbors are determined by a second degree queens contiguity.
         -   `spaceTimeNeighbors`—Fills missing values by averaging the space-time neighbors. Neighbors are determined by a second degree queens contiguity in both space and time.
         -   `temporalTrend`—Interpolates values using a univariate spline.

         REST examples
         ```javascript
         //REST web example
         [{"statisticType": "Count", "onStatisticField": "newEmployees", "fillType": "zeros"},{"statisticType": "Sum", "onStatisticField": "Annual_Sales", "fillType": "temporalTrend"}]

         //REST scripting example
         "summaryFields": [{"statisticType": "Count", "onStatisticField": "newEmployees", "fillType": "zeros"},{"statisticType": "Sum", "onStatisticField": "Annual_Sales", "fillType": "temporalTrend"}]
         ```
      </StyledTableCell>
   </StyledTableRow>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `outputName`
         (Required)
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         Defines the name of the space-time cube (netCDF) created by the operation.

         REST examples
         ```javascript
         //REST web example
         myOutput

         //REST scripting example
         "outputName": "myOutput"
         ```
      </StyledTableCell>
   </StyledTableRow>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `context`
         (Optional)
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         <GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_2B00F22B_A072_4DDD_9D4C_D1485E78BB54 />
         <GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_86A6CA78_F7FB_4827_B1B7_48A8C372CD5B />
      </StyledTableCell>
   </StyledTableRow>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `f`
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         <GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_9B5D5783_E386_45F7_8EA8_88843A1BB484 />
         <GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_C771449E_6BA7_4CB4_9328_2C855A14B2B2 />
      </StyledTableCell>
   </StyledTableRow>
</StyledTable>

## Example usage

The example below is a sample request URL for `CreateSpaceTimeCube`:

```javascript
https://webadaptor.domain.com/server/rest/services/System/GeoAnalyticsTools/GPServer/CreateSpaceTimeCube/submitJob?pointLayer={"url":"https://webadaptor.domain.com/server/rest/services/Hurricane/hurricaneTrack/0"}&binSize=100&binSizeUnit=Meters&timeStepInterval=20&timeStepIntervalUnit=Minutes&timeStepAlignment=StartTime&summaryFields=[{"statisticType": "Mean", "onStatisticField": "Annual_Sales"},{"statisticType": "Sum", "onStatisticField": "Annual_Sales"}]&outputName=myOutput&context={"extent":{"xmin":-122.68,"ymin":45.53,"xmax":-122.45,"ymax":45.6,"spatialReference":{"wkid":4326}}}&f=json
```

 

## Response

<GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_9562E716_BEF8_4A70_A787_C7231BB32C3E />

<GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_CBCE73F1_60C0_4D53_BDE3_B2C3ACEBD24A />

<GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_EE2D677C_9158_4D61_A164_2444C6476C92 />

```javascript
https://<analysis url>/CreateSpaceTimeCube/jobs/<jobId>
```

 

### Access results

<GUID_53340951_6261_4C65_BAA3_4AF9D206C6D2_GUID_03071520_C169_41C0_8E51_866D82061408 />

```javascript
https://<analysis-url>/CreateSpaceTimeCube/jobs/<jobId>/results/outputCube?token=<your token>&f=json
```

 

<StyledTable headers={"Response,Description"}>
   <StyledTableRow>
      <StyledTableCell cellStyle="markdown">
         `outputCube`
      </StyledTableCell>
      <StyledTableCell cellStyle="markdown">
         `outputCube` will always contain a netCDF cube. The number of resulting bins in the cube depends on the location of the `inputPoints` value and the bin size settings.

         If the `summaryFields` parameter is specified in the task request, the layer will compute the `count` statistic, as well as anything specified in `summaryFields`.
         ```javascript
         {"url": "https://<analysis-url>/CreateSpaceTimeCube/jobs/<jobId>/results/outputCube"}
         ```
         The result has properties for parameter name, data type, and value. The contents of `value` depend on the `outputName` parameter value provided in the initial request. The `value` parameter contains the URL of the output cube.
         ```javascript
         {
         "paramName":"outputCube",
         "dataType":"GPDataFile",
         "value":{"url":"<hosted feature service layer url>"}
         }
         ```
         When you browse to the output URL, the netCDF cube will automatically download to your local machine.
      </StyledTableCell>
   </StyledTableRow>
</StyledTable>
