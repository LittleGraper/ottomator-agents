---
title: "Optimal Region Connections"
description: "The OptimalRegionConnections task calculates the optimal connectivity network between two or more input regions."
slug: "optimal-region-connections"
url: "/optimal-region-connections"
guid: "GUID-23060AAA-2909-4C66-86C6-2170ACD356DC"
migratedTopicMetadata:
  FTITLE: "Optimal Region Connections"
  FDESCRIPTION: "New"
  FCHANGES: "Removing related resources re: https://devtopia.esri.com/WebGIS/arcgis-rest-api-documentation/issues/191"
  FISHRELEASELABEL: ""
  FESRISOFTWARERELEASE: ""
  FESRITAGCLOUD: ""
  FESRIRECREATIONPROCEDURE: ""
  FESRIPRODUCTLIFECYCLE: "10.8.1 - *"
  CREATED-ON: "14/09/2022 11:50:59"
  FAUTHOR: "tohara"
  FSTATUS: "Released"
  MODIFIED-ON: "20/09/2022 11:02:40"
  VERSION: "2"
  FRESOLUTION: ""
  DOC-LANGUAGE: "en"
  FISHREVCOUNTER: "3"
  ED: "GUID-3FA342B7-B3B7-43C9-B9C4-6C321880FD36"
  FUSERGROUP: ""
  READ-ACCESS: ""
restInfoMetadata:
  apiPath: /<serviceName>/RasterAnalysisTools/GPServer/OptimalRegionConnections
  urlSegments:
    - name: <root>
      url: /catalog
    - name: /<serviceName>/RasterAnalysisTools/GPServer/OptimalRegionConnections
  methods: []
  sslOnly: 'no'
  versionIntroduced: 10.8.1
---

import GUID_512E1710_163F_43F9_8ABC_FA35AE6DD5DF_GUID_1312381C_FE40_4BFE_8743_68EB949C6214 from "./snippets/GUID-512E1710-163F-43F9-8ABC-FA35AE6DD5DF/_GUID-1312381C-FE40-4BFE-8743-68EB949C6214";
import GUID_512E1710_163F_43F9_8ABC_FA35AE6DD5DF_GUID_3C3804F2_DF27_4AB4_8A26_39CB1316D7DD from "./snippets/GUID-512E1710-163F-43F9-8ABC-FA35AE6DD5DF/_GUID-3C3804F2-DF27-4AB4-8A26-39CB1316D7DD";
import GUID_512E1710_163F_43F9_8ABC_FA35AE6DD5DF_GUID_358B6C50_A4A3_4B48_BF46_CDA9A9F9BBA7 from "./snippets/GUID-512E1710-163F-43F9-8ABC-FA35AE6DD5DF/_GUID-358B6C50-A4A3-4B48-BF46-CDA9A9F9BBA7";
import GUID_512E1710_163F_43F9_8ABC_FA35AE6DD5DF_GUID_59BC6D2B_4DDF_47B1_87EB_007154B11B73 from "./snippets/GUID-512E1710-163F-43F9-8ABC-FA35AE6DD5DF/_GUID-59BC6D2B-4DDF-47B1-87EB-007154B11B73";
import GUID_512E1710_163F_43F9_8ABC_FA35AE6DD5DF_GUID_E671F554_89D2_4CAD_B032_525E1CE90C18 from "./snippets/GUID-512E1710-163F-43F9-8ABC-FA35AE6DD5DF/_GUID-E671F554-89D2-4CAD-B032-525E1CE90C18";
import GUID_512E1710_163F_43F9_8ABC_FA35AE6DD5DF_LI_1744B5CA044F44D8ABF2E27EF9BC9A27 from "./snippets/GUID-512E1710-163F-43F9-8ABC-FA35AE6DD5DF/_LI_1744B5CA044F44D8ABF2E27EF9BC9A27";
import GUID_512E1710_163F_43F9_8ABC_FA35AE6DD5DF_LI_AD9814DB26DA439EA899971516D5E44D from "./snippets/GUID-512E1710-163F-43F9-8ABC-FA35AE6DD5DF/_LI_AD9814DB26DA439EA899971516D5E44D";
import GUID_512E1710_163F_43F9_8ABC_FA35AE6DD5DF_LI_7566284934CF4B3BAFE1FBAA218408CB from "./snippets/GUID-512E1710-163F-43F9-8ABC-FA35AE6DD5DF/_LI_7566284934CF4B3BAFE1FBAA218408CB";
import GUID_512E1710_163F_43F9_8ABC_FA35AE6DD5DF_LI_2DDA48A24C404781BB03BF05B81B3C19 from "./snippets/GUID-512E1710-163F-43F9-8ABC-FA35AE6DD5DF/_LI_2DDA48A24C404781BB03BF05B81B3C19";
import GUID_512E1710_163F_43F9_8ABC_FA35AE6DD5DF_LI_E5BF6567427444E8B74C6B8212C56B99 from "./snippets/GUID-512E1710-163F-43F9-8ABC-FA35AE6DD5DF/_LI_E5BF6567427444E8B74C6B8212C56B99";
import GUID_512E1710_163F_43F9_8ABC_FA35AE6DD5DF_GUID_9B5D5783_E386_45F7_8EA8_88843A1BB484 from "./snippets/GUID-512E1710-163F-43F9-8ABC-FA35AE6DD5DF/_GUID-9B5D5783-E386-45F7-8EA8-88843A1BB484";
import GUID_512E1710_163F_43F9_8ABC_FA35AE6DD5DF_GUID_C771449E_6BA7_4CB4_9328_2C855A14B2B2 from "./snippets/GUID-512E1710-163F-43F9-8ABC-FA35AE6DD5DF/_GUID-C771449E-6BA7-4CB4-9328-2C855A14B2B2";
import GUID_512E1710_163F_43F9_8ABC_FA35AE6DD5DF_GUID_1702083F_151C_4A0C_AF36_0D0DD9E2563A from "./snippets/GUID-512E1710-163F-43F9-8ABC-FA35AE6DD5DF/_GUID-1702083F-151C-4A0C-AF36-0D0DD9E2563A";
import GUID_512E1710_163F_43F9_8ABC_FA35AE6DD5DF_GUID_4B398B66_01FD_40FB_9AEE_30371F0A8CD8 from "./snippets/GUID-512E1710-163F-43F9-8ABC-FA35AE6DD5DF/_GUID-4B398B66-01FD-40FB-9AEE-30371F0A8CD8";
import GUID_512E1710_163F_43F9_8ABC_FA35AE6DD5DF_GUID_ED11CCC7_40D3_4ADD_A679_A3F6964834ED from "./snippets/GUID-512E1710-163F-43F9-8ABC-FA35AE6DD5DF/_GUID-ED11CCC7-40D3-4ADD-A679-A3F6964834ED";
import GUID_512E1710_163F_43F9_8ABC_FA35AE6DD5DF_GUID_50D345C8_14F8_4A4A_AB1E_A6BBD19C49EF from "./snippets/GUID-512E1710-163F-43F9-8ABC-FA35AE6DD5DF/_GUID-50D345C8-14F8-4A4A-AB1E-A6BBD19C49EF";

## Description

![Optimal Region Connections diagram](./images/GUID-097BDD6E-0AD8-44F2-BB70-C5395F4B1AF4-web.png)

<GUID_512E1710_163F_43F9_8ABC_FA35AE6DD5DF_GUID_1312381C_FE40_4BFE_8743_68EB949C6214 />

The focus of `OptimalRegionConnections` is to define the optimum connections of least-cost paths between regions. On the resulting connections, the phenomenon can move from one region to any other region using the paths (possibly traveling through other regions).

The input to `OptimalRegionConnections` must be regions. A region is a connected series of cells (adjacent) with the same value. If you have disconnected cells with the same value, they are zones. Using zones as input to this task is not recommended. Optimal Region Connections connects every region to every other region, so all regions, and all cells in the regions, can be reached through the result.

### Example applications

Example applications of this service include the following:

-   Suitability modeling 

    From a suitability model, you have identified 10 of the best habitat patches for bobcats. You want the bobcats to move between the patches through the most effective network of wildlife corridors to maintain genetic diversity within the metapopulation.
-   Timber harvest 

    In a timber harvest, you want to create the most cost-efficient network of logging roads from which to extract the lumber.
-   Peacekeeping 

    In a military peacekeeping deployment, you have identified five areas at which to position troops and personnel. You want to develop the optimally connected supply routes between the bases.

## Request parameters

<StyledTable headers={"Parameter,Details"}>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`inputRegionsRasterOrFeatures` 

(Required)

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

The input regions that are to be connected by the least-cost network. Regions can be defined by either an image service or a feature service.

<GUID_512E1710_163F_43F9_8ABC_FA35AE6DD5DF_GUID_3C3804F2_DF27_4AB4_8A26_39CB1316D7DD />

Raster input examples:

```javascript
//Portal item as input raster
"inputRegionsRasterOrFeatures":{"itemId": <portal item id>}

//URL as input raster
"inputRegionsRasterOrFeatures":{"url":<image service layer url>}
```

 

Feature input examples:

```javascript
//Feature layer URL
"inputRegionsRasterOrFeatures":{"url": <feature service layer url>}

//Feature collection
"inputRegionsRasterOrFeatures":{"layerDefinition": {}, "featureSet": {}}
```

 

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`outputOptimalLinesName` 

(Required)

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

The name of the output line feature service that connects each input region.

Each path (or line) is uniquely numbered, and additional fields in the attribute table store specific information about the path. Those additional fields are the following:

-   PATHID—The unique identifier for the path
-   PATHCOST—The total accumulative distance or cost for the path
-   REGION1—The first region the path connects
-   REGION2—The other region the path connects

This information provides insight into the paths within the network.

Since each path is represented by a unique line, there will be multiple lines in locations where paths travel the same route.

<GUID_512E1710_163F_43F9_8ABC_FA35AE6DD5DF_GUID_358B6C50_A4A3_4B48_BF46_CDA9A9F9BBA7 />

Output feature service examples:

```javascript
//REST web example
myOutput

//REST scripting example
"outputOptimalLinesName" : "myOutput1"
```

 

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`inputBarrierRasterOrFeatures` 

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

The layer that defines the barriers to calculate the back direction around.

The barriers can be defined by an integer or a floating-point image service, or by a feature service.

For an image service barrier, the barrier must have a valid value, including zero, and the areas that are not barriers must be NoData.

Raster input examples:

```javascript
//Portal item as input raster
"inputBarrierRasterOrFeatures":"itemID": <portal item id>}

//URL as input raster
"inputBarrierRasterOrFeatures":{"url": <image service layer url>}

//Cloud raster as input raster
"inputBarrierRasterOrFeatures": {"uri": <cloud raster dataset uri>}

```

 

Feature input examples:

```javascript
//Feature layer URL
"inputBarrierRasterOrFeatures":{"url": 
<feature service layer url>}

//Feature collection
"inputBarrierRasterOrFeatures":{"layerDefinition": {}, "featureSet": {}}
```

 

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`inputCostRaster` 

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

A raster defining the impedance or cost to move planimetrically through each cell. The values of the cost raster can be integer or floating point. Negative and zero are invalid values but will be treated as very small positive cost values.

The value at each cell location represents the cost-per-unit distance for moving through the cell. Each cell location value is multiplied by the cell resolution while also compensating for diagonal movement to obtain the total cost of passing through the cell.

Cost raster values that are negative or zero are invalid but will be treated as small positive values. The accumulative cost algorithm is a multiplicative process, and it cannot calculate accumulative cost correctly if cost values are negative or zero.
If your cost raster does contain those values, and those locations are to represent areas that should be excluded from the analysis, those cells should be turned into NoData before running the tool. 
Note that NoData is treated as a barrier in this analysis, so any locations that are NoData in the input will be NoData in the result.

<GUID_512E1710_163F_43F9_8ABC_FA35AE6DD5DF_GUID_59BC6D2B_4DDF_47B1_87EB_007154B11B73 />

Examples:

```javascript
//Portal item as input raster
"inputCostRaster": {"itemId": <portal item id>}

//URL as input raster
"inputCostRaster": {"url": <image service layer url>}
```

 

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`outputNeighborConnectionsName` 

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

<GUID_512E1710_163F_43F9_8ABC_FA35AE6DD5DF_GUID_358B6C50_A4A3_4B48_BF46_CDA9A9F9BBA7 />

Output feature service examples:

```javascript
//REST web example
myOutput

//REST scripting example
"outputNeighborConnectionsName" : "myOutput2"
```

 

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`distanceMethod` 

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Determines whether to calculate the distance using a planar (flat earth) or a geodesic (ellipsoid) method.

-   `PLANAR` : The calculation will be performed on a projected flat plane using a 2D Cartesian coordinate system. This is the default method.
-   `GEODESIC` : Distances are calculated on the ellipsoid. Therefore, regardless of input or output projection, the results do not change.

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`connectionsWithinRegions` 

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Specifies whether the paths will continue and connect within the input regions.

-   `GENERATE_CONNECTIONS` : Paths will continue within the input regions to connect all paths that enter a region.
-   `NO_CONNECTIONS` : Paths will stop at the edges of the input regions and will not continue or connect within them.

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`context` 

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

<GUID_512E1710_163F_43F9_8ABC_FA35AE6DD5DF_GUID_E671F554_89D2_4CAD_B032_525E1CE90C18 />

-   <GUID_512E1710_163F_43F9_8ABC_FA35AE6DD5DF_LI_1744B5CA044F44D8ABF2E27EF9BC9A27 />
-   <GUID_512E1710_163F_43F9_8ABC_FA35AE6DD5DF_LI_AD9814DB26DA439EA899971516D5E44D />
-   <GUID_512E1710_163F_43F9_8ABC_FA35AE6DD5DF_LI_7566284934CF4B3BAFE1FBAA218408CB />
-   <GUID_512E1710_163F_43F9_8ABC_FA35AE6DD5DF_LI_2DDA48A24C404781BB03BF05B81B3C19 />
-   <GUID_512E1710_163F_43F9_8ABC_FA35AE6DD5DF_LI_E5BF6567427444E8B74C6B8212C56B99 />

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`f` 

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

<GUID_512E1710_163F_43F9_8ABC_FA35AE6DD5DF_GUID_9B5D5783_E386_45F7_8EA8_88843A1BB484 />

<GUID_512E1710_163F_43F9_8ABC_FA35AE6DD5DF_GUID_C771449E_6BA7_4CB4_9328_2C855A14B2B2 />

</StyledTableCell>

</StyledTableRow>

</StyledTable>

## Response

<GUID_512E1710_163F_43F9_8ABC_FA35AE6DD5DF_GUID_1702083F_151C_4A0C_AF36_0D0DD9E2563A />

<GUID_512E1710_163F_43F9_8ABC_FA35AE6DD5DF_GUID_4B398B66_01FD_40FB_9AEE_30371F0A8CD8 />

<GUID_512E1710_163F_43F9_8ABC_FA35AE6DD5DF_GUID_ED11CCC7_40D3_4ADD_A679_A3F6964834ED />

```javascript
https://<raster analysis tools url>/OptimalRegionConnections/jobs/<jobId>
```

 

<GUID_512E1710_163F_43F9_8ABC_FA35AE6DD5DF_GUID_50D345C8_14F8_4A4A_AB1E_A6BBD19C49EF />

```javascript
https://<raster analysis tools url>/OptimalRegionConnections/jobs/<jobId>/results/<output parameter>
```

 

## Example usage

Below is a sample request URL for `OptimalRegionConnections` .

```javascript
https://services.myserver.com/arcgis/rest/services/System/RasterAnalysisTools/GPServer/OptimalRegionConnections/submitJob
```

 

## JSON Response example

The response returns the `outputOptimumNetworkFeatures`  and `outputNeighborConnectionsFeatures`  output parameters, which have properties for parameter name, data type, and value. The content of value depends on the `outputOptimalLinesName`  and `outputNeighborConnectionsFeatures`  parameters provided in the initial request, affecting the output parameters, respectively. For example, if the `outputOptimalLinesName`  parameter is provided, the value for `outputOptimumNetworkFeatures`  will contain the feature service layer URL. If it was not included in the request, the value will contain a feature collection.

Network name included in request example:

```javascript
{
  "paramName":"resultLayer",
  "dataType":"GPString",
  "value":{"url":"<hosted feature service layer url>"
}
```

 

Network name not included in request example:

```javascript
{
  "paramName":"resultLayer",
  "dataType":"GPString",
  "value":{"layerDefinition": {}, "featureSet": {}}
}
```

 
