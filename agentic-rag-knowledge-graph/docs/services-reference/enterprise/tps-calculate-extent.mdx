---
title: "Calculate Extent"
uid: tps-calc-extent
description: "The calculateExtent operation calculates a custom area of interest (AOI) for a given product and version. The result can be specified as the value for the customAoi parameter of the generateProduct operation."
slug: "tps-calculate-extent"
url: "/tps-calculate-extent"
guid: "GUID-6849E830-6E48-446D-89F4-F7130FA3789D"
migratedTopicMetadata:
  FTITLE: "TPS Calculate Extent"
  FDESCRIPTION: ""
  FCHANGES: "New REST endpoint per 1557"
  FISHRELEASELABEL: ""
  FESRISOFTWARERELEASE: ""
  FESRITAGCLOUD: ""
  FESRIRECREATIONPROCEDURE: ""
  FESRIPRODUCTLIFECYCLE: "10.9.1 - *"
  CREATED-ON: "09/09/2021 10:44:08"
  FAUTHOR: "jaguirre"
  FSTATUS: "Released"
  MODIFIED-ON: "01/10/2021 15:34:09"
  VERSION: "1"
  FRESOLUTION: ""
  DOC-LANGUAGE: "en"
  FISHREVCOUNTER: "8"
  ED: "GUID-FAD1969E-020B-465B-B3A2-D5BD17BFB3E7"
  FUSERGROUP: ""
  READ-ACCESS: ""
restInfoMetadata:
  apiPath: /<serviceName>/TopographicProductionServer/calculateExtent
  urlSegments:
    - name: <root>
      url: /catalog
    - name: /<serviceName>/TopographicProductionServer/calculateExtent
  methods: 
    - get
  sslOnly: 'no'
  versionIntroduced: 10.9.1
  relatedResources:
    - name: Generate Product
      url: /tps-generate-product
  requiredCapability: Requires an ArcGIS GIS Server Advanced license and a Production Mapping or Defense Mapping server extension license
---

import GUID_0388E43D_C641_4E66_97EE_5C4E932EE3BA_GUID_2680DD44_F03A_444C_86E1_1624AF34BD55 from "./snippets/GUID-0388E43D-C641-4E66-97EE-5C4E932EE3BA/_GUID-2680DD44-F03A-444C-86E1-1624AF34BD55";
import GUID_0388E43D_C641_4E66_97EE_5C4E932EE3BA_GUID_BD0C4EE0_7864_4DD3_9692_AAED8631CB88 from "./snippets/GUID-0388E43D-C641-4E66-97EE-5C4E932EE3BA/_GUID-BD0C4EE0-7864-4DD3-9692-AAED8631CB88";
import GUID_0388E43D_C641_4E66_97EE_5C4E932EE3BA_GUID_4E2CCDCB_0BD8_4893_AEBD_116ED1495B86 from "./snippets/GUID-0388E43D-C641-4E66-97EE-5C4E932EE3BA/_GUID-4E2CCDCB-0BD8-4893-AEBD-116ED1495B86";
import GUID_0388E43D_C641_4E66_97EE_5C4E932EE3BA_GUID_6EC27F8A_F9F1_4939_ACF2_E02F31317C79 from "./snippets/GUID-0388E43D-C641-4E66-97EE-5C4E932EE3BA/_GUID-6EC27F8A-F9F1-4939-ACF2-E02F31317C79";

## Description
The `calculateExtent` operation calculates a custom area of interest (AOI) for a given product and version. The `extents` property value in the JSON response can be used as the value for the `customAoi` parameter of the [`generateProduct`](/tps-generate-product) operation.

##  Request parameters 
<StyledTable headers={"Parameter,Details"}>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">
      `productName`
      <GUID_0388E43D_C641_4E66_97EE_5C4E932EE3BA_GUID_BD0C4EE0_7864_4DD3_9692_AAED8631CB88 />
    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">
      <GUID_0388E43D_C641_4E66_97EE_5C4E932EE3BA_GUID_4E2CCDCB_0BD8_4893_AEBD_116ED1495B86 />
      This value must match a name from `https://<topographicProductionServer-url>/products`.
    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">
      `productVersion`
      <GUID_0388E43D_C641_4E66_97EE_5C4E932EE3BA_GUID_BD0C4EE0_7864_4DD3_9692_AAED8631CB88 />
    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">
      The version of the product to generate.
      This value must match a name from the `productVersion` property in `https://<topographicProductionServer-url>/products`.
    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">
      `aoiLayer`
      <GUID_0388E43D_C641_4E66_97EE_5C4E932EE3BA_GUID_BD0C4EE0_7864_4DD3_9692_AAED8631CB88 />
    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">
      The URL of the layer defining the product's area of interest.
    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">
      `inputGeometry`
      <GUID_0388E43D_C641_4E66_97EE_5C4E932EE3BA_GUID_BD0C4EE0_7864_4DD3_9692_AAED8631CB88 />
    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">
      A geometry defining the center of the custom extent. Only a point geometry is supported at the current release.
    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">
      `outSpatialReference`
      <GUID_0388E43D_C641_4E66_97EE_5C4E932EE3BA_GUID_BD0C4EE0_7864_4DD3_9692_AAED8631CB88 />
    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">
      The coordinate system for the extent that is returned.
    </StyledTableCell>
  </StyledTableRow>
</StyledTable>

## Response properties
<StyledTable headers={"Property,Details"}>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">
      `success`
    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">
      Indicates if the operation was successful.
      <GUID_0388E43D_C641_4E66_97EE_5C4E932EE3BA_GUID_6EC27F8A_F9F1_4939_ACF2_E02F31317C79 />
    </StyledTableCell>
  </StyledTableRow>
</StyledTable>

## Example usage
Request URL and parameters:

```markdown
https://machine.domain.com/server/rest/services/SampleService/TopographicProductionServer/calculateExtent
```

```javascript
productName=TM50
productVersion=TDS_7_1
aoiLayer=https://machine.domain.com/server/rest/services/AOIs/MapServer/1
inputGeometry={
  "spatialReference":{
    "latestWkid":3857,
    "wkid":102100
  },
  "x":-8028806.305443563,
  "y":2138929.6964067533
}
outSpatialReference={"latestWkid":3857,"wkid":102100}
f=json

```

## JSON Response syntax
The following is the syntax of a response:

```json
{
  "productName": <name of the product>,
  "productVersion": <version of the product>,
  "gridXml": <grid XML file used in building the custom extent>,
  "layoutProperties":
  {
    "name": <name of the layout template associated with the product>,
    "width": <width of the layout template associated with the product>,
    "height": <height of the layout template associated with the product>,
    "units":
    {
      "uwkid": <well-known id of the unit>
    }
  },
  "map":
  {
    "name": <name of the map used to build the custom extent>,
    "width": <width of the map frame and initial width of custom extent>,
    "height": <height of the map frame and initial height of custom extent>,
    "scale": <scale of the map>
  },
  "extents": <feature set representing the extents calculated, currently only one extent is allowed to be returned>
  {
    "geometryType": <geometry type of the extent>,
    "spatialReference":
    {
      "wkid": <well-known id>,
      "latestWkid": <latest well-known id>
    },
    "fields": [
      {
        "name": <name of the field>,
        "type": <type of field>,
        "alias": <alias of the field>
      },
      ...
    ],
    "features": [
      {
        "attributes":
        {
          "OBJECTID": <id of the object>,
          ...
        },
        "geometry":
        {
          "rings":
        }
      }
    ]
  },
  "success": true | false
}

```

## JSON Response example
The following is an example of a successful response:

```json
{
  "productName": "TM50",
  "productVersion": "TDS_7_1",
  "gridXml": "TM50_BaseMap_Zipper-Left.xml",
  "layoutProperties":
  {
    "name": "TM50_Layout",
    "width": 635,
    "height": 774.70000000000005,
    "units":
      {
        "uwkid": 1025
      }
  },
  "map":
  {
    "name": "BaseMap",
    "width": 556.79959869384766,
    "height": 552.79909896850586,
    "scale": 50000
  },
  "extents":
  {
    "geometryType": "esriGeometryPolygon",
    "spatialReference":
    {
      "wkid": 102100,
      "latestWkid": 3857
    },
    "fields":
    [
      {
        "name": "OBJECTID",
        "type": "esriFieldTypeOID",
        "alias": "OBJECTID"
      },
      ...
    ],
    "features":
    [
      {
        "attributes":
        {
          "OBJECTID": 1,
          ...
        },
        "geometry":
        {
          "rings": 
          [
            [-8043489.58459999971, 2124251.45230000094],
            [-8043511.36969999969, 2153607.65269999951],
            [-8014101.26469999924, 2153604.59160000086],
            [-8014123.04659999907, 2124254.51069999859],
            [-8043489.58459999971, 2124251.45230000094]
          ]
        }
      }
    ]
  },
  "success": true
}

```
