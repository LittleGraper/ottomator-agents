---
title: "Geometry To Referent"
description: "This operation converts one or more coordinate locations or routes and measure inputs along a route into a referent and offset value."
slug: "lr-geometry-to-referent"
url: "/lr-geometry-to-referent"
guid: "GUID-1ED307AE-9827-495B-BD3A-7BBB0647983F"
migratedTopicMetadata:
  FTITLE: "LR Geometry to Referent"
  FDESCRIPTION: ""
  FCHANGES: "Updates for #5023 (Creation of REST Doc Topic: Geometry to Referent)."
  FISHRELEASELABEL: ""
  FESRISOFTWARERELEASE: ""
  FESRITAGCLOUD: ""
  FESRIRECREATIONPROCEDURE: ""
  FESRIPRODUCTLIFECYCLE: "11.2 - *"
  CREATED-ON: "08/06/2023 05:01:17"
  FAUTHOR: "tsharma"
  FSTATUS: "Released"
  MODIFIED-ON: "14/07/2023 14:54:07"
  VERSION: "1"
  FRESOLUTION: ""
  DOC-LANGUAGE: "en"
  FISHREVCOUNTER: "9"
  ED: "GUID-2DE4CE59-51B2-4ADA-8E6E-816CF5353B11"
  FUSERGROUP: ""
  READ-ACCESS: ""
restInfoMetadata:
  apiPath: /geometryToReferent
  urlSegments:
    - name: <network-layer-url>
      url: /lr-network-layer
    - name: /geometryToReferent
  methods: []
  sslOnly: 'no'
  versionIntroduced: '11.2'
  requiredCapability: The ArcGIS Location Referencing license is required to use this resource.
---

import GUID_CF31BD86_ACFA_4774_8343_CC7C8307F248_GUID_338B692C_1241_497E_A75E_A120E90C5078 from "./snippets/GUID-CF31BD86-ACFA-4774-8343-CC7C8307F248/_GUID-338B692C-1241-497E-A75E-A120E90C5078";
import GUID_CF31BD86_ACFA_4774_8343_CC7C8307F248_GUID_A18843D2_866B_4EFB_B533_9736C6767514 from "./snippets/GUID-CF31BD86-ACFA-4774-8343-CC7C8307F248/_GUID-A18843D2-866B-4EFB-B533-9736C6767514";
import GUID_CF31BD86_ACFA_4774_8343_CC7C8307F248_GUID_F346DF29_5325_4FAE_8AEB_B0422F5AE1E9 from "./snippets/GUID-CF31BD86-ACFA-4774-8343-CC7C8307F248/_GUID-F346DF29-5325-4FAE-8AEB-B0422F5AE1E9";
import GUID_CF31BD86_ACFA_4774_8343_CC7C8307F248_GUID_071DFCB9_487C_48DD_89C0_7E164430E1BD from "./snippets/GUID-CF31BD86-ACFA-4774-8343-CC7C8307F248/_GUID-071DFCB9-487C-48DD-89C0-7E164430E1BD";
import GUID_CF31BD86_ACFA_4774_8343_CC7C8307F248_GUID_A1D0566B_93E4_49B1_9578_AA8BECB82C0E from "./snippets/GUID-CF31BD86-ACFA-4774-8343-CC7C8307F248/_GUID-A1D0566B-93E4-49B1-9578-AA8BECB82C0E";
import GUID_CF31BD86_ACFA_4774_8343_CC7C8307F248_GUID_CBD7DB86_6337_46AF_9D06_A96B8007D827 from "./snippets/GUID-CF31BD86-ACFA-4774-8343-CC7C8307F248/_GUID-CBD7DB86-6337-46AF-9D06-A96B8007D827";
import GUID_CF31BD86_ACFA_4774_8343_CC7C8307F248_GUID_771125F3_D83D_487C_A125_ED278A1903BC from "./snippets/GUID-CF31BD86-ACFA-4774-8343-CC7C8307F248/_GUID-771125F3-D83D-487C-A125-ED278A1903BC";
import GUID_CF31BD86_ACFA_4774_8343_CC7C8307F248_GUID_2CA58EC4_B656_41C3_929A_F19634F37937 from "./snippets/GUID-CF31BD86-ACFA-4774-8343-CC7C8307F248/_GUID-2CA58EC4-B656-41C3-929A-F19634F37937";
import GUID_CF31BD86_ACFA_4774_8343_CC7C8307F248_GUID_12075B19_4FE4_4EA3_BA1C_6BCDC797BF54 from "./snippets/GUID-CF31BD86-ACFA-4774-8343-CC7C8307F248/_GUID-12075B19-4FE4-4EA3-BA1C-6BCDC797BF54";
import GUID_CF31BD86_ACFA_4774_8343_CC7C8307F248_GUID_0D283141_F093_4914_AE08_85FA000321C8 from "./snippets/GUID-CF31BD86-ACFA-4774-8343-CC7C8307F248/_GUID-0D283141-F093-4914-AE08-85FA000321C8";
import GUID_CF31BD86_ACFA_4774_8343_CC7C8307F248_GUID_E9274257_CDF7_4AEF_B034_FC9A83B71F0E from "./snippets/GUID-CF31BD86-ACFA-4774-8343-CC7C8307F248/_GUID-E9274257-CDF7-4AEF-B034-FC9A83B71F0E";
import GUID_CF31BD86_ACFA_4774_8343_CC7C8307F248_GUID_A204EFC8_9DD4_4692_AB87_877BD3C7E204 from "./snippets/GUID-CF31BD86-ACFA-4774-8343-CC7C8307F248/_GUID-A204EFC8-9DD4-4692-AB87-877BD3C7E204";
import GUID_CF31BD86_ACFA_4774_8343_CC7C8307F248_GUID_B7782607_849C_4C90_9D12_86CEAA873DB0 from "./snippets/GUID-CF31BD86-ACFA-4774-8343-CC7C8307F248/_GUID-B7782607-849C-4C90-9D12-86CEAA873DB0";
import GUID_CF31BD86_ACFA_4774_8343_CC7C8307F248_GUID_2F607C55_E2A3_4EC5_AEC7_0E75B11E3555 from "./snippets/GUID-CF31BD86-ACFA-4774-8343-CC7C8307F248/_GUID-2F607C55-E2A3-4EC5-AEC7-0E75B11E3555";
import GUID_CF31BD86_ACFA_4774_8343_CC7C8307F248_GUID_F20F8D73_B46C_4950_B012_6CDF9CF27212 from "./snippets/GUID-CF31BD86-ACFA-4774-8343-CC7C8307F248/_GUID-F20F8D73-B46C-4950-B012-6CDF9CF27212";
import EncodeURLsNote from "./snippets/GUID-CF31BD86-ACFA-4774-8343-CC7C8307F248/_EncodeURLsNote";


## Description

This operation converts one or more coordinate locations or route and measure inputs along a route into a referent and offset value.

A status message is returned indicating success or details on why the conversion failed.

## Status messages

The following table contains an enumeration of the possible locating statuses:

<StyledTable headers={"Status,Description"}>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">
      `esriLocatingOK`
    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">
      Locating was successful.
    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">
      `esriLocatingMultipleLocation`
    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">
      Locating was successful and the input point was located on more than one route.
    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">
      `esriLocatingCannotFindRoute`
    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">
      The route does not exist.
    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">
      `esriLocatingRouteShapeEmpty`
    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">
      The route does not have a shape or the shape is empty.
    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">
      `esriLocatingRouteMeasuresNull`
    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">
      The route does not have measures or the measures are null.
    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">
      `esriLocatingRouteNotMAware`
    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">
      The route is not an m-aware polyline.
    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">
      `esriLocatingCannotFindLocation`
    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">
      The route location's shape cannot be found because the route has no measures or the route location's measures do not exist on the route.
    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">
      `esriLocatingReferentOffsetSpansGap`
    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">
      The offset value found spans across a gap.
    </StyledTableCell>
  </StyledTableRow>
</StyledTable>

## Request parameters

<StyledTable headers={"Parameter,Details"}>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">
      `f`

      (Optional)
    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">
      <GUID_CF31BD86_ACFA_4774_8343_CC7C8307F248_GUID_338B692C_1241_497E_A75E_A120E90C5078 />
      <GUID_CF31BD86_ACFA_4774_8343_CC7C8307F248_GUID_A18843D2_866B_4EFB_B533_9736C6767514 />
    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">
      `location`
    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">
      A list of geometries used to convert to referent and offset values.

      Syntax:
      ```json
      [
        {
          "layerId": <layerId1>,
          "geometry": { "x": <x1>, "y": <y1>, "z": <z1> }
        },  
        { 
          "layerId": <layerId2>,
          "routeId": "<routeId2>",
                  "measure": <measure2>  // in network units
        },
        ...
      ]
      ```
    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">
      `outOffsetUnit`

      (Optional)
    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">
      Specifies the unit used for output offset values. If this parameter is not specified, the network units are used to return the referent offset value.

      Values: `esriInches` | `esriFeet` | `esriYards` | `esriMiles` | `esriNauticalMiles` | `esriMillimeters` | `esriCentimeters` | `esriMeters` | `esriKilometers` | `esriDecimalDegrees` | `esriDecimeters` | `esriIntInches` | `esriIntFeet` | `esriIntYards` | `esriIntMiles` | `esriIntNauticalMiles`
    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">
      `referentSelectionType`

      (Optional)
    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">
      Specifies how the referent will be selected along a route. `closest` selects the closest referent in the layer irrespective of whether it's upstream or downstream of the location. `nearestUpstream` selects the nearest referent that is upstream of the provided location. This ensures that the referent selected is always upstream of the location and ensures a positive offset. The default is `closest`.

      Values: `closest` | `nearestUpstream`
    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">
      `featureIdFieldName`

      (Optional)
    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">
      A field of the referent layer returned by the REST endpoint instead of the default ObjectID.

      Syntax: 
      ```other
      featureIdFieldName=<fieldName>
      ```
      Example: 
      ```other
      featureIdFieldName="RouteName"
      ```
    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">
      `tolerance`

      (Optional)
    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">
      The maximum distance in map units to snap a point to the closest location on a nearby route. If a point is farther than the tolerance from a route, a message is returned stating that the point can't be located.
    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">
      `temporalViewDate`

      (Optional)
    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">
      <GUID_CF31BD86_ACFA_4774_8343_CC7C8307F248_GUID_F346DF29_5325_4FAE_8AEB_B0422F5AE1E9 />
      <GUID_CF31BD86_ACFA_4774_8343_CC7C8307F248_GUID_071DFCB9_487C_48DD_89C0_7E164430E1BD />
      <GUID_CF31BD86_ACFA_4774_8343_CC7C8307F248_GUID_A1D0566B_93E4_49B1_9578_AA8BECB82C0E />
      <GUID_CF31BD86_ACFA_4774_8343_CC7C8307F248_GUID_CBD7DB86_6337_46AF_9D06_A96B8007D827 />
    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">
      `inSR`

      (Optional)
    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">
      <GUID_CF31BD86_ACFA_4774_8343_CC7C8307F248_GUID_771125F3_D83D_487C_A125_ED278A1903BC />
      <GUID_CF31BD86_ACFA_4774_8343_CC7C8307F248_GUID_2CA58EC4_B656_41C3_929A_F19634F37937 />
      <GUID_CF31BD86_ACFA_4774_8343_CC7C8307F248_GUID_12075B19_4FE4_4EA3_BA1C_6BCDC797BF54 />
    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">
      `outSR`

      (Optional)
    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">
      <GUID_CF31BD86_ACFA_4774_8343_CC7C8307F248_GUID_0D283141_F093_4914_AE08_85FA000321C8 />
      <GUID_CF31BD86_ACFA_4774_8343_CC7C8307F248_GUID_E9274257_CDF7_4AEF_B034_FC9A83B71F0E />
      <GUID_CF31BD86_ACFA_4774_8343_CC7C8307F248_GUID_A204EFC8_9DD4_4692_AB87_877BD3C7E204 />
    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">
      `gdbVersion`

      (Optional)
    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">
      <GUID_CF31BD86_ACFA_4774_8343_CC7C8307F248_GUID_B7782607_849C_4C90_9D12_86CEAA873DB0 />
      <GUID_CF31BD86_ACFA_4774_8343_CC7C8307F248_GUID_2F607C55_E2A3_4EC5_AEC7_0E75B11E3555 />
      <GUID_CF31BD86_ACFA_4774_8343_CC7C8307F248_GUID_F20F8D73_B46C_4950_B012_6CDF9CF27212 />
    </StyledTableCell>
  </StyledTableRow>
</StyledTable>

## Example usage

<EncodeURLsNote />

### Example 1

The following is a URL for converting a single geometry to a referent and offset:

```other
http://sampleserver/arcgis/rest/services/MyLRS/MapServer/exts/LRSServer/networkLayers/1/geometryToReferent?f=json&locations=[{"layerId":2,"geometry":{"x":260631,"y":-437080}}]&offsetUnit=esriMeters&referentSelectionType=”nearestUpstream”&featureIdFieldName=”EventId”&outSR=3310
```

 

### Example 2

The following is a URL for converting multiple geometries to referents and offsets:

```other
http://sampleserver/arcgis/rest/services/MyLRS/MapServer/exts/LRSServer/networkLayers/1/geometryToReferent?f=json&locations=[{"layerId":2,"geometry":{"x":260631,"y":-437080}},{"layerId":2,"geometry":{"x":260639,"y":-437080}}]&offsetUnit=esriFeet&outSR=3310
```

 

## JSON Response syntax

```json
{
  {
    "offsetUnit": "<units>",
    "distanceUnit": "<units>",
    "spatialReference": "<spatialReference>",
    "locations": [
      { 
        "status": "<status1>",
        "results": [
          {
            "objectId": "<objectId1>",
            "featureId": "<featureId1>",
            "offset": "<offset1>",
            "routeId": "<routeId1>",
            "distance": <distance1>,
            "geometryType": "esriGeometryPoint",
	          "geometry": { "x": <x>, "y": <y>, "z": <z> }  
          },
          ...
        ]
      },
      { 
        "status": "<status2>",
        "results": [
          {
            "objectId": "<objectId2>",
            "featureId": "<featureId2>",
            "offset": "<offset2>",
            "routeId": "<routeId2>",
            "distance": <distance2>,
            "geometryType": "esriGeometryPoint",
	          "geometry": { "x": <x>, "y": <y>, "z": <z> }  
          },
          ...
        ]
      },
      ...
  }
}
```

 

## JSON Response example

The following is an example of a successful response:

````json
{
 "offsetUnit": "esriMeters",
 "distanceUnit": "esriMeters",
 "spatialReference": {
  "wkid": 3310
 },
 "locations": [
  {
   "status": "esriLocatingOK",
   "results": [
    {
     "objectId": 1317,
     "featureId": "Event17",
     "offset": -3,
     "routeId": "R10",
     "distance": 0,
     "geometryType": "esriGeometryPoint",
     "geometry": {
      "x": 260675,
      "y": -437072,
      "z": 0
     }
    }
   ]
  }
 ]
}```
````

 
