---
title: "/SolveLocationAllocation"
description: "Location-allocation helps you choose which facilities from a set of facilities to operate based on their potential interaction with demand points."
uid: "location-allocation-job"
slug: "location-allocation-service"
url: "/routing/location-allocation-service"
guid: "GUID-FE6E745F-569D-4028-B5A9-E250C3BBBEEB"
migratedTopicMetadata:
  FTITLE: "Location-Allocation Service"
  FDESCRIPTION: ""
  FCHANGES: "Doc result and input operation supported by all job requests
"
  FISHRELEASELABEL: ""
  FESRISOFTWARERELEASE: ""
  FESRITAGCLOUD: ""
  FESRIRECREATIONPROCEDURE: ""
  FESRIPRODUCTLIFECYCLE: "agol March2023 - *"
  CREATED-ON: "28/03/2023 11:15:38"
  FAUTHOR: "pchopra"
  FSTATUS: "Released"
  MODIFIED-ON: "17/04/2023 11:28:06"
  VERSION: "22"
  FRESOLUTION: ""
  DOC-LANGUAGE: "en"
  FISHREVCOUNTER: "2"
  ED: "GUID-36326659-87F5-4515-9CF5-BEB50F10FE7C"
  FUSERGROUP: "VUSERGROUPARCGISONLINEDOC"
  READ-ACCESS: "VUSERGROUPARCGISONLINEDOC"
restInfoMetadata: {}
---

Location-allocation helps you choose which facilities from a set of facilities to operate based on their potential interaction with demand points. It can help you answer questions like the following:

-   Given a set of existing fire stations, which site for a new fire station would provide the best response times for the community?
-   If a retail company has to downsize, which stores should it close to maintain the most overall demand?
-   Where should a factory be built to minimize the distance to distribution centers?

In these examples, facilities would represent the fire stations, retail stores, and factories; demand points would represent buildings, customers, and distribution centers.

The objective may be to minimize the overall distance between demand points and facilities, maximize the number of demand points covered within a certain distance of facilities, maximize an apportioned amount of demand that decays with increasing distance from a facility, or maximize the amount of demand captured in an environment of friendly and competing facilities.

<Note type={"note"}>

The service works in all the supported countries as listed in the [data coverage page](/network-coverage). One or more countries are grouped together to form an analysis region. The service can determine the best region to use based on the location of the inputs; otherwise, you can use a parameter to specify a region. The service does not support requests that span more than one region. Consequently, the service will only generate results for inputs that fall within one region. 

</Note>

## Request URL

This service uses the job request. When using the job request, the client must periodically check whether the service has finished execution and, once completed, get the result. While the service is executing, the application is available to do other things. 

You can make a job request to the location-allocation service using the following form:

`https://logistics.arcgis.com/arcgis/rest/services/World/LocationAllocation/GPServer/SolveLocationAllocation/submitJob?parameters` 

## Request parameters

The location-allocation request takes the parameters listed below. The only required parameters are `facilities` , `demand_points` , `token` , and `f` . The optional parameters have default values that are used when not specified in the request.

<StyledTable headers={"Parameter,Description"}>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

[facilities](/location-allocation-service#facilities)

(Required)

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Specify one or more locations that serve as facilities.

Syntax:

-   [As a collection of features](/location-allocation-service#syntax-examples-for-facilities)
-   [ As a feature service URL](/location-allocation-service#syntax-examples-for-facilities)

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

[demand_points](/location-allocation-service#demand_points)

(Required)

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Specify one or more demand points.

Syntax:

-   [ As a collection of features](/location-allocation-service#syntax-examples-for-demand_points)
-   [As a feature service URL](/location-allocation-service#syntax-examples-for-demand_points)

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

[token](/location-allocation-service#token)

(Required)

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Provide the identity of a user who has permissions to access the service.

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

[f](/location-allocation-service#f)

(Required)

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Specify the response format.

Values: `json` \| `pjson` 

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

[travel_mode](/location-allocation-service#travel_mode)

(Optional)

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Specify the mode of transportation for the analysis.

Value: JSON object

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

[measurement_units](/location-allocation-service#measurement_units)

(Optional)

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Specify the units that will be used to measure the travel times or travel distances between demand points and facilities.

The default value is `Minutes` .

Values: `Meters`  \| `Kilometers`  \| `Feet`  \| `Yards`  \| `Miles`  \| `NauticalMiles`  \| `Seconds`  \| `Minutes`  \| `Hours`  \| `Days` 

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

[analysis_region](/location-allocation-service#analysis_region)

(Optional)

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Specify the region in which to perform the analysis. If a value is not specified for this parameter, the tool will automatically calculate the region name based on the location of the input points.

Values: [see list](/location-allocation-service#analysis_region)

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

[problem_type](/location-allocation-service#problem_type)

(Optional)

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Specify the objective of the location-allocation analysis. 

The default value is `Minimize Impedance` .

Values: `Minimize Impedance`  \| `Maximize Coverage`  \| `Maximize Capacitated Coverage`  \| `Minimize Facilities`  \| `Maximize Attendance`  \| `Maximize Market Share`  \| `Target Market Share` 

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

[number_of_facilities_to_find](/location-allocation-service#number_of_facilities_to_find)

(Optional)

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Specify the number of facilities the task will find. The default value is demonstrated in the example below:

```javascript
number_of_facilities_to_find=1
```

 

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

[default_measurement_cutoff](/location-allocation-service#default_measurement_cutoff)

(Optional)

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Specify the maximum travel time or distance allowed between a demand point and the facility to which it is allocated. If a demand point is outside the cutoff of a facility, it cannot be allocated to that facility. 

The default value is `None` .

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

[default_capacity](/location-allocation-service#default_capacity)

(Optional)

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

This parameter is specific to the Maximize Capacitated Coverage problem type and is ignored for all other problem types. The default value is demonstrated in the example below:

```javascript
default_capacity=1
```

 

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

[target_market_share](/location-allocation-service#target_market_share)

(Optional)

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

This parameter is specific to the Target Market Share problem type and is ignored for all other problem types. The default value is demonstrated in the example below:

```javascript
target_market_share=10
```

 

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

[measurement_transformation_model](/location-allocation-service#measurement_transformation_model)

(Optional)

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Set the equation for transforming the network cost between facilities and demand points. 

The default value is `Linear` .

Values: `Linear`  \| `Power`  \| `Exponential` 

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

[measurement_transformation_factor](/location-allocation-service#measurement_transformation_factor)

(Optional)

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Provide an impedance parameter value (Î») to the equation specified in the `impedance_transformation_model`  parameter. The default value is demonstrated in the example below:

```javascript
measurement_transformation_factor=1
```

 

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

[travel_direction](/location-allocation-service#travel_direction)

(Optional)

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Specify whether travel times or distances will be measured from facilities to demand points or from demand points to facilities. 

The default value is `Facility to Demand` .

Values: `Facility to Demand`  \| `Demand to Facility` 

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

[time_of_day](/location-allocation-service#time_of_day)

(Optional)

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Specify the time at which travel begins, or departs, from the starting locations. 

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

[time_zone_for_time_of_day](/location-allocation-service#time_zone_for_time_of_day)

(Optional)

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Specify the time zone or zones of the `time_of_day`  parameter. 

The default value is `Geographically Local` .

Values: `Geographically Local`  \| `UTC` 

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

[uturn_at_junctions](/location-allocation-service#uturn_at_junctions)

(Optional)

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Restrict or allow the analysis to make U-turns at junctions. 

The default value is `Allowed only at Intersections and Dead Ends` .

Values: `Allowed only at Intersections and Dead Ends`  \| `Allowed`  \| `Allowed Only at Dead Ends`  \| `Not Allowed` 

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

[point_barriers](/location-allocation-service#point_barriers)

(Optional)

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Specify one or more points that act as temporary restrictions or represent additional time or distance that may be required to travel on the underlying streets.

Syntax:

-   [As a collection of features](/location-allocation-service#syntax-examples-for-point_barriers)
-   [As a feature service URL](/location-allocation-service#syntax-examples-for-point_barriers)

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

[line_barriers](/location-allocation-service#line_barriers)

(Optional)

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Specify one or more lines that prohibit travel anywhere the lines intersect the streets.

Syntax:

-   [As a collection of features](/location-allocation-service#syntax-examples-for-line_barriers)
-   [As a feature service URL](/location-allocation-service#syntax-examples-for-line_barriers)

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

[polygon_barriers](/location-allocation-service#polygon_barriers)

(Optional)

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Specify polygons that either prohibit travel or proportionately scale the time or distance required to travel on the streets intersected by the polygons.

Syntax:

-   [As a collection of features](/location-allocation-service#syntax-examples-for-polygon_barriers)
-   [ As a feature service URL](/location-allocation-service#syntax-examples-for-polygon_barriers)

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

[use_hierarchy](/location-allocation-service#use_hierarchy)

(Optional)

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Specify whether hierarchy will be used when finding the shortest paths. 

The default value is `true` .

Values: `true`  \| `false` 

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

[restrictions](/location-allocation-service#restrictions)

(Optional)

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Specify the restrictions that will be honored by the service. To learn about the accepted values, see the [restrictions](/location-allocation-service#restrictions) section below.

```javascript
restrictions=Avoid Carpool Roads, Avoid Express Lanes, Avoid Gates, Avoid Private Roads, Avoid Unpaved Roads, Driving a Truck, Use Preferred Truck Routes, Roads Under Construction Prohibited, Through Traffic Prohibited
```

 

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

[attribute_parameter_values](/location-allocation-service#attribute_parameter_values)

(Optional)

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Specify additional values required by an attribute or restriction, such as whether the restriction prohibits, avoids, or prefers travel on restricted roads. To learn about the accepted values for this parameter, see the [attribute_parameter_values](/location-allocation-service#attributes-for-attribute_parameter_values) section below.

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

[impedance](/location-allocation-service#impedance)

(Optional)

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Specify the impedance.

Values: `TravelTime`  \| `Minutes`  \| `TruckTravelTime`  \| `TruckMinutes`  \| `WalkTime`  \| `Miles`  \| `Kilometers` 

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

[allocation_line_shape](/location-allocation-service#allocation_line_shape)

(Optional)

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Specify the type of line features that will be output by the tool.

The default value is `Straight Line` .

Values: `Straight Line`  \| `None` 

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

[save_output_network_analysis_layer](/location-allocation-service#save_output_network_analysis_layer)

(Optional)

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Specify whether the service will save the analysis settings as a network analysis layer file. 

The default value is `false` .

Values: `true`  \| `false` 

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

[overrides](/location-allocation-service#overrides)

(Optional)

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

<Note type={"note"}>

This parameter is for internal use only.

</Note>

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

[time_impedance](/location-allocation-service#time_impedance)

(Optional)

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Specify the time-based impedance.

The default value is `TravelTime` .

Values: `TravelTime`  \| `Minutes`  \| `TruckTravelTime`  \| `TruckMinutes`  \| `WalkTime` 

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

[distance_impedance](/location-allocation-service#distance_impedance)

(Optional)

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Specify the distance-based impedance.

The default value is `Kilometers` .

Values:`Miles`  \| `Kilometers` 

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

[output_format](/location-allocation-service#output_format)

(Optional)

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Specify the format in which the output features will be created. 

The default value is `Feature Set` .

Values: `Feature Set`  \| `JSON File`  \| `GeoJSON File` 

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

[env:outSR](/location-allocation-service#envoutsr)

(Optional)

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Specify the spatial reference of the geometries, such as the chosen facilities or the allocation lines returned by the service.

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

[ignore_invalid_locations](/location-allocation-service#ignore_invalid_locations)

(Optional)

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Specify whether invalid input locations will be ignored. 

The default value is `true` .

Values: `true`  \| `false` 

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

[locate_settings](/location-allocation-service#locate_settings)

 

(Optional)

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Specify settings that affect how inputs are located.

Value: JSON object

</StyledTableCell>

</StyledTableRow>

</StyledTable>

## Required parameters

### facilities

Use this parameter to specify one or more locations that serve as facilities. This service identifies the best facility or facilities to serve the demand points.

<Note type={"caution"}>

The service imposes a maximum limit of 1,000 points that can be passed as facilities. If the value is exceeded, the response returns an error message.

</Note>

The `facilities`  parameter can be specified using a JSON structure that represents a set of point features. The property is optional; however, the JSON structure must specify either the `url`  or `features`  property: 

-   `url` âSpecify a REST query request to any ArcGIS Server feature, map, or geoprocessing service that returns a JSON feature set. 
-   `features` âSpecify an array of features. 

    Each feature in the `features`  array represents a facility and contains the following properties:

    -   `geometry` âSpecify the input point geometry containing `x`  and `y`  properties along with the `spatialReference`  property. If the `spatialReference`  property is defined for the entire JSON, you don't need to define this property for each geometry. Doing so reduces the size of the input JSON if the input has many features and improves performance. This property is not required if the coordinates are in the default spatial reference, WGS84. If the coordinates are in a different spatial reference, you must specify the spatial reference's well-known ID (WKID). See [Using spatial references](DEVSITE/rest/services-reference/enterprise/using-spatial-references) to look up WKID values.

        <Note type={"tip"}>

        It is recommended that you explicitly specify the `spatialReference`  value, and specify it for the entire JSON rather than each individual geometry. 

        </Note>
    -   `attributes` âSpecify each attribute as a key-value pair in which the key is the name of a given field, and the value is the attribute value for the corresponding field.

#### Attributes for facilities

When defining the facilities, you can set properties for each one, such as the facility name or type, using attributes. Facilities can be specified with the following fields:

-   `Name` 

    The name of the facility. The name is included in the name of output allocation lines if the facility is part of the solution. 
-   `FacilityType` 

    Specifies whether the facility is a candidate, required, or a competitor facility. The field value is specified as one of the following integers (use the numeric code, not the name in parentheses):

    -   0 (Candidate)âA facility that may be part of the solution.
    -   1 (Required)âA facility that must be part of the solution.
    -   2 (Competitor)âA rival facility that potentially removes demand from your facilities. Competitor facilities are specific to the Maximize Market Share and Target Market Share problem types; they are ignored in other problem types. 
-   `Weight` 

    The relative weighting of the facility, which is used to rate the attractiveness, desirability, or bias of one facility compared to another.

    For example, a value of 2.0 could capture the preference of customers who prefer, at a ratio of 2 to 1, shopping in one facility over another facility. Factors that potentially affect facility weight include square footage, neighborhood, and age of the building. Weight values other than one are only honored by the maximize market share and target market share problem types; they are ignored in other problem types.
-   `Cutoff` 

    The impedance value at which to stop searching for demand points from a given facility. The demand point can't be allocated to a facility that is beyond the value indicated here. 

    This attribute allows you to specify a different cutoff value for each demand point. For example, You might find that people in rural areas are willing to travel up to 10 miles to reach a facility, while urbanites are only willing to travel up to 2 miles. You can model this behavior by setting the `Cutoff`  value for all demand points that are in rural areas to 10 and setting the `Cutoff`  value of the demand points in urban areas to 2. 
-   `Capacity` 

    The `Capacity`  field is specific to the Maximize Capacitated Coverage problem type; the other problem types ignore this field. 

    Capacity specifies how much weighted demand the facility is capable of supplying. Excess demand won't be allocated to a facility even if that demand is within the facility's default measurement cutoff.

    Any value assigned to the `Capacity`  field overrides the **Default Capacity** parameter (`Default_Capacity`  in Python) for the given facility.
-   `CurbApproach` 

    Specify the direction a vehicle can arrive at and depart from the facility. 

    One of the integers listed in the Coded value column in the following table must be specified as a value of this attribute. The values in the Setting column are the descriptive names for `CurbApproach`  attribute values that you may have seen when using the ArcGIS Network Analyst extension software.

    <StyledTable headers={"Setting,Coded value,Description"}>

    <StyledTableRow>

    <StyledTableCell cellStyle="markdown">

    Either side of vehicle

    </StyledTableCell>

    <StyledTableCell cellStyle="markdown">

    0

    </StyledTableCell>

    <StyledTableCell cellStyle="markdown">

    The vehicle can approach and depart the facility in either direction, so a U-turn is allowed at the facility. This setting can be chosen if it is possible and desirable for a vehicle to turn around at the facility. This decision may depend on the width of the road and the amount of traffic or whether the facility has a parking lot where vehicles can pull in and turn around.

    ![Either side of vehicle ](../../shared/routing/images/CurbApproach_EitherSide.png)

    _All arrival and departure combinations are allowed with the Either side of vehicle curb approach._

    </StyledTableCell>

    </StyledTableRow>

    <StyledTableRow>

    <StyledTableCell cellStyle="markdown">

    Right side of vehicle

    </StyledTableCell>

    <StyledTableCell cellStyle="markdown">

    1

    </StyledTableCell>

    <StyledTableCell cellStyle="markdown">

    When the vehicle approaches and departs the facility, the facility must be on the right side of the vehicle. A U-turn is prohibited. This is typically used for vehicles such as buses that must arrive with the bus stop on the right-hand side.

    ![Right side of vehicle ](../../shared/routing/images/CurbApproach_RightSide.png)

    _The allowed arrival and departure combination for the Right side of vehicle curb approach is shown._

    </StyledTableCell>

    </StyledTableRow>

    <StyledTableRow>

    <StyledTableCell cellStyle="markdown">

    Left side of vehicle

    </StyledTableCell>

    <StyledTableCell cellStyle="markdown">

    2

    </StyledTableCell>

    <StyledTableCell cellStyle="markdown">

    When the vehicle approaches and departs the facility, the facility must be on the left side of the vehicle. A U-turn is prohibited. This is typically used for vehicles such as buses that must arrive with the bus stop on the left side.

    ![Left side of vehicle ](../../shared/routing/images/CurbApproach_LeftSide.png)

    _The allowed arrival and departure combination for the Left side of vehicle curb approach is shown._

    </StyledTableCell>

    </StyledTableRow>

    <StyledTableRow>

    <StyledTableCell cellStyle="markdown">

    No U-Turn

    </StyledTableCell>

    <StyledTableCell cellStyle="markdown">

    3

    </StyledTableCell>

    <StyledTableCell cellStyle="markdown">

    When the vehicle approaches the facility, the facility can be on either side of the vehicle; however, when it departs, the vehicle must continue in the same direction it arrived. A U-turn is prohibited.

    ![No U-turns ](../../shared/routing/images/CurbApproach_NoU-Turns.png)

    _The allowed arrival and departure combinations for the No U-Turn curb approach are shown._

    </StyledTableCell>

    </StyledTableRow>

    </StyledTable>

    The `CurbApproach`  attribute is designed to work with both types of national driving standards: right-hand traffic (United States) and left-hand traffic (United Kingdom). First, consider an incident on the left side of a vehicle. It is always on the left side regardless of whether the vehicle travels on the left or right half of the road. What may change with national driving standards is your decision to approach an incident from one of two directions, that is, so it ends up on the right or left side of the vehicle. For example, if you want to arrive at an incident and not have a lane of traffic between the vehicle and the incident, choose 1 (Right side of vehicle) in the United States and 2 (Left side of vehicle) in the United Kingdom.

    <ColumnLayout layout={2}>

    <Column>

    <Figure>

    ![ Right side of vehicle with right-hand traffic](../../shared/routing/images/CurbApproach_RightSide.png)

    <Caption>

    _With right-hand traffic, the curb approach that leaves the vehicle closest to the facility is Right side of vehicle._

    </Caption>

    </Figure>

    </Column>

    <Column>

    <Figure>

    ![ Left side of vehicle with left-hand traffic ](../../shared/routing/images/CurbApproach_LeftSideDriving.png)

    <Caption>

    _With left-hand traffic, the curb approach that leaves the vehicle closest to the facility is Left side of vehicle._

    </Caption>

    </Figure>

    </Column>

    </ColumnLayout>
-   `Bearing` 

    The direction in which a point is moving. The units are degrees and are measured clockwise from true north. This field is used in conjunction with the `BearingTol`  field. 

    Bearing data is usually sent automatically from a mobile device equipped with a GPS receiver. Try to include bearing data if you are loading an input location that is moving, such as a pedestrian or a vehicle. 

    Using this field tends to prevent adding locations to the wrong edges, which can occur when a vehicle is near an intersection or an overpass, for example. Bearing also helps the tool determine on which side of the street the point is. 

    [Learn more about bearing and bearing tolerance](https://pro.arcgis.com/en/pro-app/latest/help/analysis/networks/bearing-and-bearing-tolerance.htm)
-   `BearingTol` 

    The bearing tolerance value creates a range of acceptable bearing values when locating moving points on an edge using the `Bearing`  field. If the `Bearing`  field value is within the range of acceptable values that are generated from the bearing tolerance on an edge, the point can be added as a network location there; otherwise, the closest point on the next-nearest edge is evaluated. 

    The units are in degrees, and the default value is 30. Values must be greater than 0 and less than 180. A value of 30 means that when Network Analyst attempts to add a network location on an edge, a range of acceptable bearing values is generated 15 degrees to either side of the edge (left and right) and in both digitized directions of the edge. 

    [Learn more about bearing and bearing tolerance](https://pro.arcgis.com/en/pro-app/latest/help/analysis/networks/bearing-and-bearing-tolerance.htm)
-   `NavLatency` 

    This field is only used in the solve process if the `Bearing`  and `BearingTol`  fields also have values; however, entering a `NavLatency`  field value is optional, even when values are present in `Bearing`  and `BearingTol` . `NavLatency`  indicates how much cost is expected to elapse from the moment GPS information is sent from a moving vehicle to a server and the moment the processed route is received by the vehicle's navigation device. 

    The units of `NavLatency`  are the same as the units of the impedance attribute.

#### Syntax examples for facilities

The following is syntax for specifying facilities using a JSON structure for features:

```other
{
  "spatialReference": {
    "wkid": <wkid>,
    "latestWkid": <wkid>
  },
  "features": [
    {
      "geometry": {
        "x": <x1>,
        "y": <y1>
      },
      "attributes": {
        "<field1>": <value1_1>,
        "<field2>": <value1_2>
      }
    },
    {
      "geometry": {
        "x": <x2>,
        "y": <y2>
      },
      "attributes": {
        "<field1>": <value2_1>,
        "<field2>": <value2_2>
      }
    }
  ] 
}
```

 

The following is syntax for specifying facilities using a URL returning a JSON response:

```other
{
  "url": "<url>"
}
```

 

#### Examples for facilities

Example 1: Specifying facilities in the same spatial reference as your network dataset using a JSON structure. The example also shows how to specify some attributes for the incidents.

```other
{
  "features": [
    {
      "geometry": {
        "y": 51.5254,
        "x": -0.1891
      },
      "attributes": {
        "Name": "Facility 1",
        "ID": "F100045", 
        "Capacity": 100,
        "CurbApproach": 0
      }
    },
    {
      "geometry": {
        "y": 51.5353,
        "x": -0.1744
      },
      "attributes": {
        "Name": "Facility 2",
        "ID": "F100086",
        "Capacity": 150,
        "CurbApproach": 0
      }
    }
  ]
}
```

 

Example 2: Specifying facilities in the Web Mercator spatial reference using a JSON structure

```other
{
  "spatialReference": {
    "wkid": 102100
  },
  "features": [
    {
      "geometry": {
        "y": -5192521.476,
        "x": -2698533.989
      },
      "attributes": {
        "Name": "123 Main St", 
        "ID": "200156",
        "FacilityType": 0
      }
    },
    {
      "geometry": {
        "y": -5191915.261,
        "x": -2697821.094
      },
      "attributes": {
        "Name": "845 Cypress Ave",
        "ID": "300242",
        "FacilityType": 0
      }
    }
  ]
}
```

 

Example 3: Specifying facilities using a URL

The URL makes a query for a few features from a map service. A URL querying features from a feature service can also be specified.

```other
{
    "url": "https://sampleserver6.arcgisonline.com/arcgis/rest/services/NetworkAnalysis/SanDiego/MapServer/21/query?where=1%3D1&outFields=Name&f=json"
}
```

 

### demand_points

Use this parameter to specify one or more demand points. The service identifies the best facilities based in large part on how the facilities serve the demand points specified. 

<Note type={"caution"}>

The service imposes a maximum limit of 10,000 points that can be passed as demand points. If the value is exceeded, the response returns an error message.

</Note>

You can specify the `demand_points`  parameter using a JSON structure that represents a set of point features. The property is optional; however, the JSON structure must specify either the `url`  or `features`  property: 

-   `url` âSpecify a REST query request to any ArcGIS Server feature, map, or geoprocessing service that returns a JSON feature set. 
-   `features` âSpecify an array of features. 

    Each feature in the `features`  array represents a demand point and contains the following properties:

    -   `geometry` âSpecify the input point geometry containing `x`  and `y`  properties along with the `spatialReference`  property. If the `spatialReference`  property is defined for the entire JSON, you don't need to define this property for each geometry. Doing so reduces the size of the input JSON if the input has many features and improves performance. This property is not required if the coordinates are in the default spatial reference, WGS84. If the coordinates are in a different spatial reference, you must specify the spatial reference's well-known ID (WKID). See [Using spatial references](DEVSITE/rest/services-reference/enterprise/using-spatial-references) to look up WKID values.

        <Note type={"tip"}>

        It is recommended that you explicitly specify the `spatialReference`  value, and specify it for the entire JSON rather than each individual geometry. 

        </Note>
    -   `attributes` âSpecify each attribute as a key-value pair in which the key is the name of a given field, and the value is the attribute value for the corresponding field.

#### Attributes for demand_points

When defining the demand points, you can set properties for each, such as the demand point name or weight, using attributes. Demand points can be specified with the following fields:

-   `Name` 

    The name of the demand point. The name is included in the name of an output allocation line or lines if the demand point is part of the solution. 
-   `GroupName` 

    The name of the group to which the demand point belongs. This field is ignored for the Maximize Capacitated Coverage, Target Market Share, and Maximize Market Share problem types.

    If demand points share a group name, the solver allocates all members of the group to the same facility. (If constraints, such as a cutoff distance, prevent any of the demand points in the group from reaching the same facility, none of the demand points are allocated.)

    ![Minimizing distance without group names](../../shared/routing/images/GroupNameswithoutGroups.png)

    _Minimize distance without grouped demand points._

    ![Minimizing distance with group names](../../shared/routing/images/GroupNameswithGroups.png)

    _Minimize distance with grouped demand points. In this example, the yellow demand points have the same GroupName value, so they are allocated to the same facility._
-   `Weight` 

    The relative weighting of the demand point. A value of 2.0 means the demand point is twice as important as one with a weight of 1.0. If demand points represent households, for example, weight could indicate the number of people in each household.
-   `Cutoff` 

    The impedance value at which to stop searching for demand points from a given facility. The demand point can't be allocated to a facility that is beyond the value indicated here. 

    This attribute allows you to specify a cutoff value for each demand point. For example, you may find that people in rural areas are willing to travel up to 10 miles to reach a facility, while those in urban areas are only willing to travel up to 2 miles. You can model this behavior by setting the `Cutoff`  value for all demand points that are in rural areas to 10 and setting the `Cutoff`  value of the demand points in urban areas to 2. 

    The units for this attribute value are specified by the `measurement_units`  parameter. 

    A value for this attribute overrides the default set for the analysis using the `default_measurement_cutoff`  parameter. The default value is `Null` , which results in the default value set by the `default_measurement_cutoff`  parameter being used for all the demand points.
-   `ImpedanceTransformation` 

    Override the default value set for the analysis by the `measurement_transformation_model`  parameter.
-   `ImpedanceParameter` 

    Override the default value set for the analysis by the `measurement_transformation_model`  parameter.
-   `CurbApproach` 

    Specify the direction a vehicle can arrive at or depart from the demand point. One of the integers listed in the Coded value column in the following table must be specified as a value of this attribute. The values in the Setting column are the descriptive names for the `CurbApproach`  attribute values that you may have seen when using the ArcGIS Network Analyst extension software.

    <StyledTable headers={"Setting,Coded value,Description"}>

    <StyledTableRow>

    <StyledTableCell cellStyle="markdown">

    Either side of vehicle

    </StyledTableCell>

    <StyledTableCell cellStyle="markdown">

    0

    </StyledTableCell>

    <StyledTableCell cellStyle="markdown">

    The vehicle can approach and depart the demand point in either direction. 

    ![Either side of vehicle ](../../shared/routing/images/CurbApproach_EitherSide.png)

    _All arrival and departure combinations are allowed with the Either side of vehicle curb approach._

    </StyledTableCell>

    </StyledTableRow>

    <StyledTableRow>

    <StyledTableCell cellStyle="markdown">

    Right side of vehicle

    </StyledTableCell>

    <StyledTableCell cellStyle="markdown">

    1

    </StyledTableCell>

    <StyledTableCell cellStyle="markdown">

    When the vehicle approaches or departs the demand point, the demand point must be on the right side of the vehicle. This is typically used for vehicles such as buses that must arrive with the bus stop on the right side.

    ![Right side of vehicle ](../../shared/routing/images/CurbApproach_RightSide.png)

    _The allowed arrival and departure combination for the Right side of vehicle curb approach is shown._

    </StyledTableCell>

    </StyledTableRow>

    <StyledTableRow>

    <StyledTableCell cellStyle="markdown">

    Left side of vehicle

    </StyledTableCell>

    <StyledTableCell cellStyle="markdown">

    2

    </StyledTableCell>

    <StyledTableCell cellStyle="markdown">

    When the vehicle approaches or departs the demand point, the demand point must be on the left side of the vehicle. This is typically used for vehicles such as buses that must arrive with the bus stop on the left side.

    ![Left side of vehicle ](../../shared/routing/images/CurbApproach_LeftSide.png)

    _The allowed arrival and departure combination for the Left side of vehicle curb approach is shown._

    </StyledTableCell>

    </StyledTableRow>

    <StyledTableRow>

    <StyledTableCell cellStyle="markdown">

    No U-Turn

    </StyledTableCell>

    <StyledTableCell cellStyle="markdown">

    3

    </StyledTableCell>

    <StyledTableCell cellStyle="markdown">

    When the vehicle approaches the demand point, the demand point can be on either side of the vehicle; however, when it departs, the vehicle must continue in the same direction it arrived in. A U-turn is prohibited.

    ![No U-turns ](../../shared/routing/images/CurbApproach_NoU-Turns.png)

    _The allowed arrival and departure combinations for the No U-Turn curb approach are shown._

    </StyledTableCell>

    </StyledTableRow>

    </StyledTable>

    The `CurbApproach`  property is designed to work with both types of national driving standards: right-hand traffic (United States) and left-hand traffic (United Kingdom). First, consider a demand point on the left side of a vehicle. It is always on the left side regardless of whether the vehicle travels on the left or right half of the road. What may change with national driving standards is your decision to approach a demand point from one of two directions, that is, so it ends up on the right or left side of the vehicle. For example, if you want to arrive at a demand point and not have a lane of traffic between the vehicle and the demand point, you would choose 1 (Right side of vehicle) in the United States and 2 (Left side of vehicle) in the United Kingdom.

    <ColumnLayout layout={2}>

    <Column>

    <Figure>

    ![ Right side of vehicle with right-hand traffic](../../shared/routing/images/CurbApproach_RightSide.png)

    <Caption>

    _With right-hand traffic, the curb approach that leaves the vehicle closest to the demand point is Right side of vehicle._

    </Caption>

    </Figure>

    </Column>

    <Column>

    <Figure>

    ![ Left side of vehicle with left-hand traffic ](../../shared/routing/images/CurbApproach_LeftSideDriving.png)

    <Caption>

    _With left-hand traffic, the curb approach that leaves the vehicle closest to the demand point is Left side of vehicle._

    </Caption>

    </Figure>

    </Column>

    </ColumnLayout>
-   `Bearing` 

    The direction in which a point is moving. The units are degrees and are measured clockwise from true north. This field is used in conjunction with the `BearingTol`  field. 

    Bearing data is usually sent automatically from a mobile device equipped with a GPS receiver. Try to include bearing data if you are loading an input location that is moving, such as a pedestrian or a vehicle. 

    Using this field tends to prevent adding locations to the wrong edges, which can occur when a vehicle is near an intersection or an overpass, for example. Bearing also helps the tool determine on which side of the street the point is. 

    [Learn more about bearing and bearing tolerance](https://pro.arcgis.com/en/pro-app/latest/help/analysis/networks/bearing-and-bearing-tolerance.htm)
-   `BearingTol` 

    The bearing tolerance value creates a range of acceptable bearing values when locating moving points on an edge using the `Bearing`  field. If the `Bearing`  field value is within the range of acceptable values that are generated from the bearing tolerance on an edge, the point can be added as a network location there; otherwise, the closest point on the next-nearest edge is evaluated. 

    The units are in degrees, and the default value is 30. Values must be greater than 0 and less than 180. A value of 30 means that when Network Analyst attempts to add a network location on an edge, a range of acceptable bearing values is generated 15 degrees to either side of the edge (left and right) and in both digitized directions of the edge. 

    [Learn more about bearing and bearing tolerance](https://pro.arcgis.com/en/pro-app/latest/help/analysis/networks/bearing-and-bearing-tolerance.htm)
-   `NavLatency` 

    This field is only used in the solve process if the `Bearing`  and `BearingTol`  fields also have values; however, entering a `NavLatency`  field value is optional, even when values are present in `Bearing`  and `BearingTol` . `NavLatency`  indicates how much cost is expected to elapse from the moment GPS information is sent from a moving vehicle to a server and the moment the processed route is received by the vehicle's navigation device. 

    The units of `NavLatency`  are the same as the units of the impedance attribute.

#### Syntax examples for demand_points

The following is syntax for specifying demand points using a JSON structure for features:

```other
{
  "spatialReference": {
    "wkid": <wkid>,
    "latestWkid": <wkid>
  },
  "features": [
    {
      "geometry": {
        "x": <x1>,
        "y": <y1>
      },
      "attributes": {
        "<field1>": <value1_1>,
        "<field2>": <value1_2>
      }
    },
    {
      "geometry": {
        "x": <x2>,
        "y": <y2>
      },
      "attributes": {
        "<field1>": <value2_1>,
        "<field2>": <value2_2>
      }
    }
  ] 
}
```

 

The following is syntax for specifying demand points using a URL returning a JSON response:

```other
{
  "url": "<url>"
}
```

 

#### Examples for demand_points

Example 1: Specifying demand points in the spatial reference of the network dataset using a JSON structure. The example also shows how to specify some attributes for the demand points. 

```other
{
  "features": [
    {
      "geometry": {
        "y": 51.5254,
        "x": -0.1891
      },
      "attributes": {
        "Name": "Customer 1",
        "ID": "C00001", 
        "Weight": 10,
        "CurbApproach": 0
      }
    },
    {
      "geometry": {
        "y": 51.5353,
        "x": -0.1744
      },
      "attributes": {
        "Name": "Customer 2",
        "ID": "C00002",
        "Weight": 7,
        "CurbApproach": 1
      }
    }
  ]
}
```

 

Example 2: Specifying demand points in the Web Mercator spatial reference using a JSON structure

```other
{
  "spatialReference": {
    "wkid": 102100
  },
  "features": [
    {
      "geometry": {
        "y": -5192521.476,
        "x": -2698533.989
      },
      "attributes": {
        "Name": "Patron 1",
        "ID": "P1", 
        "TimeCutoff": 10,
      }
    },
    {
      "geometry": {
        "y": -5191915.261,
        "x": -2697821.094
      },
      "attributes": {
        "Name": "Patron 2",
        "ID": "P2",
        "TimeCutoff": 15,
      }
    }
  ]
}
```

 

Example 3: Specifying demand points using a URL

The URL makes a query for a few features from a map service. A URL querying features from a feature service can also be specified.

```other
{
    "url": "https://sampleserver6.arcgisonline.com/arcgis/rest/services/NetworkAnalysis/SanDiego/MapServer/21/query?where=1%3D1&outFields=Name&f=json"
}
```

 

### token

Use this parameter to specify a token that provides the identity of a user that has the permissions to access the service. The [security and authentication](https://developers.arcgis.com/documentation/mapping-apis-and-services/security/) page provides more information about how an access token can be obtained.

```other
token=<yourToken>
```

 

### f

Use this parameter to specify the response format. The parameter can have `json`  or `pjson`  as arguments, for example, `f=json` . The `pjson`  value is used for printing the JSON response in a prettified format. 

## Optional parameters

The following parameters are optional:

### travel_mode

Choose the mode of transportation for the analysis. 

Travel modes are managed in ArcGIS Online and can be configured by the administrator of your organization to better reflect the organization's workflows. 

[Learn more about travel modes](https://doc.arcgis.com/en/arcgis-online/reference/travel-modes.htm)

You must specify the JSON object containing the settings for a travel mode supported by your organization. To get a list of supported travel modes, execute the `GetTravelModes`  tool from the Utilities service.

The value for the `travel_mode`  parameter should be a JSON object representing travel mode settings. When you use the `GetTravelModes`  tool from the [Utilities service](DEVSITE/rest/services-reference/enterprise/gettravelmodes-tool), you get a string representing the travel mode JSON. You need to convert this string to a valid JSON object using your API and then pass the JSON object as the value for the `travel_mode`  parameter.

For example, below is a string representing the Walking Time travel mode as returned by the `GetTravelModes`  tool.

```javascript
"{\"attributeParameterValues\": [{\"parameterName\": \"Restriction Usage\", \"attributeName\": \"Walking\", \"value\": \"PROHIBITED\"}, {\"parameterName\": \"Restriction Usage\", \"attributeName\": \"Preferred for Pedestrians\", \"value\": \"PREFER_LOW\"}, {\"parameterName\": \"Walking Speed (km/h)\", \"attributeName\": \"WalkTime\", \"value\": 5}], \"description\": \"Follows paths and roads that allow pedestrian traffic and finds solutions that optimize travel time. The walking speed is set to 5 kilometers per hour.\", \"impedanceAttributeName\": \"WalkTime\", \"simplificationToleranceUnits\": \"esriMeters\", \"uturnAtJunctions\": \"esriNFSBAllowBacktrack\", \"restrictionAttributeNames\": [\"Preferred for Pedestrians\", \"Walking\"], \"useHierarchy\": false, \"simplificationTolerance\": 2, \"timeAttributeName\": \"WalkTime\", \"distanceAttributeName\": \"Miles\", \"type\": \"WALK\", \"id\": \"caFAgoThrvUpkFBW\", \"name\": \"Walking Time\"}"
```

 

The above value should be converted to a valid JSON object and passed as the value for the `travel_mode`  parameter.

```javascript
travel_mode={"attributeParameterValues":[{"parameterName":"Restriction Usage","attributeName":"Walking","value":"PROHIBITED"},{"parameterName":"Restriction Usage","attributeName":"Preferred for Pedestrians","value":"PREFER_LOW"},{"parameterName":"Walking Speed (km/h)","attributeName":"WalkTime","value":5}],"description":"Follows paths and roads that allow pedestrian traffic and finds solutions that optimize travel time. The walking speed is set to 5 kilometers per hour.","impedanceAttributeName":"WalkTime","simplificationToleranceUnits":"esriMeters","uturnAtJunctions":"esriNFSBAllowBacktrack","restrictionAttributeNames":["Preferred for Pedestrians","Walking"],"useHierarchy":false,"simplificationTolerance":2,"timeAttributeName":"WalkTime","distanceAttributeName":"Miles","type":"WALK","id":"caFAgoThrvUpkFBW","name":"Walking Time"}
```

 

The default value,`Custom` , allows you to configure your own travel mode. When you pass in `Custom` , you can set values for the following parameters: `impedance` , `time_impedance` , `distance_impedance` , `uturn_at_junctions` , `use_hierarchy` , `route_line_simplification_tolerance` , `restrictions` , and `attribute_parameter_values` . You can choose `Custom`  and set the custom travel mode parameters listed above, for example, to model a pedestrian with a fast walking speed or a truck with a given height, weight, and cargo of certain hazardous materials. You can try out different settings to get desired analysis results. Once you have identified the analysis settings, you should work with your organization's administrator and save these settings as part of new or existing travel mode so that everyone in your organization can rerun the analysis with the same settings. 

The default values of the custom travel mode parameters model traveling by car. If you specify the travel mode as `Custom`  or do not provide a value for the `travel_mode`  parameter, the analysis will be similar to using the default `Driving Time`  travel mode.

<Note type={"caution"}>

When the `travel_mode`  parameter is not set to `Custom` , this means you are choosing a travel mode configured by your organization, and the service automatically overrides the values of other parameters with values that model the chosen travel mode. The following parameters are overridden: `impedance` , `time_impedance` , `distance_impedance` , `uturn_at_junctions` , `use_hierarchy` , `route_line_simplification_tolerance` , `restrictions` , and `attribute_parameter_values` . 

</Note>

### measurement_units

Specify the units that will be used to measure the travel times or travel distances between demand points and facilities. The service finds the best facilities based on those that can reach, or be reached by, the most amount of weighted demand with the least amount travel.

The output allocation lines report travel distance or travel time in different units, including the units you specify for this parameter.

-   `Meters` 
-   `Kilometers` 
-   `Feet` 
-   `Yards` 
-   `Miles` 
-   `NauticalMiles` 
-   `Seconds` 
-   `Minutes` 
-   `Hours` 
-   `Days` 

<Note type={"note"}>

The units of the [default_measurement_cutoff](/location-allocation-service#default_measurement_cutoff)  parameter and the attribute value of `Cutoff`  on the [facilities](/location-allocation-service#facilities)  and [demand_points](/location-allocation-service#demand_points)  parameter are same as the units of the `measurement_units` .

</Note>

### analysis_region

Specify the region in which to perform the analysis. If a value is not specified for this parameter, the service will automatically calculate the region name based on the location of the input points. Setting the name of the region is recommended to speed up the analysis. 

To specify a region, use one of the following values:

-    Europe
-    Japan
-   Korea
-    MiddleEastAndAfrica
-    NorthAmerica
-    SouthAmerica
-   SouthAsia
-   Thailand

<Note type={"note"}>

The following region names are no longer supported and will be removed in future releases. If you specify one of the deprecated region names, the service automatically assigns a supported region name for your region.

-   `Greece`  redirects to `Europe` 
-   `India`  redirects to `SouthAsia` 
-   `Oceania`  redirects to `SouthAsia` 
-   `SouthEastAsia`  redirects to `SouthAsia` 
-   `Taiwan`  redirects to `SouthAsia` 

</Note>

The [data coverage page](/network-coverage) lists the countries that are grouped into each of these regions.

### problem_type

Specifies the objective of the location-allocation analysis, which can be one of the following options. The default objective is to minimize impedance.

#### Minimize Impedance

![Minimize Impedance problem type](../../shared/routing/images/la_minimize_impedance.png)

_Minimize Impedance chooses facilities such that the sum of weighted impedances (demand allocated to a facility multiplied by the impedance to the facility) is minimized._

This is also known as the P-Median problem type. Facilities are located such that the sum of all weighted travel time or distance between demand points and solution facilities is minimized. (Weighted travel is the amount of demand allocated to a facility multiplied by the travel distance or time to the facility.)

This problem type is traditionally used to locate warehouses, because it can reduce the overall transportation costs of delivering goods to outlets. Since Minimize Impedance reduces the overall distance the public needs to travel to reach the chosen facilities, the minimize impedance problem without an impedance cutoff is ordinarily regarded as more equitable than other problem types for locating some public-sector facilities such as libraries, regional airports, museums, department of motor vehicles offices, and health clinics.

The following list describes how the minimize impedance problem type handles demand:

-   A demand point that cannot reach any facilities, due to setting a cutoff distance or time, is not allocated.
-   A demand point that can only reach one facility has all its demand weight allocated to that facility.
-   A demand point that can reach two or more facilities has all its demand weight allocated to the nearest facility only.

#### Maximize Coverage

![Maximize Coverage problem type](../../shared/routing/images/la_maxcoverage.png)

_Maximize Coverage chooses facilities such that as much demand as possible is covered by the impedance cutoff of facilities. In this graphic, the task was directed to choose three facilities._

Facilities are located such that as much demand as possible is allocated to solution facilities within the impedance cutoff.

Maximize Coverage is frequently used to locate fire stations, police stations, and Emergency Response Services (ERS) centers, because emergency services are often required to arrive at all demand points within a specified response time. Note that it is important for all organizations, and critical for emergency services, to have accurate and precise data so that analysis results correctly model real-world results.

Pizza delivery businesses, as opposed to eat-in pizzerias, try to locate stores where they can cover the most people within a certain drive time. People who order pizzas for delivery don't typically worry about how far away the pizzeria is; they are mainly concerned with the pizza arriving within an advertised time window. Therefore, a pizza delivery business would subtract pizza preparation time from its advertised delivery time and solve a maximize coverage problem to choose the candidate facility that would capture the most potential customers in the coverage area. (Potential customers of eat-in pizzerias are more affected by distance, since they need to travel to the restaurant; thus, the attendance maximizing or market share problem types would better suit eat-in restaurants.)

The following list describes how the Maximize Coverage problem handles demand:

-   A demand point that cannot reach any facilities due to cutoff distance or time is not allocated.
-   A demand point that can only reach one facility has all its demand weight allocated to that facility.
-   A demand point that can reach two or more facilities has all its demand weight allocated to the nearest facility only.

#### Maximize Capacitated Coverage

![Maximize Capacitated Coverage problem type](../../shared/routing/images/la_MaxCapacitatedCov.png)

_Maximize Capacitated Coverage chooses facilities such that all or the greatest amount of demand can be served without exceeding the capacity of any facility. In this graphic, each facility has a capacity of one, and the task was directed to choose three facilities. Although the demand point on the bottom of the map is within the impedance cutoff of a facility, it's not allocated, because doing so would surpass a facility's capacity._

Facilities are located such that all or the greatest amount of demand can be served without exceeding the capacity of any facility.

Maximize Capacitated Coverage behaves like either the Minimize Impedance or Maximize Coverage problem type but with the added constraint of capacity. You can specify a capacity for an individual facility by assigning a numeric value to its corresponding `Capacity`  attribute on the input facilities. If the `Capacity`  attribute value is null, the facility is assigned a capacity from the `default_capacity`  property.

Use cases for Maximize Capacitated Coverage include creating territories that encompass a given number of people or businesses, locating hospitals or other medical facilities with a limited number of beds or patients who can be treated, or locating warehouses whose inventory isn't assumed to be unlimited. 

The following list describes how the Maximize Capacitated Coverage problem handles demand:

-   Unlike Maximize Coverage, Maximize Capacitated Coverage doesn't require a value for the Default Measurement Cutoff; however, when a cutoff is specified, any demand point outside the cutoff time or distance of all facilities is not allocated.
-   An allocated demand point has all or none of its demand weight assigned to a facility; that is, demand isn't apportioned with this problem type.
-   If the total demand that can reach a facility is greater than the capacity of the facility, only the demand points that maximize total captured demand and minimize total weighted travel are allocated. 

<Note type={"note"}>

You may notice an apparent inefficiency when a demand point is allocated to a facility that isn't the nearest solution facility. This may occur when demand points have varying weights and when the demand point in question can reach more than one facility. This kind of result indicates the nearest solution facility didn't have adequate capacity for the weighted demand, or the most efficient solution for the entire problem required one or more local inefficiencies. In either case, the solution is correct.

</Note>

#### Minimize Facilities

![Minimize Facilities problem type](../../shared/routing/images/la_minfacilities.png)

_Minimize Facilities chooses facilities such that as many demand points as possible are within the impedance cutoff of facilities. Additionally, the number of facilities required to cover all demand points is minimized. In this graphic, the task was able to cover all demand points with only two facilities._

Facilities are chosen such that as much weighted demand as possible is allocated to solution facilities within the travel time or distance cutoff; additionally, the number of facilities required to cover demand is minimized.

Minimize Facilities is the same as Maximize Coverage but with the exception of the number of facilities to locate, which in this case is determined by the solver. When the cost of building facilities is not a limiting factor, the same kinds of organizations that use Maximize Coverage (emergency response, for instance) use Minimize Facilities so that all possible demand points will be covered. 

The following list describes how the Minimize Facilities problem handles demand:

-   A demand point that cannot reach any facilities due to a cutoff distance or time is not allocated.
-   A demand point that can only reach one facility has all its demand weight allocated to that facility.
-   A demand point that can reach two or more facilities has all its demand weight allocated to the nearest facility only.

#### Maximize Attendance

![Maximize Attendance problem type](../../shared/routing/images/la_maxattendance.png)

_Maximize Attendance chooses facilities such that as much demand weight as possible is allocated to facilities while assuming the demand weight decreases with distance. The demand points, represented by pie charts in this graphic, show how much of their total demand is captured by the facility._

Facilities are chosen such that as much demand weight as possible is allocated to facilities while assuming the demand weight decreases in relation to the distance between the facility and the demand point.

Specialty stores that have little or no competition benefit from this problem type, but it may also be beneficial to general retailers and restaurants that don't have the data on competitors necessary to perform market share problem types. Some businesses that might benefit from this problem type include coffee shops, fitness centers, dental and medical offices, and electronics stores. Public transit bus stops are often chosen with the help of Maximize Attendance. Maximize Attendance assumes that the farther people have to travel to reach your facility, the less likely they are to use it. This is reflected in how the amount of demand allocated to facilities diminishes with distance.

The following list describes how the Maximize Attendance problem handles demand:

-   A demand point that cannot reach any facilities due to a cutoff distance or time is not allocated.
-   When a demand point can reach a facility, its demand weight is only partially allocated to the facility. The amount allocated decreases as a function of the maximum cutoff distance (or time) and the travel distance (or time) between the facility and the demand point.
-   The weight of a demand point that can reach more than one facility is proportionately allocated to the nearest facility only.

#### Maximize Market Share

![Maximize Market Share problem type](../../shared/routing/images/la_maxmarketshare.png)

_Maximize Market Share chooses facilities such that the largest amount of allocated demand is captured in the presence of competitors. You specify the number of facilities you want it to choose._

A specific number of facilities are chosen such that the allocated demand is maximized in the presence of competitors. The goal is to capture as much of the total market share as possible with a given number of facilities, which you specify. The total market share is the sum of all demand weight for valid demand points.

The market share problem types require the most data because, along with knowing your own facilities' weight, you also need to know that of your competitors' facilities. The same types of facilities that use the Maximize Attendance problem type can also use market share problem types, given that they have comprehensive information that includes competitor data. Large discount stores typically use Maximize Market Share to locate a finite set of new stores. The market share problem types use a Huff model, which is also known as a gravity model or spatial interaction.

The following list describes how the Maximize Market Share problem handles demand:

-   A demand point that cannot reach any facilities due to a cutoff distance or time is not allocated.
-   A demand point that can only reach one facility has all its demand weight allocated to that facility.
-   A demand point that can reach two or more facilities has all its demand weight allocated to them; furthermore, the weight is split among the facilities proportionally to the facilities' attractiveness (facility weight) and inversely proportional to the distance between the facility and demand point. Given equal facility weights, this means more demand weight is assigned to near facilities than far facilities. 
-   The total market share, which can be used to calculate the captured market share, is the sum of the weight of all valid demand points.

#### Target Market Share

![Target Market Share problem type](../../shared/routing/images/la_targetmarketshare.png)

_Target Market Share works in the presence of competitors and tries to choose the fewest facilities necessary to capture the market share that you specify._

Target Market Share chooses the minimum number of facilities necessary to capture a specific percentage of the total market share in the presence of competitors. The total market share is the sum of all demand weight for valid demand points. You set the percent of the market share you want to reach and let the solver choose the fewest number of facilities necessary to meet that threshold.

The market share problem types require the most data because, along with knowing your own facilities' weight, you also need to know that of your competitors' facilities. The same types of facilities that use the Maximize Attendance problem type can also use market share problem types, given that they have comprehensive information that includes competitor data.

Large discount stores typically use the Target Market Share problem type when they want to know how much expansion would be required to reach a certain level of the market share or see what strategy would be needed just to maintain their current market share, given the introduction of new competing facilities. The results often represent what stores would like to do if budgets weren't a concern. In other cases in which budget is a concern, stores revert to the Maximize Market Share problem and simply capture as much of the market share as possible with a limited number of facilities.

The following list describes how the target market share problem handles demand:

-   The total market share, which is used in calculating the captured market share, is the sum of the weight of all valid demand points.
-   A demand point that cannot reach any facilities due to a cutoff distance or time is not allocated.
-   A demand point that can only reach one facility has all its demand weight allocated to that facility.
-   A demand point that can reach two or more facilities has all its demand weight allocated to them; furthermore, the weight is split among the facilities proportionally to the facilities' attractiveness (facility weight) and inversely proportional to the distance between the facility and demand point. Given equal facility weights, this means more demand weight is assigned to near facilities than far facilities. 

### number_of_facilities_to_find

Specify the number of facilities the task should choose. The default value is 1. 

The facilities with a `FacilityType`  attribute value of 1 (Required) are always chosen first. Any excess facilities to choose are picked from candidate facilities, which have a `FacilityType`  attribute value of 2. If the number of facilities to find is less than the number of required facilities, an error occurs.

The `number_of_facilities_to_find`  parameter is ignored for the Minimize Facilities and Target Market Share problem types since the task determines the minimum number of facilities needed to meet the objectives.

### default_measurement_cutoff

Specifies the maximum travel time or distance allowed between a demand point and the facility to which it is allocated. If a demand point is outside the cutoff of a facility, it cannot be allocated to that facility. 

The default value is none, which means travel isn't limited. The units for this parameter are the same as those specified by the `measurement_units`  parameter. The travel time or distance is measured by the shortest path along roads. This property might be used to model the maximum distance that people are willing to travel to visit stores or the maximum time that is permitted for a fire department to reach anyone in the community.

Note that demand points have `TimeCutoff`  and `DistanceCutoff`  attributes, which, if set accordingly, override the `default_measurement_cutoff`  parameter. You may find that people in rural areas are willing to travel up to 10 miles to reach a facility while urbanites are only willing to travel up to two miles. Assuming `measurement_units`  is set to `miles` , you can model this behavior by setting the `default_measurement_cutoff`  to 10 and the `DistanceCutoff`  attribute value of the demand points in urban areas to 2.

### default_capacity

This parameter is specific to the Maximize Capacitated Coverage problem type and is ignored for all other problem types. It is the default capacity assigned to all facilities in the analysis. You can override the default capacity for a facility by specifying a value in the facility's Capacity attribute. The default value is 1. 

### target_market_share

This parameter is specific to the Target Market Share problem type and is ignored for all other problem types. It is the percentage of the total demand weight that you want the chosen and required facilities to capture. The task chooses the minimum number of facilities needed to capture the target market share specified here. The default value is 10 percent. 

### measurement_transformation_model

This sets the equation for transforming the network cost between facilities and demand points. This parameter, coupled with `impedance_parameter` , specifies how severely the network impedance between facilities and demand points influences the task's choice of facilities.

In the following list of transformation options, d refers to demand points and f, facilities. "Impedance" refers to the shortest travel distance or time between two locations. So impedance

<sub>df</sub>

 is the shortest path (time or distance) between demand point d and facility f, and cost

<sub>df</sub>

 is the transformed travel time or distance between the facility and demand point. Lambda (Î») denotes the impedance parameter. The `measurement_units`  setting determines whether travel time or distance is analyzed.

#### Linear

cost

<sub>df</sub>

 = Î» \* impedance

<sub>df</sub>

The transformed travel time or distance between the facility and the demand point is the same as the time or distance of the shortest path between the two locations. With this option, the impedance parameter (Î») is always set to one. This is the default.

#### Power

cost

<sub>df</sub>

 = impedance

<sub>df</sub>

<sup>Î»</sup>

The transformed travel time or distance between the facility and the demand point is equal to the time or distance of the shortest path raised to the power specified by the impedance parameter (Î»). Use the Power option with a positive impedance parameter to specify higher weight to nearby facilities. 

#### Exponential

cost

<sub>df</sub>

 = e

<sup>(Î» * impedance)</sup>

The transformed travel time or distance between the facility and the demand point is equal to the mathematical constant e raised to the power specified by the shortest-path network impedance multiplied with the impedance parameter (Î»). Use the Exponential option with a positive impedance parameter to specify a very high weight to nearby facilities.

#### Example of measurement_transformation_model

The next set of graphics and tables use Minimize Impedance to demonstrate the potential effects of using different impedance transformations and parameters.

![Sample problem to demonstrate the effects of impedance transformations](../../shared/routing/images/la_transformation1.png)

_A sample problem setup using two-mile edges with demand points on the ends and candidate facilities in the middle of the edges is shown._

The `Linear`  transformation always uses a parameter value of one, so the cost is unchanged, and facility B minimizes that cost.

<StyledTable headers={"Facility,Total cost (linear),Solution facility"}>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

A

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

3+3+5=11

</StyledTableCell>

<StyledTableCell cellStyle="markdown">
N/A
</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

B

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

7+1+1=9

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Facility B is chosen.

</StyledTableCell>

</StyledTableRow>

</StyledTable>

_Comparison of costs using a linear transformation_

![Sample problem to demonstrate the effects of impedance transformations](../../shared/routing/images/la_transformation2.png)

_Facility B has a lower total transformed cost than facility A when a linear transformation is used._

A `Power`  transformation with a parameter of two amplifies longer distances enough that facility A minimizes cost instead.

<StyledTable headers={"Facility,Total cost (power transformation Î» = 2),Solution facility"}>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

A

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

3<sup>2</sup>\+3<sup>2</sup>\+5<sup>2</sup>=43

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Facility A is chosen.

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

B

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

7<sup>2</sup>\+1<sup>2</sup>\+1<sup>2</sup>=51

</StyledTableCell>

<StyledTableCell cellStyle="markdown">
N/A
</StyledTableCell>

</StyledTableRow>

</StyledTable>

_Comparison of costs using a power transformation with a parameter of 2.0_

![Sample problem to demonstrate the effects of impedance transformations](../../shared/routing/images/la_transformation3.png)

_Facility A has a lower total transformed cost than facility B when a squared power transformation is used._

An `exponential`  transformation with an impedance parameter of 0.02 favors nearby demand points, so facility B is the solution facility in this case. (The graphic is omitted, since it would look the same as the linear transformation graphic.)

<StyledTable headers={"Facility,Total cost (exponential transformation Î» = 0.02),Solution facility"}>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

A

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

e<sup>0.02\*3</sup>\+e<sup>0.02\*3</sup>\+e<sup>0.02\*5</sup>=3.23

</StyledTableCell>

<StyledTableCell cellStyle="markdown">
N/A
</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

B

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

e<sup>0.02\*7</sup>\+e<sup>0.02\*1</sup>\+e<sup>0.02\*1</sup>=3.19

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Facility B is chosen.

</StyledTableCell>

</StyledTableRow>

</StyledTable>

_Comparison of costs using an exponential transformation with a parameter of 0.02_

### measurement_transformation_factor

Provides an impedance parameter value (Î») to the equation specified in the `impedance_transformation_model`  parameter. The parameter value is ignored when the impedance transformation is linear. For power and exponential impedance transformations, the value should be nonzero. The default value is 1.

### travel_direction

Specify whether to measure travel times or distances from facilities to demand points or from demand points to facilities. The default value is to measure from facilities to demand points.

-   `Facility to Demand` âDirection of travel is from facilities to demand points.
-   `Demand to Facility` âDirection of travel is from demand points to facilities.

Travel times and distances may change based on direction of travel. If you're going from point A to point B, you may encounter less traffic or have a shorter path, due to one-way streets and turn restrictions, than if you were traveling in the opposite direction. For instance, going from point A to point B may only take 10 minutes, but going the other direction may take 15 minutes. These differing measurements may affect whether demand points can be assigned to certain facilities because of cutoffs or, in problem types in which demand is apportioned, affect how much demand is captured.

Fire departments commonly measure from facilities to demand points since they are concerned with the time it takes to travel from the fire station to the location of the emergency. A retail store is more concerned with the time it takes shoppers to reach the store; therefore, stores commonly measure from demand points to facilities.

The `travel_direction`  parameter also determines the meaning of any start time that is provided. See the `time_of_day`  parameter for more information.

### time_of_day

Specify the time at which travel begins, or departs, from the starting locations. 

Specifying a time of day results in more accurate estimations of travel times because the travel times account for the traffic conditions that are applicable for that date and time. 

To use traffic in the analysis, choose a time-based unit for `impedance`  and assign a value to `time_Of_day` . 

The `time_Of_day`  value represents the target start time from facilities or demand points, depending on the `travel_direction` . The time is specified as Unix time (milliseconds since midnight, January 1, 1970).

If a time of day is not passed in, the service uses static road speeds based on average historical speeds or posted speed limits. It uses posted speeds in areas where historical traffic information isn't available.

<Note type={"note"}>

Traffic is supported only with the driving time impedance or travel mode. 

</Note>

The service support two kinds of traffic: live and typical.

If the `time_Of_day`  specified is within 1 hour of the current time, live traffic will be used where available. Live traffic retrieves speeds based on phone probe records, sensors, and other data sources and reflects the current travel speeds and predicts speeds for the near future. If the `time_Of_day`  specified is earlier than 1 hour or later than 1 hour from the current time, or the road does not have live traffic, typical traffic speeds will be used. Typical speeds are based on historical traffic patterns. The travel time data is aggregated in 15 minute intervals per day of week based on multiple years worth of data. So a road may have a different travel time at Monday at 8 am, Monday at 8:15 am, or Tuesday at 8 am. Since the variance is just at the day of week and time of day, the travel time is the same on a road for any Monday at 8 am, regardless of the month or year.

If your goal is to model typical travel conditions and avoid large variances from the average due to live traffic, it is recommended to use a date from the past to ensure it doesn't coincide with the 1 hour window from the current time. As an extreme example, you can even use dates from 1990.

The [Data Coverage page](http://links.esri.com/arcgis-online-data-coverage-map-for-directions-and-routes) shows the countries Esri currently provides traffic data for.

#### Typical traffic

To ensure the task uses typical traffic in locations where it is available, choose a time and day of the week; then convert the day of the week to one of the following dates from 1990:

-   Mondayâ1/1/1990
-   Tuesdayâ1/2/1990
-   Wednesdayâ1/3/1990
-   Thursdayâ1/4/1990
-   Fridayâ1/5/1990
-   Saturdayâ1/6/1990
-   Sundayâ1/7/1990

Set the time and date as UNIX time in milliseconds. For example, to solve for 1:03 p.m. on Thursdays, set the time and date to 1:03 p.m., January 4, 1990, and convert to milliseconds (`631458180000` ). Although the dates representing days of the week are from 1990, typical traffic is calculated from recent traffic trendsâusually over the last two years worth of data.

#### Live traffic

To use live traffic when and where it is available, choose a time and date and convert to Unix time.

<Note type={"note"}>

 You need to have a Live Traffic extension and configure your Street Map Premium network dataset to access live traffic.

</Note>

Esri saves live traffic data for 1 hour and references predictive data extending 1 hour into the future. If the time and date you specify for this parameter is outside the 2-hour time window, or the travel time in the analysis continues past the predictive data window, the task falls back to typical traffic speeds.

#### Examples for time_of_day

Example one: 13:03, January 4, 1990. Typical traffic on Thursdays at 1:03 p.m.

```javascript
"time_Of_day": 631458180000
```

 

Example two: 17:00, January 7, 1990. Typical traffic on Sundays at 5:00 p.m.

```javascript
"time_Of_day": 631731600000
```

 

Example four: 10:20, March 18, 2015. If the current time is between 6:20 a.m., March 18, 2015, and 2:20 p.m., March 18, 2015, live traffic speeds are referenced in the analysis; otherwise, typical traffic speeds are referenced.

```javascript
"time_Of_day": 1426674000000
```

 

### time_zone_for_time_Of_Day

Specify the time zone or zones of the `time_Of_day`  parameter. There are two options: `Geographically Local`  and `UTC` . 

<Note type={"note"}>

All points in `facilities`  must be in the same time zone when using traffic and `travel_direction`  is set to `Demand to Facility` . Also, all points in `demand_points`  must be in the same time zone when using traffic and `travel_direction`  is set to `Facility to Demand` .

</Note>

The default value is `Geographically Local` . 				

#### `Geographically Local` 

The `time_Of_day`  value refers to the time zone or zones in which the input points are located. This option causes the analysis to have rolling start times across time zones.

Illustration of setting the value to `Geographically Local` âSetting `time_of_day`  to 9:00 a.m., January 4, 1990 (631443600000 milliseconds); `time_zone_for_time_Of_Day`  to `Geographically Local` ; and submitting a valid request causes the drive times for points in the eastern time zone to start at 9:00 a.m. eastern Time and 9:00 a.m. central time for points in the central time zone. (The start times are offset by an hour in real or UTC time.) 

![Time zone for time of day parameter is set to geographically local](../../shared/routing/images/TimeZoneForTimeOfDay_GeoLocal.png)

_Input: `time_Of_day`  is 9:00 a.m., January 4, 1990 (631443600000 milliseconds), and `time_zone_for_time_Of_day`  is set to `Geographically Local` _

#### `UTC` 

The `time_Of_day`  value refers to coordinated universal time (UTC). The start times for all points are simultaneous, regardless of time zones.

Illustration of setting the value to `time_Of_day` âSetting `time_Of_day`  to 9:00 a.m., January 4, 1990 (631443600000 milliseconds) and the value to `UTC` , the start times for points in the eastern time zone is 4:00 a.m. Eastern Time and 3:00 a.m. central time for those in the central time zone.

![Time zone for time of day parameter is set to UTC](../../shared/routing/images/TimeZoneForTimeOfDay_utc.png)

_Input: `time_Of_day`  is 9:00 a.m., January 4, 1990 (631443600000 milliseconds), and `time_zone_for_time_Of_day`  is set to `UTC` _

### uturn_at_junctions

Use this parameter to restrict or permit the route from making U-turns at junctions.

<Note type={"note"}>

The value of this parameter, regardless of whether you rely on the default or explicitly set a value, is overridden when `travel_mode`  is set to any other value than `Custom` . The default value for `travel_mode`  is `Driving` , so unless you set `travel_mode`  to a different value, this parameter value will be overridden.

</Note>

To understand the available parameter values, a junction is a point where only two streets intersect each other. If three or more streets intersect at a point, it is called as an intersection. A cul-de-sac is a dead-end. This parameter can have the following values:

<StyledTable headers={"Parameter Value,Description"}>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`Allowed` 

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

U-turns are permitted everywhere. Permitting U-turns implies that the vehicle can turn around at a junction and double back on the same street. 

![U-turns permitted](../../shared/routing/images/U-TurnsAtJunctions_Allowed.png)

_U-turns are permitted at junctions with any number of adjacent streets._

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`Allowed only at Intersections and Dead Ends` 

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

U-turns are prohibited at junctions where exactly two adjacent streets meet. 

![U-turns permitted only at intersections and dead-ends](../../shared/routing/images/U-TurnsAtJunctions_IntersectAndDeadEnds.png)

_U-turns are permitted only at intersections or dead ends._

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`Allowed only at Dead Ends` 

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

U-turns are prohibited at all junctions and intersections and are permitted only at dead ends. 

![U-turns permitted only at dead-ends](../../shared/routing/images/U-TurnsAtJunctions_DeadEnds.png)

_U-turns are permitted only at dead ends._

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`Not Allowed` 

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

U-turns are prohibited at all junctions, intersections, and dead-ends. Even when this parameter value is chosen, a route can still make U-turns at stops. To prohibit U-turns at a stop, you can set its `CurbApproach`  property to the appropriate value (3).

</StyledTableCell>

</StyledTableRow>

</StyledTable>

The default value for this parameter is `Allowed only at Intersections and Dead Ends` .

### point_barriers

Use this parameter to specify one or more points that will act as temporary restrictions or represent additional time or distance that may be required to travel on the underlying streets. For example, a point barrier can be used to represent a fallen tree along a street or a time delay spent at a railroad crossing.

<Note type={"note"}>

The service imposes a maximum limit of 250 point barriers. If this limit is exceeded, the response returns an error message.

</Note>

You can specify barrier geometries as well as attributes using a more comprehensive JSON structure that references a set of features. The property is optional; however, the JSON structure must specify either the `url`  or `features`  property: 

-   `url` âSpecify a REST query request to any ArcGIS Server feature, map, or geoprocessing service that returns a JSON feature set. 
-   `features` âSpecify an array of features. 

    Each feature in this array represents a point barrier and contains the following fields:

    -   `geometry` âSpecify the input point geometry containing `x`  and `y`  properties along with the `spatialReference`  property. If the `spatialReference`  property is defined for the entire JSON, you don't need to define this property for each geometry. Doing so reduces the size of the input JSON if the input has many features and improves performance. This property is not required if the coordinates are in the default spatial reference, WGS84. If the coordinates are in a different spatial reference, you must specify the spatial reference's well-known ID (WKID). See [Using spatial references](DEVSITE/rest/services-reference/enterprise/using-spatial-references) to look up WKID values.

        <Note type={"tip"}>

        It is recommended that you explicitly specify the `spatialReference`  value, and specify it for the entire JSON rather than each individual geometry. 

        </Note>
    -   `attributes` âSpecify each attribute as a key-value pair in which the key is the name of a given field, and the value is the attribute value for the corresponding field.

#### Attributes for point_barriers

When specifying point barriers, you can set properties for each, such as its name or barrier type, using the following attributes:

`Name` 

The name of the barrier.

`BarrierType` 

Specifies whether the point barrier restricts travel completely or adds time or distance when it is crossed. The value for this attribute is specified as one of the following integers (use the numeric code, not the name in parentheses):

-   0 (Restriction)âProhibits travel through the barrier. The barrier is referred to as a restriction point barrier since it acts as a restriction.

    ![Two maps demonstrate how a restriction point barrier affects a route analysis.](../../shared/routing/images/Point_Barriers.png)

    _The first map shows the shortest path between two stops without any restriction point barriers. The second map has a road that is blocked by a fallen tree, so the shortest path between the same points is longer._
-   2 (Added Cost)âTraveling through the barrier increases the travel time or distance by the amount specified in the `Additional_[Cost]`  attributes. This barrier type is referred to as an added cost point barrier.

    ![Two maps demonstrate how added cost point barriers affect a route analysis.](../../shared/routing/images/nac_barriers_apoint.png)

    _The map on the left shows the shortest path between two stops without any added cost point barrier. For the map on the right, the travel time from stop one to stop two would be the same whether going around the north end of the block or the south end; however, since crossing railroad tracks incurs a time penalty (modeled with added cost point barriers), the route with only one railroad crossing is chosen. The cost of crossing the barrier is added to the accumulated travel time of the resulting route._

`Additional_Time` 

The added travel time when the barrier is traversed. This field is applicable only for added-cost barriers and when the `measurement_units`  parameter is time-based

This field value must be greater than or equal to zero, and its units are the same as those specified in the `measurement_units`  parameter.

`Additional_Distance` 

The added distance when the barrier is traversed. This field is applicable only for added-cost barriers and when the `measurement_units`  parameter is distance-based

The field value must be greater than or equal to zero, and its units are the same as those specified in the `measurement_units`  parameter.

`AdditionalCost` 

The added cost when the barrier is traversed. This field is applicable only for added-cost barriers when the impedance attribute is neither time-based nor distance-based.

`FullEdge` 

Specifies how the restriction point barriers are applied to the edge elements during the analysis. The field value is specified as one of the following integers (use the numeric code, not the name in parentheses): 

-   0 (False)âPermits travel on the edge up to the barrier but not through it. This is the default value.
-   1 (True)âRestricts travel anywhere on the associated edge.

`CurbApproach` 

Specifies the direction of traffic that is affected by the barrier. The field value is specified as one of the following integers (use the numeric code, not the name in parentheses): 

-   0 (Either side of vehicle)âThe barrier affects travel over the edge in both directions.
-   1 (Right side of vehicle)âVehicles are only affected if the barrier is on their right side during the approach. Vehicles that traverse the same edge but approach the barrier on their left side are not affected by the barrier. 
-   2 (Left side of vehicle)âVehicles are only affected if the barrier is on their left side during the approach. Vehicles that traverse the same edge but approach the barrier on their right side are not affected by the barrier. 

Because junctions are points and don't have a side, barriers on junctions affect all vehicles regardless of the curb approach. 

The `CurbApproach`  attribute works with both types of national driving standards: right-hand traffic (United States) and left-hand traffic (United Kingdom). First, consider a facility on the left side of a vehicle. It is always on the left side regardless of whether the vehicle travels on the left or right half of the road. What may change with national driving standards is your decision to approach a facility from one of two directions, that is, so it ends up on the right or left side of the vehicle. For example, to arrive at a facility and not have a lane of traffic between the vehicle and the facility, choose 1 (Right side of vehicle) in the United States and 2 (Left side of vehicle) in the United Kingdom.

`Bearing` 

The direction in which a point is moving. The units are degrees and are measured clockwise from true north. This field is used in conjunction with the `BearingTol`  field. 

Bearing data is usually sent automatically from a mobile device equipped with a GPS receiver. Try to include bearing data if you are loading an input location that is moving, such as a pedestrian or a vehicle. 

Using this field tends to prevent adding locations to the wrong edges, which can occur when a vehicle is near an intersection or an overpass, for example. Bearing also helps the tool determine on which side of the street the point is. 

[Learn more about bearing and bearing tolerance](https://pro.arcgis.com/en/pro-app/latest/help/analysis/networks/bearing-and-bearing-tolerance.htm)

`BearingTol` 

The bearing tolerance value creates a range of acceptable bearing values when locating moving points on an edge using the `Bearing`  field. If the `Bearing`  field value is within the range of acceptable values that are generated from the bearing tolerance on an edge, the point can be added as a network location there; otherwise, the closest point on the next-nearest edge is evaluated. 

The units are in degrees, and the default value is 30. Values must be greater than 0 and less than 180. A value of 30 means that when Network Analyst attempts to add a network location on an edge, a range of acceptable bearing values is generated 15 degrees to either side of the edge (left and right) and in both digitized directions of the edge. 

[Learn more about bearing and bearing tolerance](https://pro.arcgis.com/en/pro-app/latest/help/analysis/networks/bearing-and-bearing-tolerance.htm)

`NavLatency` 

This field is only used in the solve process if the `Bearing`  and `BearingTol`  fields also have values; however, entering a `NavLatency`  field value is optional, even when values are present in `Bearing`  and `BearingTol` . `NavLatency`  indicates how much cost is expected to elapse from the moment GPS information is sent from a moving vehicle to a server and the moment the processed route is received by the vehicle's navigation device. 

The units of `NavLatency`  are the same as the units of the impedance attribute.

#### Syntax examples for point_barriers

Syntax for specifying `point_barriers`  using a JSON structure for features 

```other
{
  "spatialReference": {
    "wkid": <wkid>,
    "latestWkid": <wkid>
  },
  "features": [
    {
      "geometry": {
        "x": <x1>,
        "y": <y1>
      },
      "attributes": {
        "<field1>": <value11>,
        "<field2>": <value12>
      }
    },
    {
      "geometry": {
        "x": <x2>,
        "y": <y2>
      },
      "attributes": {
        "<field1>": <value21>,
        "<field2>": <value22>
      }
    }
  ] 
}
```

 

Syntax for specifying `point_barriers`  using a URL returning a JSON response

```other
{
  "url": "<url>"
}
```

 

#### Examples for point_barriers

Example 1: Specifying an added-cost point barrier using JSON structure

This example shows how to use an added-cost point barrier to model a five-minute delay at a railroad crossing. The `BarrierType`  attribute is used to specify the point barrier is added-cost, and the `Additional_Time`  attribute is used to specify the added delay in minutes. 

```other
{
  "spatialReference": {
    "wkid": 4326
  },
  "features": [
    {
      "geometry": {
        "x": 37.541479,
        "y": -122.053461
      },
      "attributes": {
        "Name": "Haley St railroad crossing",
        "BarrierType": 2,
        "Additional_Time": 5
      }
    }
  ]
}
```

 

Example 2: Specifying restriction point barriers in the Web Mercator spatial reference using a JSON structure

This example shows how to use a restriction point barrier to model a road that's blocked by a fallen tree. The barrier's geometry is in the Web Mercator spatial reference and not in the spatial reference of the network dataset.

```other
{
  "spatialReference": {
    "wkid": 102100
  },
  "features": [
    {
      "geometry": {
        "y": -13635398.9398,
        "x": 4544699.034400001
      },
      "attributes": {
        "Name": "Fallen tree at 123 Main St", 
        "BarrierType": 0
      }
    }
  ]
}
```

 

Example 3: Specifying point barriers using a URL

The URL makes a query for a few features from a map service. A URL querying features from a feature service can also be specified.

```other
{
  "url": "https://machine.domain.com/webadaptor/rest/services/NetworkAnalysis/SanDiego/MapServer/21/query?where=1%3D1&outFields=Name&f=json"
}
```

 

```javascript
{
    "url": "http://sampleserver3.arcgisonline.com/ArcGIS/rest/services/Network/USA/MapServer/0/query?where=1%3D1&returnGeometry=true&f=json"
}
```

 

### line_barriers

Use this parameter to specify one or more lines that prohibit travel anywhere the lines intersect the streets. For example, a parade or protest that blocks traffic across several street segments can be modeled with a line barrier. A line barrier can also quickly fence off several roads from being traversed, thereby channeling possible routes away from undesirable parts of the street network.

![Two maps demonstrate how a line barrier affects finding a route between two stops.](../../shared/routing/images/Polyline_Barriers.png)

_The first map displays the shortest path between two stops. The second map shows the shortest path when several streets are blocked by a polyline barrier._

<Note type={"note"}>

The service imposes a limit on the number of streets you can restrict using the `polylineBarriers`  parameter. While there is no limit on the number of lines you can specify as polyline barriers, the combined number of streets intersected by all the lines should not exceed 500. If the value is exceeded, the response returns an error message.

</Note>

You can specify polyline barrier geometries as well as attributes using a JSON structure that references a set of features. The property is optional; however, the JSON structure must specify either the `url`  or `features`  property: 

-   `url` âSpecify a REST query request to any ArcGIS Server feature, map, or geoprocessing service that returns a JSON feature set. 
-   `features` âSpecify an array of features. 

    Each feature in this array represents a polyline barrier and contains the following fields:

    -   `geometry` âSpecify the input point geometry containing `x`  and `y`  properties along with the `spatialReference`  property. If the `spatialReference`  property is defined for the entire JSON, you don't need to define this property for each geometry. Doing so reduces the size of the input JSON if the input has many features and improves performance. This property is not required if the coordinates are in the default spatial reference, WGS84. If the coordinates are in a different spatial reference, you must specify the spatial reference's well-known ID (WKID). See [Using spatial references](DEVSITE/rest/services-reference/enterprise/using-spatial-references) to look up WKID values.

        <Note type={"tip"}>

        It is recommended that you explicitly specify the `spatialReference`  value, and specify it for the entire JSON rather than each individual geometry. 

        </Note>
    -   `attributes` âSpecify each attribute as a key-value pair in which the key is the name of a given field, and the value is the attribute value for the corresponding field.

#### Attributes for line_barriers

When specifying the line barriers, you can set name and barrier type properties for each using the following attributes:

-   `Name` 

    The name of the barrier.

#### Syntax examples for line_barriers

Syntax for specifying line barriers using a JSON structure for features

```other
{
  "spatialReference": {
    "wkid": <wkid>,
    "latestWkid": <wkid>, 
  },
  "features": [
    {
      "geometry": {
        "paths": [
          [
            [<x11>,<y11>],
            [<x12>,<y12>]
          ],
          [
            [<x21>,<y21>],
            [<x22>,<y22>]
          ]
        ]
      },
      "attributes": {
        "<field1>": <value11>,
        "<field2>": <value12>
      }
    },
		  {
      "geometry": {
        "paths": [
          [
            [<x11>,<y11>],
            [<x12>,<y12>]
          ],
          [
            [<x21>,<y21>],
            [<x22>,<y22>]
        ]
      },
      "attributes": {
        "<field1>": <value21>,
        "<field2>": <value22>
      }
    }
  ] 
}
```

 

Syntax for specifying line barriers using a URL returning a JSON response

```other
{
  "url": "<url>"
}
```

 

#### Examples for line_barriers

Example 1: Specifying line barriers using a JSON structure

The example shows how to add two lines as line barriers to restrict travel on the streets intersected by the lines. Barrier 1 is a single-part line feature made up of two points. Barrier 2 is a two-part line feature whose first part is made up of three points and whose second part is made up of two points.

```other
{
  "spatialReference": {
    "wkid": 102100
  },
  "features": [
    {
      "geometry": {
        "paths": [
          [
            [-10804823.397,3873688.372],
            [-10804811.152,3873025.945]
          ]
        ]
      },
      "attributes": {
        "Name": "Barrier 1"
      }
    },
    {
      "geometry": {
        "paths": [
          [
            [-10804823.397,3873688.372],
            [-10804807.813 3873290.911],
            [-10804811.152,3873025.945]
          ],
          [
            [-10805032.678,3863358.76],
            [-10805001.508,3862829.281]
          ]
        ]
      },
      "attributes": {
        "Name": "Barrier 2"
      }
    }
  ]
}
```

 

Example 2: Specifying line barriers using URL

The URL makes a query for a few features from a map service. A URL querying features from a feature service can also be specified.

```javascript
{
  "url": "http://sampleserver3.arcgisonline.com/ArcGIS/rest/services/Network/USA/MapServer/6/query?where=1%3D1&returnGeometry=true&f=json"
}
```

 

### polygon_barriers

Use this parameter to specify polygons that either completely restrict travel or proportionately scale the time or distance required to travel on the streets intersected by the polygons.

<Note type={"note"}>

The service imposes a limit on the number of streets you can restrict using the `polygonBarriers`  parameter. While there is no limit on the number of polygons you can specify as the polygon barriers, the combined number of streets intersected by all the polygons should not exceed 2,000. If the value is exceeded, the response returns an error message.

</Note>

You can specify polygon barrier geometries as well as attributes using a JSON structure that references a set of features. The property is optional; however, the JSON structure must specify either the `url`  or `features`  property: 

-   `url` âSpecify a REST query request to any ArcGIS Server feature, map, or geoprocessing service that returns a JSON feature set. 
-   `features` âSpecify an array of features. 

    Each feature in this array represents a polygon barrier and contains the following fields:

    -   `geometry` âSpecify the input point geometry containing `x`  and `y`  properties along with the `spatialReference`  property. If the `spatialReference`  property is defined for the entire JSON, you don't need to define this property for each geometry. Doing so reduces the size of the input JSON if the input has many features and improves performance. This property is not required if the coordinates are in the default spatial reference, WGS84. If the coordinates are in a different spatial reference, you must specify the spatial reference's well-known ID (WKID). See [Using spatial references](DEVSITE/rest/services-reference/enterprise/using-spatial-references) to look up WKID values.

        <Note type={"tip"}>

        It is recommended that you explicitly specify the `spatialReference`  value, and specify it for the entire JSON rather than each individual geometry. 

        </Note>
    -   `attributes` âSpecify each attribute as a key-value pair in which the key is the name of a given field, and the value is the attribute value for the corresponding field.

#### Attributes for polygon_barriers

When specifying the polygon barriers, you can set properties for each, such as its name or barrier type, using the following attributes:

-   `Name` 

    The name of the barrier.
-   `BarrierType` 

    Specifies whether the barrier restricts travel completely or scales the cost (such as time or distance) for traveling through it. The field value is specified as one of the following integers (use the numeric code, not the name in parentheses):

    -   0 (Restriction)âProhibits traveling through any part of the barrier. The barrier is referred to as a restriction polygon barrier since it prohibits traveling on streets intersected by the barrier. One use of this type of barrier is to model floods covering areas of the street that make traveling on those streets impossible.

        This is the default value.

        ![Two maps demonstrate how a restriction polygon barrier affects finding a route between two stops.](../../shared/routing/images/Polygon_Barriers.png)

        _The first map depicts the shortest path between two stops. The second map shows a polygon barrier blocking flooded streets, so the shortest path between the same two stops is different._
    -   1 (Scaled Cost)âScales the cost (such as travel time or distance) required to travel the underlying streets by a factor specified using the `ScaledTimeFactor`  or `ScaledDistanceFactor`  field. If the streets are partially covered by the barrier, the travel time or distance is apportioned and then scaled. For example, a factor of 0.25 means that travel on underlying streets is expected to be four times faster than normal. A factor of 3.0 means it is expected to take three times longer than normal to travel on underlying streets. This barrier type is referred to as a scaled-cost polygon barrier. It can be used to model storms that reduce travel speeds in specific regions, for example.

        ![Two maps demonstrate how a scaled cost polygon barrier affects finding a route between two stops.](../../shared/routing/images/nac_barriers_spolygon.png)

        _The first map shows a route that goes through inclement weather without regard for the effect that poor road conditions have on travel time. The second map shows a scaled polygon barrier that doubles the travel time of the roads covered by the storm. The route still passes through the southern tip of the storm since it is quicker to spend more time driving slowly through a small part of the storm rather than driving completely around it. The service uses the modified travel time in calculating the best route, and the modified travel time is reported as the total travel time in the response._
-   `ScaledTimeFactor` 

    This is the factor by which the travel time of the streets intersected by the barrier is multiplied. The field value must be greater than zero. 

    This field is applicable only for scaled-cost barriers and when the `measurement_units`  parameter is time-based.
-   `ScaledDistanceFactor` 

    This is the factor by which the distance of the streets intersected by the barrier is multiplied. The field value must be greater than zero.

    This field is applicable only for scaled-cost barriers and when the `measurement_units`  parameter is distance-based.
-   `ScaledCostFactor` 

    This is the factor by which the cost of the streets intersected by the barrier is multiplied. The field value must be greater than zero. 

    This field is applicable only for scaled-cost barriers when the impedance is neither time-based nor distance-based . 

#### Syntax examples for polygon_barriers

Syntax for specifying polygon barriers using a JSON structure for features

```other
{
  "spatialReference": {
    "wkid": <wkid>,
    "latestWkid": <wkid>    
  }
  "features": [
    {
      "geometry": {
        "rings": [
          [
            [<x11>,<y11>],
            [<x12>,<y12>],
            [<x11>,<y11>]
          ],
          [
            [<x21>,<y21>],
            [<x22>,<y22>]
            [<x21>,<y21>]
          ]
        ]
      },
      "attributes": {
        "<field1>": <value11>,
        "<field2>": <value12>
      }
    },
    {
      "geometry": {
        "rings": [
          [
            [<x11>,<y11>],
            [<x12>,<y12>],
            [<x11>,<y11>]
          ],
          [
            [<x21>,<y21>],
            [<x22>,<y22>],
            [<x21>,<y21>]
          ]
        ]
      },
      "attributes": {
        "<field1>": <value21>,
        "<field2>": <value22>
      }
    }
  ]
}
```

 

Syntax for specifying polygon barriers using a URL returning a JSON response

```other
{
  "url": "<url>"
}
```

 

#### Examples for polygon_barriers

Example 1: Specifying polygon barriers using a JSON structure.

The example shows how to add two polygons as barriers. The first polygon named `Flood zone`  is a restriction polygon barrier that prohibits travel on the underlying streets. The polygon is a single-part polygon feature made up of four points. The second polygon named `Severe weather zone`  is a scaled-cost polygon barrier that increases the travel time on underlying streets to one third of the original value. The polygon is a two-part polygon feature. Both parts are made up of four points.

```other
{
  "spatialReference": {
    "wkid": 4326
  },
  "features": [
    {
      "geometry": {
        "rings": [
          [
            [-97.0634,32.8442],
            [-97.0554,32.84],
            [-97.0558,32.8327],
            [-97.0638,32.83],
            [-97.0634,32.8442]
          ]
        ]
      },
      "attributes": {
        "Name": "Flood zone",
        "BarrierType": 0
      }
    },
    {
      "geometry": {
        "rings": [
          [
            
            [-97.0803,32.8235],
            [-97.0776,32.8277],
            [-97.074,32.8254],
            [-97.0767,32.8227],
            [-97.0803,32.8235]
          ],
          [
            [-97.0871,32.8311],
            [-97.0831,32.8292],
            [-97.0853,32.8259],
            [-97.0892,32.8279],
            [-97.0871,32.8311]
            
          ]
        ]
      },
      "attributes": {
        "Name": "Severe weather zone",
        "BarrierType": 1,
        "ScaledTimeFactor": 3
      }
    }
  ]
}
```

 

Example 2: Specifying a polygon barrier using a URL

The URL makes a query for a few features from a map service. A URL querying features from a feature service can also be specified.

```javascript
{
  "url": "http://sampleserver3.arcgisonline.com/ArcGIS/rest/services/Network/USA/MapServer/7/query?where=1%3D1&returnGeometry=true&f=json"
}
```

 

### use_hierarchy

Specify whether hierarchy will be used when finding the shortest paths.

-   `true` âUse hierarchy when travelling between stops. When hierarchy is used, the service prefers higher-order streets (such as freeways) to lower-order streets (such as local roads) and can be used to simulate the driver preference of traveling on freeways instead of local roads even if that means a longer trip. This is especially true when finding routes to faraway locations, because drivers on long-distance trips tend to prefer traveling on freeways where stops, intersections, and turns can be avoided. Using hierarchy is computationally faster, especially for long-distance routes, since the service can determine the best route from a relatively smaller subset of streets.
-   `false` âDo not use hierarchy when travelling between stops. When hierarchy is not used, the service considers all the streets and doesn't prefer higher-order streets when finding the route. This is often used when finding short-distance routes within a city.

The default value for this parameter is `true` .

<Note type={"caution"}>

The value of this parameter, regardless of whether you rely on the default or explicitly set a value, is overridden when `travel_mode`  is set to any other value than `Custom` . The default value for `travel_mode`  is `Driving` , so unless you set `travel_mode`  to a different value, this parameter value will be overridden.

</Note>

<Note type={"note"}>

The service automatically reverts to using hierarchy if the straight-line distance between the stops is greater than 50 miles (80.46 kilometers), even if you have specified to find the route without using hierarchy.

</Note>

### restrictions

Use this parameter to specify the restrictions that will be honored by the service. A restriction represents a driving preference or requirement. In most cases, restrictions cause roads or pathways to be prohibited, but they can also cause them to be avoided or preferred. For instance, using the `Avoid Toll  Roads`  restriction will result in a route that will include toll roads only when it is required to travel on toll roads to visit a stop. Use `Height Restriction`  to route around clearances that are lower than the height of the vehicle. If the vehicle is carrying corrosive materials, you can use the `Any Hazmat Prohibited`  restriction to prevent hauling the materials along roads where it is marked as illegal to do so.

<Note type={"note"}>

The value of this parameter, regardless of whether you rely on the default or explicitly set a value, is overridden when you pass in `travel_mode` . 

</Note>

<Note type={"note"}>

Some restrictions are supported only in certain countries. If you specify restriction names that are not available in the country where the input points are located, the service ignores the invalid restrictions and returns warning messages indicating the names for the restrictions that were not considered when performing the analysis. 

</Note>

<Note type={"note"}>

You may need to specify an additional value, the restriction attribute parameter, for a restriction to get the intended results. This value must be associated with the restriction name and a restriction parameter using `attributeParameterValues` .

</Note>

This parameter value is specified as a comma-separated list of restriction names. A value of none indicates that no restrictions will be used when finding the shortest paths. 

The service supports the following restriction names: 

-   Any Hazmat ProhibitedâThe results will not include roads where transporting any kind of hazardous material is prohibited. 
-   Avoid Carpool RoadsâThe results will avoid roads that are designated exclusively for car pool (high-occupancy) vehicles. 
-   Avoid Express LanesâThe results will avoid roads designated as express lanes. 
-   Avoid FerriesâThe results will avoid ferries. 
-   Avoid GatesâThe results will avoid roads where there are gates, such as keyed access or guard-controlled entryways.
-   Avoid Limited Access RoadsâThe results will avoid roads that are limited-access highways.
-   Avoid Private RoadsâThe results will avoid roads that are not publicly owned and maintained.
-   Avoid Roads Unsuitable for PedestriansâThe results will avoid roads that are unsuitable for pedestrians.
-   Avoid StairwaysâThe results will avoid all stairways on a pedestrian-suitable route.
-   Avoid Toll RoadsâThe results will avoid all toll roads for automobiles.
-   Avoid Toll Roads for TrucksâThe results will avoid all toll roads for trucks.
-   Avoid Truck Restricted RoadsâThe results will avoid roads where trucks are not allowed, except when making deliveries.
-   Avoid Unpaved RoadsâThe results will avoid roads that are not paved (for example, dirt, gravel, and so on). 
-   Axle Count RestrictionâThe results will not include roads where trucks with the specified number of axles are prohibited. The number of axles can be specified using the Number of Axles restriction parameter.
-   Driving a BusâThe results will not include roads where buses are prohibited. Using this restriction will also ensure that the results will honor one-way streets. 
-   Driving a TaxiâThe results will not include roads where taxis are prohibited. Using this restriction will also ensure that the results will honor one-way streets. 
-   Driving a TruckâThe results will not include roads where trucks are prohibited. Using this restriction will also ensure that the results will honor one-way streets. 
-   Driving an AutomobileâThe results will not include roads where automobiles are prohibited. Using this restriction will also ensure that the results will honor one-way streets. 
-   Driving an Emergency VehicleâThe results will not include roads where emergency vehicles are prohibited. Using this restriction will also ensure that the results will honor one-way streets.
-   Height RestrictionâThe results will not include roads where the vehicle height exceeds the maximum allowed height for the road. The vehicle height can be specified using the Vehicle Height (meters) restriction parameter. 
-   Kingpin to Rear Axle Length RestrictionâThe results will not include roads where the vehicle length exceeds the maximum allowed kingpin to rear axle for all trucks on the road. The length between the vehicle kingpin and the rear axle can be specified using the Vehicle Kingpin to Rear Axle Length (meters) restriction parameter. 
-   Length RestrictionâThe results will not include roads where the vehicle length exceeds the maximum allowed length for the road. The vehicle length can be specified using the Vehicle Length (meters) restriction parameter. 
-   Preferred for PedestriansâThe results will use preferred routes suitable for pedestrian navigation. 
-   Riding a MotorcycleâThe results will not include roads where motorcycles are prohibited. Using this restriction will also ensure that the results will honor one-way streets.
-   Roads Under Construction ProhibitedâThe results will not include roads that are under construction.
-   Semi or Tractor with One or More Trailers ProhibitedâThe results will not include roads where semis or tractors with one or more trailers are prohibited. 
-   Single Axle Vehicles ProhibitedâThe results will not include roads where vehicles with single axles are prohibited.
-   Tandem Axle Vehicles ProhibitedâThe results will not include roads where vehicles with tandem axles are prohibited.
-   Through Traffic ProhibitedâThe results will not include roads where through traffic (nonlocal traffic) is prohibited.
-   Truck with Trailers RestrictionâThe results will not include roads where trucks with the specified number of trailers on the truck are prohibited. The number of trailers on the truck can be specified using the Number of Trailers on Truck restriction parameter.
-   Use Preferred Hazmat RoutesâThe results will prefer roads that are designated for transporting hazardous materials. 
-   Use Preferred Truck RoutesâThe results will prefer roads that are designated as truck routes, such as roads that are part of the national network as specified by the National Surface Transportation Assistance Act in the United States, or roads that are designated as truck routes by the state or province, or roads that are preferred by truckers when driving in an area.
-   WalkingâThe results will not include roads where pedestrians are prohibited.
-   Weight RestrictionâThe results will not include roads where the vehicle weight exceeds the maximum allowed weight for the road. The vehicle weight can be specified using the Vehicle Weight (kilograms) restriction parameter.
-   Weight per Axle RestrictionâThe results will not include roads where the vehicle weight per axle exceeds the maximum allowed weight per axle for the road. The vehicle weight per axle can be specified using the Vehicle Weight per Axle (kilograms) restriction parameter.
-   Width RestrictionâThe results will not include roads where the vehicle width exceeds the maximum allowed width for the road. The vehicle width can be specified using the Vehicle Width (meters) restriction parameter.

<Note type={"note"}>

The `Driving a Delivery Vehicle`  restriction attribute is no longer available. The service will ignore this restriction since it is invalid. To achieve similar results, use the `Driving a Truck`  restriction attribute along with the `Avoid Truck Restricted Roads`  restriction attribute.

</Note>

The restrictions parameter value is specified as a list of restriction names. A value of `null`  indicates that no restrictions should be used when finding the best route, but only when `travel_mode`  is set to `Custom` . 

#### Example for restrictions

```javascript
restrictions=[Driving a Truck, Height Restriction, Length Restriction]
```

 

### attribute_parameter_values

Use this parameter to specify additional values required by an attribute or restriction, such as to specify whether the restriction prohibits, avoids, or prefers travel on restricted roads. If the restriction is meant to avoid or prefer roads, you can further specify the degree to which they are avoided or preferred using this parameter. For example, you can choose to never use toll roads, avoid them as much as possible, or prefer them.

<Note type={"note"}>

The value of this parameter, regardless of whether you rely on the default or explicitly set a value, is overridden when you pass in `travel_mode`  parameter. 

</Note>

You can specify `attribute_parameter_values`  parameter using JSON structure that represents a set of features. The JSON structure can include the following properties:

-   `features` âSpecify an array of features. 

    -   `geometry` âSpecify the input point geometry containing `x`  and `y`  properties along with the `spatialReference`  property. If the `spatialReference`  property is defined for the entire JSON, you don't need to define this property for each geometry. Doing so reduces the size of the input JSON if the input has many features and improves performance. This property is not required if the coordinates are in the default spatial reference, WGS84. If the coordinates are in a different spatial reference, you must specify the spatial reference's well-known ID (WKID). See [Using spatial references](DEVSITE/rest/services-reference/enterprise/using-spatial-references) to look up WKID values.

        <Note type={"tip"}>

        It is recommended that you explicitly specify the `spatialReference`  value, and specify it for the entire JSON rather than each individual geometry. 

        </Note>
    -   `attributes` âSpecify each attribute as a key-value pair in which the key is the name of a given field, and the value is the attribute value for the corresponding field.
-   `url` âSpecify a REST query request to any ArcGIS Server feature, map, or geoprocessing service that returns a JSON feature set. 

Each feature in the features array represents an attribute parameter and contains the following fields:

-   `attributes` âSpecify each attribute as a key-value pair in which the key is the name of a given field, and the value is the attribute value for the corresponding field.

<Note type={"note"}>

The JSON structure for the `attribute_parameter_values`  parameter does not have a `geometry`  property. 

</Note>

#### Attributes for attribute_parameter_values

The `attribute_parameter_values`  parameter can be specified with the following attributes:

-   `AttributeName` âThe name of the restriction. 
-   `ParameterName` âThe name of the parameter associated with the restriction. A restriction can have one or more `ParameterName`  values based on its intended use, which implies you may need multiple `attribute_parameter_values`  parameters for a single attribute name.
-   `ParameterValue` âThe value for the `ParameterName`  that is used by the service when evaluating the restriction.

<Note type={"note"}>

In most cases, the `attribute_parameter_values`  parameter is dependent on the `restrictions`  parameter. The `ParameterValue`  specified as part of `attribute_parameter_values`  is applicable only if the restriction name is specified as the value for the `restrictions`  parameter.

</Note>

When specifying the `attribute_parameter_values`  parameter, each restriction (listed as `AttributeName` ) has a `ParameterName`  value, `Restriction Usage` , that specifies whether the restriction prohibits, avoids, or prefers travel on the roads associated with the restriction and the degree to which the roads are avoided or preferred.

The `Restriction Usage` `ParameterName`  can be assigned any of the following string values or their equivalent numeric values listed within the parentheses:

-   `Prohibited`  (`-1` )âTravel on the roads that have the restriction is prohibited.
-   `Avoid_High`  (`5` )âIt is very unlikely the service will include in the route the roads that are associated with the restriction.
-   `Avoid_Medium`  (`2` )âIt is unlikely the service will include in the route the roads that are associated with the restriction.
-   `Avoid_Low`  (`1.3` )âIt is somewhat unlikely the service will include in the route the roads that are associated with the restriction.
-   `Prefer_Low`  (`0.8` )âIt is somewhat likely the service will include in the route the roads that are associated with the restriction.
-   `Prefer_Medium` (`0.5` )âIt is likely the service will include in the route the roads that are associated with the restriction.
-   `Prefer_High`  (`0.2` )âIt is very likely the service will include in the route the roads that are associated with the restriction.

The following table lists the restriction names and the default restriction parameter values for all the restrictions. The default value for the `attribute_parameter_values`  parameter is the JSON structure containing all the rows from the below table.

<Note type={"note"}>

If you want to use the default value for any restriction, `AttributeName` , `ParameterName` , and `ParameterValue`  do not have to be specified as part of the `attribute_parameter_values`  parameter.

</Note>

<StyledTable headers={"Restriction name,Restriction parameter name,Restriction parameter default value"}>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

Any Hazmat Prohibited

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Restriction Usage

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Prohibited

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

Avoid Carpool Roads

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Restriction Usage

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Prohibited

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

Avoid Express Lanes

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Restriction Usage

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Prohibited

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

Avoid Ferries

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Restriction Usage

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Avoid_Medium

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

Avoid Gates

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Restriction Usage

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Avoid_Medium

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

Avoid Limited Access Roads

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Restriction Usage

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Avoid_Medium

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

Avoid Private Roads

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Restriction Usage

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Avoid_Medium

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

Avoid Roads Unsuitable for Pedestrians

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Restriction Usage

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Avoid_High

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

Avoid Stairways

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Restriction Usage

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Avoid_High

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

Avoid Toll Roads

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Restriction Usage

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Avoid_Medium

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

Avoid Toll Roads for Trucks

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Restriction Usage

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Avoid_Medium

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

Avoid Truck Restricted Roads

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Restriction Usage

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Avoid_High

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

Avoid Unpaved Roads

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Restriction Usage

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Avoid_High

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

Axle Count Restriction

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Number of Axles

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

0

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

Restriction Usage

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Prohibited

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

Driving a Bus

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Restriction Usage

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Prohibited

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

Driving a Taxi

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Restriction Usage

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Prohibited

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

Driving a Truck

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Restriction Usage

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Prohibited

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

Driving an Automobile

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Restriction Usage

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Prohibited

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

Driving an Emergency Vehicle

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Restriction Usage

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Prohibited

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

Height Restriction

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Restriction Usage

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Prohibited

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

Vehicle Height (meters)

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

0

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

Kingpin to Rear Axle Length Restriction

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Restriction Usage

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Prohibited

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

Vehicle Kingpin to Rear Axle Length (meters)

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

0

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

Length Restriction

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Restriction Usage

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Prohibited

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

Vehicle Length (meters)

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

0

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

Preferred for Pedestrians

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Restriction Usage

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Prefer_Low

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

Riding a Motorcycle

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Restriction Usage

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Prohibited

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

Roads Under Construction Prohibited

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Restriction Usage

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Prohibited

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

Semi or Tractor with One or More Trailers Prohibited

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Restriction Usage

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Prohibited

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

Single Axle Vehicles Prohibited

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Restriction Usage

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Prohibited

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

Tandem Axle Vehicles Prohibited

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Restriction Usage

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Prohibited

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

Through Traffic Prohibited

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Restriction Usage

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Avoid_High

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

Truck with Trailers Restriction

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Restriction Usage

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Prohibited

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

Number of Trailers on Truck

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

0

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

Use Preferred Hazmat Routes

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Restriction Usage

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Prefer_Medium

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

Use Preferred Truck Routes

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Restriction Usage

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Prefer_High

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

Walking

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Restriction Usage

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Prohibited

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

WalkTime

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Walking Speed (km/h)

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

5

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

Weight Restriction

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Restriction Usage

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Prohibited

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

Vehicle Weight (kilograms)

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

0

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

Weight per Axle Restriction

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Restriction Usage

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Prohibited

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

Vehicle Weight per Axle (kilograms)

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

0

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

Width Restriction

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Restriction Usage

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Prohibited

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

Vehicle Width (meters)

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

0

</StyledTableCell>

</StyledTableRow>

</StyledTable>

#### Syntax example for attribute_parameter_values

```other
{
    "features": [
        {
            "attributes": {
                "<field1>": <value11>,
                "<field2>": <value12>,
                "<field3>": <value13>

            }
        },
        {
            "attributes": {
                "<field1>": <value21>,
                "<field2>": <value22>,
                "<field3>": <value13>
            }
        }
    ] 
}
```

 

#### Examples for attribute_parameter_values

This example shows how to specify the height and weight of the vehicle for use with the height and weight restrictions respectively along with a high preference to include designated truck routes. This results in a route that does not include any roads where the clearance under overpasses or through tunnels is less than the vehicle height. The results will also not include any roads with load limited bridges or local roads that prohibit heavy vehicles if the vehicle weight exceeds the maximum permissible weight. However, the route will include as many roads as possible that are designated as preferred truck routes. 

Note that the `Restriction Usage` `ParameterName`  for the `Height Restriction`  and the `Weight Restriction`  restrictions are not specified since we want to use the default value of `PROHIBITED`  for these restriction parameters. 

```other
attribute_parameter_values=
{
    "features": [
        {
            "attributes": {
                "AttributeName": "Height Restriction",
                "ParameterName": "Vehicle Height (meters)",
                "ParameterValue": 4.12
            }
        },
        {
            "attributes": {
                "AttributeName": "Weight Restriction",
                "ParameterName": "Vehicle Weight (kilograms)",
                "ParameterValue": 36287
            }
        },
        {
            "attributes": {
                "AttributeName": "Use Preferred Truck Routes",
                "ParameterName": "Restriction Usage",
                "ParameterValue": "PREFER_HIGH"
            }
        }
    ]
}
```

 

### impedance

Specify the impedance.

<Note type={"note"}>

The value of this parameter, regardless of whether you rely on the default or explicitly set a value, is overridden when you pass in `travel_mode` . 

</Note>

Impedance is a value that quantifies travel along the transportation network. Travel distance is an example of impedance; it quantifies the length of walkways and road segments. Similarly, drive timeâthe typical time it takes to drive a car along a road segmentâis an example of impedance. Drive times may vary by type of vehicleâfor instance, the time it takes for a truck to travel along a path tends to be longer than a carâso there can be many impedance values representing travel times for different vehicle types. Impedance values may also vary with time; live and typical traffic reference dynamic impedance values. Each walkway and road segment stores at least one impedance value. When performing a network analysis, the impedance values are used to calculate the best results, such as finding the shortest routeâthe route that minimizes impedanceâbetween two points.

The `impedance`  parameter can be specified using the following values:

-   **TravelTime**âHistorical and live traffic data is used. This option is good for modeling the time it takes automobiles to travel along roads at a specific time of day using live traffic speed data where available. When using **TravelTime**, you can optionally set the TravelTime::Vehicle Maximum Speed (km/h) attribute parameter to specify the physical limitation of the speed the vehicle is capable of traveling.
-   **Minutes**âLive traffic data is not used, but historical average speeds for automobiles data is used.
-   **TruckTravelTime**âHistorical and live traffic data is used, but the speed is capped at the posted truck speed limit. This is good for modeling the time it takes for the trucks to travel along roads at a specific time. When using **TruckTravelTime**, you can optionally set the TruckTravelTime::Vehicle Maximum Speed (km/h) attribute parameter to specify the physical limitation of the speed the truck is capable of traveling.
-   **TruckMinutes**âLive traffic data is not used, but the smaller of the historical average speeds for automobiles and the posted speed limits for trucks are used.
-   **WalkTime**âThe default is a speed of 5 km/hr on all roads and paths, but this can be configured through the WalkTime::Walking Speed (km/h) attribute parameter.
-   **Miles**âLength measurements along roads are stored in miles and can be used for performing analysis based on shortest distance.
-   **Kilometers**âLength measurements along roads are stored in kilometers and can be used for performing analysis based on shortest distance.

If you choose a time-based impedance, such as `TravelTime` , `TruckTravelTime` , `Minutes` , `TruckMinutes` , or `WalkTime` , the `measurement_units`  parameter must be set to a time-based value; if you choose a distance-based impedance such as `Miles` , `Kilometers` , the `measurement_units`  must be distance-based.

<Note type={"note"}>

`Drive Time` , `Truck Time` , `Walk Time` , and `Travel Distance`  impedance values are no longer supported and will be removed in a future release. 

</Note>

### allocation_line_shape

Specify the type of line features that are output by the tool. The parameter accepts the following values:

-   `Straight Line` âStraight lines between solution facilities and the demand points allocated to them are returned. Drawing straight lines on a map helps you visualize how demand is allocated.
-   `None` âA table containing data about the shortest paths between solution facilities and the demand points allocated to them is returned; lines are not returned. 

The default value is `Straight Line` . 

Regardless of the value you choose for the `allocation_line_shape`  parameter, the shortest route is determined by minimizing the travel time or the travel distance, not using the straight-line distance between incidents and facilities. That is, this parameter only changes the output line shapes; it doesn't change the measurement method.

### save_output_network_analysis_layer

Use this parameter to specify if the service should save the analysis settings as a network analysis layer file. You cannot directly work with this file even when you open the file in an ArcGIS Desktop application like ArcGIS Pro. It is meant to be sent to [Esri Technical Support](https://support.esri.com/en/contact-tech-support) in order to diagnose the quality of results returned from the service. 

-   `true` âSaves network analysis layer file. The file can be downloaded from the URL provided as part of the `output_network_analysis_layer`  parameter. 							
-   `false` âDon't save network analysis layer file. 

The default value is `false` .

### overrides

<Note type={"note"}>

This parameter is for internal use only.

</Note>

### time_impedance

The time-based impedance value represents the travel time along road segments or on other parts of the transportation network.

-   `Minutes` 
-   `TravelTime` 
-   `WalkTime` 
-   `TruckMinutes` 
-   `TruckTravelTime` 

<Note type={"note"}>

If the impedance for the travel mode, as specified using the 

`impedance`

  parameter, is time based, the values for the 

`time_impedance`

  and 

`impedance`

  parameters must be identical. Otherwise, the service will return an error.

</Note>

<Note type={"note"}>

This parameter is used for defining a custom travel mode. The value of this parameter is ignored if the `travel_mode`  parameter is not set to `Custom` .

</Note>

<Note type={"note"}>

These value are specific to the services published with the ArcGIS StreetMap Premium data. The values will be different if you are using other data for the analysis.

</Note>

### distance_impedance

The distance-based impedance value represents the travel distance along road segments or on other parts of the transportation network.

-   `Miles` 
-   `Kilometers` 

<Note type={"note"}>

If the impedance for the travel mode, as specified using the 

`impedance`

  parameter, is distance based, the values for the 

`distance_impedance`

  and 

`impedance`

  parameters must be identical. Otherwise, the service will return an error.

</Note>

<Note type={"note"}>

This parameter is used for defining a custom travel mode. The value of this parameter is ignored if the `travel_mode`  parameter is not set to `Custom` .

</Note>

<Note type={"note"}>

These value are specific to the services published with the ArcGIS StreetMap Premium data. The values will be different if you are using other data for the analysis.

</Note>

### output_format

Specifies the format in which the output features will be returned. 

-   **Feature Set**âThe output features will be returned as feature classes and tables. This is the default. 
-   **JSON File**âThe output features will be returned as a compressed file containing the JSON representation of the outputs. When this option is specified, the output is a single file (with a `.zip`  extension) that contains one or more JSON files (with a `.json`  extension) for each of the outputs created by the service. 
-   **GeoJSON File**âThe output features will be returned as a compressed file containing the GeoJSON representation of the outputs. When this option is specified, the output is a single file (with a `.zip`  extension) that contains one or more GeoJSON files (with a `.geojson`  extension) for each of the outputs created by the service.

<Note type={"note"}>

Specifying file based output format, such as `JSON File` , is useful when you are calling the service using the REST endpoint of the service. In such cases, returning all the outputs as a single file allows you to download large results that can be generated by the service. For example, if you are working with `GenerateOriginDestinationCostMatrix`  service and you generate a travel matrix with 1,000,000 records, returning such a large output as a `Feature Set`  can cause the service to fail since the service will try to send the entire output in a single attempt. With a file based output, the service sends the output in multiple chunks reducing the possibility of timeouts when returning the outputs. 

</Note>

### env:outSR

Use this parameter to specify the spatial reference of the geometries, such as line or point features, returned by the service.

The parameter value can be specified as a well-known ID (WKID) for the spatial reference. See [Using spatial references](DEVSITE/rest/services-reference/enterprise/using-spatial-references) to look up WKID values.

Many of the basemaps provided by ArcGIS Online are in the Web Mercator spatial reference (WKID 102100). Specifying `env:outSR=102100`  returns the geometries in the Web Mercator spatial reference, which can be drawn on top of the basemaps. 

### ignore_invalid_locations

Specifies whether invalid input locations will be ignored. 

-   `true` â

    Network locations that are unlocated will be ignored and the analysis will run using valid network locations only. The analysis will also continue if locations are on nontraversable elements or have other errors. This is useful if you know the network locations are not all correct, but you want to run the analysis with the network locations that are valid. This is the default.
-   `false` â

    Invalid locations will not be ignored. Do not run the analysis if there are invalid locations. Correct the invalid locations and rerun the analysis.

### locate_settings

Use this parameter to specify settings that affect how inputs are located, such as the maximum search distance to use when locating the inputs on the network or the network sources being used for locating.

[Learn more about locating inputs](https://pro.arcgis.com/en/pro-app/latest/help/analysis/networks/locating-analysis-inputs.htm)

The default value is as follows:

```javascript
{
  "default": {
    "tolerance": 20000,
    "toleranceUnits": "esriMeters",
    "allowAutoRelocate": true,
    "sources": [
      {
        "name": "main.Routing_Streets"
      }
    ]
  }
}
```

 

The locator JSON object has following properties:

-   `tolerance`  and `toleranceUnits` âAllows you to control the maximum search distance when locating inputs. If no valid network location is found within this distance, the input features will be considered unlocated. A small search tolerance decreases the likelihood of locating on the wrong street but increases the likelihood of not finding any valid network location. The `toleranceUnits`  parameter value can be specified as one of the following values:

    -   `esriCentimeters` 
    -   `esriDecimalDegrees` 
    -   `esriDecimeters` 
    -   `esriFeet` 
    -   `esriInches` 
    -   `esriIntFeet` 
    -   `esriIntInches` 
    -   `esriIntMiles` 
    -   `esriIntNauticalMiles` 
    -   `esriIntYards` 
    -   `esriKilometers` 
    -   `esriMeters` 
    -   `esriMiles` 
    -   `esriMillimeters` 
    -   `esriNauticalMiles` 
    -   `esriYards` 
-   `sources` â Allows you to control which network source can be used for locating. For example, you can configure the analysis to locate inputs on streets but not on sidewalks. The list of possible sources on which to locate is specific to the network dataset this service references. Only the sources that are present in the sources array are used for locating. Sources is specified as an array of objects each having the following property:

    -   `name` âThe name of the network source feature class that can be used for locating inputs
-   `allowAutoRelocate` âAllows you to control whether inputs with existing network location fields can be automatically relocated when solving to ensure valid, routable location fields for the analysis. If the value is `true` , points located on restricted network elements and points affected by barriers will be relocated to the closest routable location. If the value is `false` , network location fields will be used as is even if the points are unreachable, and this may cause the solve to fail. Even if the value is `false` , inputs with no location fields or incomplete location fields will be located during the solve operation.

The parameter value is specified as a JSON object. The JSON object allows you to specify a locator JSON for all input feature in the analysis, or you can specify an override for a particular input. The override allows you to have different settings for each analysis input. 					When specifying the `locateSettings`  JSON, you must provide all the properties including `tolerance` , `toleranceUnits` , `sources` , and `allowAutoRelocate`  in the default locator JSON object. If you need to provide a different locator JSON for a particular input class, you must include the overrides property for that input. The property name must match the input parameter name. The locator JSON for a particular input doesn't need to include all the properties; you only need to include the properties that are different from the default locator JSON properties.

<Note type={"note"}>

Currently, you can't specify different source names for the `sources`  array. Also, `allowAutoRelocate`  is always set to `true`  since the service does not support location fields. 

</Note>

#### Syntax for locate_settings

Syntax for specifying `locate_settings`  using JSON structure.

<Note type={"note"}>

Line barriers and polygon barriers doesn't support the `tolerance`  and `toleranceUnits`  properties.

</Note>

```javascript
{
    "default": {
        "tolerance": <value>,
        "toleranceUnits": "<unit>",
        "allowAutoRelocate": true | false,
        "sources": [{
            "name": "<sourceName>"            
        }]
    },
    "overrides": {
        "facilities": {
            "tolerance": <value>,
            "toleranceUnits": "<unit>",
            "allowAutoRelocate": true | false,
            "sources": [{
                "name": "<sourceName>"                
            }]
        },
        "demand_points": {
            "tolerance": <value>,
            "toleranceUnits": "<unit>",
            "allowAutoRelocate": true | false,
            "sources": [{
                "name": "<sourceName>"                
            }]
        },
        "point_barriers": {
            "tolerance": <value>,
            "toleranceUnits": "<unit>",
            "allowAutoRelocate": true | false,             
            "sources": [{
                "name": "<sourceName>"                
            }]
        },
        "line_barriers": {
            "allowAutoRelocate": true | false,       
            "sources": [{
                "name": "<sourceName>"               
            }]
        },
        "polygon_barriers": {
            "allowAutoRelocate": true | false,  
            "sources": [{
                "name": "<sourceName>"               
            }]
        }
    }
}
```

 

#### Example for locate_settings

Example 1: Specify default locate settings using JSON structure

This example shows how to specify locate settings so inputs are located within 500 meters of the specified location. A small search tolerance like this can be valuable if you are solving using a walking travel mode and don't want inputs to be located farther than 500 meters from the original point location.

```javascript
{
  "default": {
    "tolerance": 500,
    "toleranceUnits": "esriMeters",
    "allowAutoRelocate": true,
    "sources": [
      {
        "name": "main.Routing_Streets"
      }
    ]
  }
}
```

 

## JSON response

When you submit a request, the service assigns a unique job ID for the transaction. The job ID and the status of the job are returned in the response.

```other
{
    "jobId": <jobID>,
    "jobStatus": <jobStatus>
}
```

 

The `jobStatus`  property can have the following values:

-   esriJobSubmitted
-   esriJobWaiting
-   esriJobExecuting
-   esriJobSucceeded
-   esriJobFailed
-   esriJobTimedOut
-   esriJobCancelling
-   esriJobCancelled

You can use the job ID to periodically check the status of the job and messages. Additionally, if the job has successfully completed, you can use the job ID to retrieve the results or even the inputs. The job information and results remain available for 24 hours after the job is done.

After the initial request is submitted, you can make a request of the following form to get the status of the job:

`https://logistics.arcgis.com/arcgis/rest/services/World/LocationAllocation/GPServer/SolveLocationAllocation/jobs/<yourJobID>?token=<yourToken>&returnMessages=true&f=json` 

```other
{
    "jobId": "<jobId>",
    "jobStatus": "<jobStatus>",
    "messages": [
        {
            "type": "<type1>",
            "description": "<description1>"
        },
        {
            "type": "<type2>",
            "description": "<description2>"
        }
    ]
}
```

 

While a job is executing, you can cancel it by making a request of the form:

`https://logistics.arcgis.com/arcgis/rest/services/World/LocationAllocation/GPServer/SolveLocationAllocation/jobs/<yourJobID>/cancel?token=<yourToken>&f=json` 

When you submit your request, if the service is busy processing other requests, the job will wait in the queue. The job status will be reported as `esriJobSubmitted` . If your application cannot wait for the entire duration while the job is in the queue, you can cancel the request and submit it at a later time. A canceled request will not incur any service credits. However, if your application did not cancel the request, it will eventually execute and will incur service credits irrespective of whether your application retrieved the results or ignored them. Therefore, your application should always cancel the request if required. 

After the successful completion of the job, you can retrieve a specific output by making a request of the following form:

`https://logistics.arcgis.com/arcgis/rest/services/World/LocationAllocation/GPServer/SolveLocationAllocation/jobs/<yourJobID>/results/<output_parameter_name>?token=<yourToken>&f=json` 

Instead of retrieving outputs individually, you can make a request of the following form to retrieve all the outputs.

`https://logistics.arcgis.com/arcgis/rest/services/World/LocationAllocation/GPServer/SolveLocationAllocation/jobs/<yourJobID>/results?token=<yourToken>&f=json` 

Refer to the [Output parameters](/location-allocation-service#output-parameters) section for more information on how to interpret the solution provided by the service.

<Note type={"tip"}>

Since retrieving all the outputs using the results operation can take significantly longer to execute and can cause a timeout error, this option is recommended when your request parameters are creating only the outputs that you need and not all the outputs the service can possibly generate. 

</Note>

The feature geometries are returned by default in the `WGS84`  spatial reference. You can get the feature geometries in any spatial reference by specifying the `outSR`  parameter when retrieving an output parameter or all the output parameters. 

The below example shows how to retrieve an output parameter with feature geometries in `Web Mercator (WKID: 102100)`  spatial reference. 

`https://logistics.arcgis.com/arcgis/rest/services/World/LocationAllocation/GPServer/SolveLocationAllocation/jobs/<yourJobID>/results/<output_parameter_name>?token=<yourToken>&f=json&outSR=102100` 

The below example shows how to retrieve all the output parameters with feature geometries in Web Mercator (WKID: 102100) spatial reference.

`https://logistics.arcgis.com/arcgis/rest/services/World/LocationAllocation/GPServer/SolveLocationAllocation/jobs/<yourJobID>/results?token=<yourToken>&f=json&outSR=102100` 

The below example shows how to retrieve the value for an input parameter by making the requests of the following form:

`https://logistics.arcgis.com/arcgis/rest/services/World/LocationAllocation/GPServer/SolveLocationAllocation/jobs/<yourJobID>/inputs/<inputParameterName>?token=<yourToken>&f=json` 

The below example shows how to retrieve all the inputs by making the request of the following form.

`https://logistics.arcgis.com/arcgis/rest/services/World/LocationAllocation/GPServer/SolveLocationAllocation/jobs/<yourJobID>/inputs?token=<yourToken>&f=json` 

## Output parameters

After successfully executing, the service returns the chosen facilities, participating demand points, connecting lines between demand points and the facilities they were assigned to, and the status of whether the analysis was successful. This information is output in the following output parameters: 

<Note type={"tip"}>

The geometries for the output parameters are returned by default in the `WGS84`  (wkid: 4326) spatial reference. You can get the geometries in a different spatial reference using the `env:outSR`  parameter when submitting the request or by using the `outSR`  parameter when retrieving any output parameter. 

</Note>

### output_facilities

This provides access to the chosen, required, and competitor facilities, as well as any candidate facilities that were not chosen. 

This parameter supports the following fields. In addition to these fields, the parameter also includes all the fields from the input facilities used for the analysis.

<StyledTable headers={"Field,Description"}>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`Name` 

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

The name of the facility. The values for this field are copied from the `Name`  field on the input facilities. 

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`FacilityOID` 

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

The `ObjectID`  value of the corresponding input facility feature. This field is often used to join information from the input facilities. 

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`FacilityType` 

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

The best facilities, or those that are chosen in the analysis, are indicated in this field. The facility types are as follows: 

-   0 (Candidate)âThe service didn't choose the candidate facility to be part of the solution. 
-   1 (Required)âPrior to submitting the analysis, the facility was designated as required; therefore, it is part of the solution regardless of how much demand it captured.
-   2 (Competitor)âThe facility represents the rivals and will remove demand from the problem. Competitor facilities are specific to the Maximize Market Share and Target Market Share problem types; they are ignored in other problem types.
-   3 (Chosen)âThese are the chosen facilities; that is, they are candidate facilities that capture the most demand. 

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`Weight` 

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

The relative weighting of the facility, which is used to rate the attractiveness, desirability, or bias of one facility compared to another. The values for this field are copied from the `Weight`  field on the input facilities.

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`Capacity` 

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

The amount of weighted demand the facility is capable of supplying. The values for this field are copied from the `Capacity`  field on the input facilities.

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`DemandCount` 

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

A count of demand points allocated to the facility. A value other than zero means the facility was part of the solution, either as a required, competitor, or chosen facility.

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`DemandWeight` 

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

The sum of the effective weight from all demand points that were allocated to the facility. The value is the sum of all the weight values from the demand points that were allocated to the facility. In the case of the Maximize Attendance and Market Share problem types, the value is an apportioned sum of the `Weight`  field values, since these problem types allow demand to decay with distance or be split among many facilities.

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`Total_Minutes` 

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

The sum of travel time in minutes between the facility and each of the demand points that were allocated to the facility. 

This field is included only if the travel mode set for the analysis has an impedance attribute that is time based. 

<Note type={"note"}>

An additional field, `Total_[TimeUnits]` , is included if the **Measurement Units** parameter is time based and its value is not set to **Minutes**. The field values are in the units specified by the **Measurement Units** parameter.

</Note>

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`TotalWeighted_Minutes` 

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

This field stores the cumulative weighted cost in minutes for a facility. The weighted cost for a demand point is its weight multiplied by the least-cost path between the facility and the demand point. The weighted cost for a facility is the sum of all the weighted costs of demand points that are allocated to the facility.

For example, if a demand point with a weight of 2 is allocated to a facility 10 minutes away, the `TotalWeighted_Minutes`  value is 20 (2 x 10). If another demand point with a weight of 3 is allocated to the same facility and is 5 minutes away, the `TotalWeighted_Minutes`  value increases to 35 (3 x 5 + 20).

This field is included only if the travel mode set for the analysis has an impedance attribute that is time based. 

<Note type={"note"}>

An additional field, `TotalWeighted_[TimeUnits]` , is included if the **Measurement Units** parameter is time based and its value is not set to **Minutes**. The field values are in the units specified by the **Measurement Units** parameter.

</Note>

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`Total_Miles` 

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

The sum of travel distance in miles between the facility and each of the demand points that were allocated to the facility. 

This field is included only if the travel mode set for the analysis has an impedance attribute that is distance based. 

<Note type={"note"}>

An additional field, `Total_[DistanceUnits]` , is included if the **Measurement Units** parameter is distance based and its value is not set to **Miles** or **Kilometers**. The field values are in the units specified by the **Measurement Units** parameter.

</Note>

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`TotalWeighted_Miles` 

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

This field stores the cumulative weighted cost in miles for a facility. The weighted cost for a demand point is its weight multiplied by the least-cost path between the facility and the demand point. The weighted cost for a facility is the sum of all the weighted costs of demand points that are allocated to the facility.

For example, if a demand point with a weight of 2 is allocated to a facility 10 miles away, the `TotalWeighted_Miles`  value is 20 (2 x 10). If another demand point with a weight of 3 is allocated to the same facility and is 5 miles away, the `TotalWeighted_Miles`  value increases to 35 (3 x 5 + 20)

This field is included only if the travel mode set for the analysis has an impedance attribute that is distance based. 

<Note type={"note"}>

An additional field, `TotalWeighted_[DistanceUnits]` , is included if the **Measurement Units** parameter is distance based and its value is not set to **Miles** or **Kilometers**. The field values are in the units specified by the **Measurement Units** parameter.

</Note>

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`Total_Kilometers` 

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

This field is analogous to the `Total_Miles`  field, except values are in kilometers instead of miles. 

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`TotalWeighted_Kilometers` 

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

This field is analogous to the `TotalWeighted_Miles`  field, except values are in kilometers instead of miles. 

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`Total_Other` 

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

A sum of travel cost in unknown units between the facility and each of the demand points that were allocated to the facility. 

This field is included only if the travel mode set for the analysis has an impedance attribute that is neither time based nor distance based. 

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`TotalWeighted_Other` 

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

This field stores the cumulative weighted cost in unknown units for a facility. The weighted cost for a demand point is its weight multiplied by the least-cost path between the facility and the demand point. The weighted cost for a facility is the sum of all the weighted costs of demand points that are allocated to the facility.

This field is included only if the travel mode set for the analysis has an impedance attribute that is neither time based nor distance based. 

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`SourceID` 

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

The numeric identifier of the network dataset source feature class on which the input point is located. 

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`SourceOID` 

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

The ObjectID of the feature in the source on which the input point is located.

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`PosAlong` 

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

The position along the digitized direction of the source line feature. This value is stored as a ratio. This field is null if the network location references a junction.

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`SideOfEdge` 

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

The side of the edge in relation to the digitized direction of the line feature. This field is limited to a domain of two values: Right Side (1) and Left Side (2).

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`CurbApproach` 

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

The direction a vehicle may depart from or arrive at the facility. The values for this field are copied from the `CurbApproach`  field on the input facilities. 

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`Status` 

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Indicates the status of the point with respect to its location on the network and the outcome of the analysis. The possible values are the following: 

-   0 (OK)âThe point was located on the network.
-   1 (Not Located)âThe point was not located on the network and consequently was not included in the analysis.
-   2 (Network element not located)âThe network element identified by the point's network location fields can't be found. This can occur when a network element where the point should be was deleted, and the network location was not recalculated.
-   3 (Element not traversable)âThe network element that the point is located on is not traversable. This can occur when the element is restricted by a restriction attribute.
-   4 (Invalid Field Values)âField values fall outside a range or coded-value domain. For example, a negative number exists where positive numbers are required.
-   5 (Not Reached)âThe point can't be reached by the solver. The point may be on a separate, disconnected area of the network from the other inputs, or barriers or restrictions prevent travel to or from the point.
-   6 (Time window violation)âThe point could not be reached within the designated time windows. This status only applies to network analysis types that support time windows.
-   7 (Not located on closest)âThe closest network location to the point is not traversable because of a restriction or barrier, so the point has been located on the closest traversable network feature instead.

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`SnapX` 

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

The x-coordinate of the position on the network dataset where the point was located, in the coordinate system of the network dataset.

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`SnapY` 

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

The y-coordinate of the position on the network dataset where the point was located, in the coordinate system of the network dataset.

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`SnapZ` 

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

The z-coordinate of the position on the network dataset where the point was located, in the coordinate system of the network dataset. The `SnapZ`  field is 0 if the network is two dimensional.

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`DistanceToNetworkInMeters` 

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

The distance in meters between the point's geographic location and the position where it was located on the network.

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`Bearing` 

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

The values for this field are copied from the `Bearing`  field on the input facilities. 

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`BearingTol` 

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

The values for this field are copied from the `BearingTol`  field on the input facilities. 

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`NavLatency` 

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

The values for this field are copied from the `NavLatency`  field on the input facilities. 

</StyledTableCell>

</StyledTableRow>

</StyledTable>

### output_demand_points

This provides access to the demand points that participated in the analysis: those that were and were not allocated to facilities. 

This parameter supports the following fields. In addition to these fields, the parameter also includes all the fields from the input feature class used as facilities for the analysis.

<StyledTable headers={"Field,Description"}>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`Name` 

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

The name of the demand point. The values for this field are copied from the `Name`  field on the input demand points. 

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`FacilityOID` 

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

The `ObjectID`  value of the facility to which this demand point is allocated. The field value is Null if the demand point is not allocated to any facility. This field is often used to join information from the input facilities to the output demand points. 

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`DemandOID` 

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

The `ObjectID`  value of the corresponding input demand point feature. This field is often used to join information. 

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`Weight` 

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

The relative weighting of the demand point. The values for this field are copied from the `Weight`  field on the input demand points. 

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`AllocatedWeight` 

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

The amount of demand allocated to chosen and required facilities. The value excludes demand allocated to competing facilities. The value options are as follows: 

-    NullâThe demand point wasn't assigned to any facility. This can result, for example, if the demand point could not be reached from any facility.
-   0âThe demand point was only assigned to competing facilities.
-   Positive, nonzero valueâIndicates how much demand is assigned to the chosen and required facilities.

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`GroupName` 

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

The name of the group of which the demand point is a part. The values for this field are copied from the `GroupName`  field on the input demand points. 

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`ImpedanceTransformation` 

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

The values for this field are copied from the `ImpedanceTransformation`  field on the input demand points. 

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`ImpedancParameter` 

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

The values for this field are copied from the `ImpedanceParameter`  field on the input demand points. 

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`Cutoff` 

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

The demand point can't be allocated to a facility that is beyond the value indicated here. The values for this field are copied from the `Cutoff`  field on the input demand points. 

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`SourceID` 

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

The numeric identifier of the network dataset source feature class on which the input point is located. 

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`SourceOID` 

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

The ObjectID of the feature in the source on which the input point is located.

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`PosAlong` 

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

The position along the digitized direction of the source line feature. This value is stored as a ratio. This field is null if the network location references a junction.

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`SideOfEdge` 

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

The side of the edge in relation to the digitized direction of the line feature. This field is limited to a domain of two values: Right Side (1) and Left Side (2).

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`CurbApproach` 

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

The direction a vehicle may depart from or arrive at the demand point. The values for this field are copied from the `CurbApproach`  field on the input facilities. 

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`Status` 

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

Indicates the status of the point with respect to its location on the network and the outcome of the analysis. The possible values are the following: 

-   0 (OK)âThe point was located on the network.
-   1 (Not Located)âThe point was not located on the network and consequently was not included in the analysis.
-   2 (Network element not located)âThe network element identified by the point's network location fields can't be found. This can occur when a network element where the point should be was deleted, and the network location was not recalculated.
-   3 (Element not traversable)âThe network element that the point is located on is not traversable. This can occur when the element is restricted by a restriction attribute.
-   4 (Invalid Field Values)âField values fall outside a range or coded-value domain. For example, a negative number exists where positive numbers are required.
-   5 (Not Reached)âThe point can't be reached by the solver. The point may be on a separate, disconnected area of the network from the other inputs, or barriers or restrictions prevent travel to or from the point.
-   6 (Time window violation)âThe point could not be reached within the designated time windows. This status only applies to network analysis types that support time windows.
-   7 (Not located on closest)âThe closest network location to the point is not traversable because of a restriction or barrier, so the point has been located on the closest traversable network feature instead.

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`SnapX` 

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

The x-coordinate of the position on the network dataset where the point was located, in the coordinate system of the network dataset.

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`SnapY` 

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

The y-coordinate of the position on the network dataset where the point was located, in the coordinate system of the network dataset.

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`SnapZ` 

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

The z-coordinate of the position on the network dataset where the point was located, in the coordinate system of the network dataset. The `SnapZ`  field is 0 if the network is two dimensional.

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`DistanceToNetworkInMeters` 

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

The distance in meters between the point's geographic location and the position where it was located on the network.

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`Bearing` 

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

The values for this field are copied from the `Bearing`  field on the input demand points. 

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`BearingTol` 

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

The values for this field are copied from the `BearingTol`  field on the input demand points. 

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`NavLatency` 

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

The values for this field are copied from the `NavLatency`  field on the input demand points. 

</StyledTableCell>

</StyledTableRow>

</StyledTable>

### output_allocation_lines

This provides access to the lines that connect demand points to the facilities to which they are allocated. Such lines are referenced in the documentation as allocation lines. These allocation lines include data about the demand allocated from each demand point to the associated facility. 

The parameter supports the following fields:

<StyledTable headers={"Field,Description"}>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`Name` 

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

The name of the allocation line that includes the names of the demand point and facility to which the demand point is allocated.

The name of the allocation line is based on the names of the associated facility and demand point. 

The facility name is first if the **Travel Direction** parameter value is set to **Facility To Demand**. For example, `Facility 5 - Demand 3`  indicates that the route travels from Facility 5 to Demand 3.

If **Demand To Facility** is specified as the **Travel Direction** parameter value, the demand point name is first, for example, `Demand 3 â Facility 5` .

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`Weight` 

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

The weight assigned from the connected demand point to the connected facility. 

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`FacilityOID` 

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

The `ObjectID`  value of the corresponding input facility feature. This field is often used to join information from the facilities to the allocation lines. 

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`DemandOID` 

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

The `ObjectID`  value of the corresponding input demand point feature. This field is often used to join information from the demand points to the allocation lines. 

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`Total_Minutes` 

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

The travel time in minutes between the facility and the demand point. Although the allocation lines have either straight or null geometries, the cost always refers to travel times as measured on a transportation network, not straight-line distances. 

<Note type={"note"}>

An additional field, `Total_[TimeUnits]` , is included if the **Measurement Units** parameter is time based and its value is not set to **Minutes**. The field values are in the units specified by the **Measurement Units** parameter.

</Note>

<Note type={"note"}>

Additional fields, `Total_[AccumulateAttributeName]_[TimeUnits]` , are included for each time-based cost attribute that is accumulated during the analysis. 

</Note>

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`TotalWeighted_Minutes` 

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

The weighted cost of traveling between the facility and the demand point in minutes. This is the `Total_Minutes`  value multiplied by the weight of the demand point allocated to the facility. 

This field is included only if the travel mode set for the analysis has an impedance attribute that is time based. 

<Note type={"note"}>

An additional field, `TotalWeighted_[TimeUnits]` , is included if the **Measurement Units** parameter is time based and its value is not set to **Minutes**. The field values are in the units specified by the **Measurement Units** parameter.

</Note>

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`Total_Miles` 

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

The travel distance in miles between the facility and the demand point. Although the allocation lines have either straight or null geometries, the cost always refers to travel distances as measured on a transportation network, not straight-line distances. 

<Note type={"note"}>

An additional field, `Total_[DistanceUnits]` , is included if the **Measurement Units** parameter is distance based and its value is not set to **Miles** or **Kilometers**. The field values are in the units specified by the **Measurement Units** parameter.

</Note>

<Note type={"note"}>

Additional fields, `Total_[AccumulateAttributeName]_[DistanceUnits]` , are included for each time-based cost attribute that is accumulated during the analysis. 

</Note>

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`Total_Kilometers` 

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

The travel distance in kilometers between the facility and the demand point. Although the allocation lines have either straight or null geometries, the cost always refers to travel distances as measured on a transportation network, not straight-line distances. 

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`TotalWeighted_Miles` 

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

The weighted cost of traveling between the facility and the demand point in miles. This is the `Total_Miles`  value multiplied by the weight of the demand point allocated to the facility. 

This field is included only if the travel mode set for the analysis has an impedance attribute that is distance based.

<Note type={"note"}>

An additional field, `TotalWeighted_[DistanceUnits]` , is included if the **Measurement Units** parameter is distance based and its value is not set to **Miles** or **Kilometers**. The field values are in the units specified by the **Measurement Units** parameter.

</Note>

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`TotalWeighted_Kilometers` 

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

The weighted cost of traveling between the facility and the demand point in kilometers. This is the `Total_Kilometers`  value multiplied by the weight of the demand point allocated to the facility. 

This field is included only if the travel mode set for the analysis has an impedance attribute that is distance based.

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`Total_Other` 

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

The travel cost in unknown units between the facility and the demand point. Although the allocation lines have either straight or null geometries, the cost always refers to travel cost as measured on a transportation network, not straight-line distances. 

This field is included only when the travel mode used for the analysis has an impedance attribute that is neither time based nor distance based. 

<Note type={"note"}>

Additional fields, `Total_[AccumulateAttributeName]_Other` , are included for each cost attribute that is neither time based nor distance based and accumulated during the analysis. 

</Note>

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

`TotalWeighted_Other` 

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

The weighted cost of traveling between the facility and the demand point in unknown units. This is the `Total_Cost`  value multiplied by the weight of the demand point allocated to the facility. 

This field is included only if the travel mode set for the analysis has an impedance attribute that is neither time based nor distance based. 

</StyledTableCell>

</StyledTableRow>

</StyledTable>

### usage_cost

This parameter returns the [credits](https://doc.arcgis.com/en/arcgis-online/administer/credits) used by the analysis. 

#### Syntax example for usage_cost

The `usage_cost`  parameter is returned as a JSON with the following syntax:

```javascript
{
    "paramName": "Usage_Cost",
    "dataType": "GPString",
    "value": {
        "numObjects": "<number>",
        "credits": "<number>"
    }
}

```

 

#### Example for usage_cost

The following shows an example of the `usage_cost`  parameter in which the analysis generated 9 billable objects (represented by `numObjects` ) and 4.5 credits were used by the analysis.

```javascript
{
    "paramName": "Usage_Cost",
    "dataType": "GPString",
    "value": {
        "numObjects": 9,
        "credits": 4.5
    }
}

```

 

<Note type={"note"}>

Each analysis can generate a different number of billable objects and thus will use different number of credits. If the service fails to determine credits, the `usage_cost`  parameter returns a value of `-1`  for `credits` .

</Note>

### solve_succeeded

Use this parameter to determine if the service was able to successfully choose the best facilities. The error messages for any failure can be obtained by making a request to get the status of the job. 

The `solve_succeeded`  parameter is returned as a JSON feature set with following syntax:

```other
{
    "paramName": "Solve_Succeeded",
    "dataType": "GPBoolean",
    "value": <true | false>
}
```

 

The following shows an example of the `solve_succeeded`  parameter:

```other
{
    "paramName": "Solve_Succeeded",
    "dataType": "GPBoolean",
    "value": true
}
```

 

### output_result_file

Use this parameter to access the results from the analysis as a `.zip`  file containing one or more files for each output. The format of the individual file is specified by the **Output Format** parameter. The parameter value is not populated when the **Output Format** parameter is set to **Feature Set**.

### output_network_analysis_layer

Use this parameter to access the network analysis layer file that stores the analysis settings and the inputs and outputs used for the analysis. The parameter value is populated only when the **Save Output Network Analysis Layer** parameter is set to **True**. 

## Usage limits

The table below lists the limits that apply to this service. 

<StyledTable headers={"Limit Description,Limit Value"}>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

Maximum number of facilities:

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

1,000

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

Maximum number of facilities to find:

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

100

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

Maximum number of demand points:

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

10,000

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

Maximum number of (point) barriers:

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

250

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

Maximum number of street features intersected by polyline barriers:

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

500

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

Maximum number of street features intersected by polygon barriers:

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

2,000

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

Force hierarchy beyond a straight-line distance of:

(If the straight-line distance between any facility and demand point is greater than the limit shown here, the analysis uses hierarchy, even if useHierarchy is set to false.)

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

50 miles (80.46 kilometers)

</StyledTableCell>

</StyledTableRow>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

Maximum time a client can use the job request service:

</StyledTableCell>

<StyledTableCell cellStyle="markdown">

1 hour (3,600 seconds)

</StyledTableCell>

</StyledTableRow>

</StyledTable>

## Examples

<Note type={"caution"}>

If you copy and paste the request URL from the examples into a web browser, you need to replace `<yourToken>`  with a valid token. See [Security and authentication](https://developers.arcgis.com/documentation/mapping-apis-and-services/security/) to learn more.

</Note>

### Choose the best store location

In this example, you will find the one store location that provides the best access to customers.

Before performing the analysis, you would typically need to find locations that could accommodate your store. This may include surveying the real estate market to find commercial properties that are the right size and have the right price. The candidate facilities are specified with the `facilities`  facilities parameter. Households are added as `demand_points`  and weighted by the number of people living there. They represent potential customers.

The facilities and demand points are in the default spatial reference, WGS84, so the `spatialReference`  property is not required.

#### Request URL to submit the job

The first request submits a job and returns the job id.

<StyledTable headers={""}>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

```other
https://logistics.arcgis.com/arcgis/rest/services/World/LocationAllocation/GPServer/SolveLocationAllocation/submitJob?
facilities={"features":[{"attributes":{"OBJECTID":1,"Name":"Facility A","FacilityType":0,"CurbApproach":0},"geometry":{"x":-58.557329417999938,"y":-34.587693706999971}},
{"attributes":{"OBJECTID":2,"Name":"Facility B","FacilityType":0,"CurbApproach":0},"geometry":{"x":-58.460247408999976,"y":-34.683348039999942}}]}&
demand_points={"features":[{"attributes":{"OBJECTID":1,"Name":"Household 4","GroupName":"A","Weight":2,"CurbApproach":0},"geometry":{"x":-58.664405163999959,"y":-34.614819562999969}},
{"attributes":{"OBJECTID":2,"Name":"Household 3","GroupName":"A","Weight":2,"CurbApproach":0},"geometry":{"x":-58.514499119999982,"y":-34.496322404999944}},
{"attributes":{"OBJECTID":3,"Name":"Household 2","GroupName":null,"Weight":3,"CurbApproach":0},"geometry":{"x":-58.54162497599998,"y":-34.788996107999935}},
{"attributes":{"OBJECTID":4,"Name":"Household 1","GroupName":null,"Weight":5,"CurbApproach":1},"geometry":{"x":-58.40599569799997,"y":-34.637662387999967}}]}&
f=pjson&token=<yourToken>
```

 

```javascript
https://logistics.arcgis.com/arcgis/rest/services/World/LocationAllocation/GPServer/SolveLocationAllocation/submitJob?
facilities=%7B%22features%22:%5B%7B%22attributes%22:%7B%22OBJECTID%22:1,%22Name%22:%22Facility%20A%22,%22FacilityType%22:0,%22CurbApproach%22:0%7D,%22geometry%22:%7B%22x%22:-58.557329417999938,
%22y%22:-34.587693706999971%7D%7D,%7B%22attributes%22:%7B%22OBJECTID%22:2,%22Name%22:%22Facility%20B%22,%22FacilityType%22:0,%22CurbApproach%22:0%7D,%22geometry%22:%7B%22x%22:-58.460247408999976,
%22y%22:-34.683348039999942%7D%7D%5D%7D&demand_points=%7B%22features%22:%5B%7B%22attributes%22:%7B%22OBJECTID%22:1,%22Name%22:%22Household%204%22,%22GroupName%22:%22A%22,%22Weight%22:2,
%22CurbApproach%22:0%7D,%22geometry%22:%7B%22x%22:-58.664405163999959,%22y%22:-34.614819562999969%7D%7D,%7B%22attributes%22:%7B%22OBJECTID%22:2,%22Name%22:%22Household%203%22,
%22GroupName%22:%22A%22,%22Weight%22:2,%22CurbApproach%22:0%7D,%22geometry%22:%7B%22x%22:-58.514499119999982,%22y%22:-34.496322404999944%7D%7D,%7B%22attributes%22:%7B%22OBJECTID%22:3,
%22Name%22:%22Household%202%22,%22GroupName%22:null,%22Weight%22:3,%22CurbApproach%22:0%7D,%22geometry%22:%7B%22x%22:-58.54162497599998,%22y%22:-34.788996107999935%7D%7D,%7B%22attributes
%22:%7B%22OBJECTID%22:4,%22Name%22:%22Household%201%22,%22GroupName%22:null,%22Weight%22:5,%22CurbApproach%22:1%7D,%22geometry%22:%7B%22x%22:-58.40599569799997,
%22y%22:-34.637662387999967%7D%7D%5D%7D&f=pjson&token=<yourToken>
```

 

</StyledTableCell>

</StyledTableRow>

</StyledTable>

#### JSON response

```other
{
    "jobId": "jb937dc0c7e324e68b95923c8fd9c8a1b",
    "jobStatus": "esriJobSubmitted"
}
```

 

#### Request URL to query job status

The job ID obtained from the response of the first request can be queried periodically to determine the status of the job.

<StyledTable headers={""}>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

```other
https://logistics.arcgis.com/arcgis/rest/services/World/LocationAllocation/GPServer/SolveLocationAllocation/jobs/<jobID>?returnMessages=true&
f=pjson&token=<yourToken>
```

 

```javascript
https://logistics.arcgis.com/arcgis/rest/services/World/LocationAllocation/GPServer/SolveLocationAllocation/jobs/<jobID>?returnMessages=true&
f=pjson&token=<yourToken>
```

 

</StyledTableCell>

</StyledTableRow>

</StyledTable>

#### JSON response

```other
{
 "jobId": "jb937dc0c7e324e68b95923c8fd9c8a1b",
 "jobStatus": "esriJobSucceeded",
 "results": {
  "Solve_Succeeded": {
   "paramUrl": "results/Solve_Succeeded"
  },
  "Output_Allocation_Lines": {
   "paramUrl": "results/Output_Allocation_Lines"
  },
  "Output_Facilities": {
   "paramUrl": "results/Output_Facilities"
  },
  "Output_Demand_Points": {
   "paramUrl": "results/Output_Demand_Points"
  }
 },
 "inputs": {
  "Facilities": {
   "paramUrl": "inputs/Facilities"
  },
  "Demand_Points": {
   "paramUrl": "inputs/Demand_Points"
  },
  "Measurement_Units": {
   "paramUrl": "inputs/Measurement_Units"
  },
  "Analysis_Region": {
   "paramUrl": "inputs/Analysis_Region"
  },
  "Problem_Type": {
   "paramUrl": "inputs/Problem_Type"
  },
  "Number_of_Facilities_to_Find": {
   "paramUrl": "inputs/Number_of_Facilities_to_Find"
  },
  "Default_Measurement_Cutoff": {
   "paramUrl": "inputs/Default_Measurement_Cutoff"
  },
  "Default_Capacity": {
   "paramUrl": "inputs/Default_Capacity"
  },
  "Target_Market_Share": {
   "paramUrl": "inputs/Target_Market_Share"
  },
  "Measurement_Transformation_Model": {
   "paramUrl": "inputs/Measurement_Transformation_Model"
  },
  "Measurement_Transformation_Factor": {
   "paramUrl": "inputs/Measurement_Transformation_Factor"
  },
  "Travel_Direction": {
   "paramUrl": "inputs/Travel_Direction"
  },
  "Time_of_Day": {
   "paramUrl": "inputs/Time_of_Day"
  },
  "Time_Zone_for_Time_of_Day": {
   "paramUrl": "inputs/Time_Zone_for_Time_of_Day"
  },
  "UTurn_at_Junctions": {
   "paramUrl": "inputs/UTurn_at_Junctions"
  },
  "Point_Barriers": {
   "paramUrl": "inputs/Point_Barriers"
  },
  "Line_Barriers": {
   "paramUrl": "inputs/Line_Barriers"
  },
  "Polygon_Barriers": {
   "paramUrl": "inputs/Polygon_Barriers"
  },
  "Use_Hierarchy": {
   "paramUrl": "inputs/Use_Hierarchy"
  },
  "Restrictions": {
   "paramUrl": "inputs/Restrictions"
  },
  "Attribute_Parameter_Values": {
   "paramUrl": "inputs/Attribute_Parameter_Values"
  },
  "Allocation_Line_Shape": {
   "paramUrl": "inputs/Allocation_Line_Shape"
  }
 },
 "messages": [
  
 ]
}
```

 

#### Request URL to return the output facilities

Because the job succeeded, a request can be made to return the facilities using the `output_facilities`  output parameter. 

<StyledTable headers={""}>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

```other
https://logistics.arcgis.com/arcgis/rest/services/World/LocationAllocation/GPServer/SolveLocationAllocation/jobs/<jobID>/results/output_facilities?
f=pjson&token=<yourToken>

```

 

```javascript
https://logistics.arcgis.com/arcgis/rest/services/World/LocationAllocation/GPServer/SolveLocationAllocation/jobs/<jobID>/results/output_facilities?
f=pjson&token=<yourToken>

```

 

</StyledTableCell>

</StyledTableRow>

</StyledTable>

```other
{
 "paramName": "Output_Facilities",
 "dataType": "GPFeatureRecordSetLayer",
 "value": {
  "displayFieldName": "",
  "geometryType": "esriGeometryPoint",
  "spatialReference": {
   "wkid": 4326,
   "latestWkid": 4326
  },
  "fields": [
   {
    "name": "OID",
    "type": "esriFieldTypeOID",
    "alias": "OID"
   },
   {
    "name": "Name",
    "type": "esriFieldTypeString",
    "alias": "Name",
    "length": 128
   },
   {
    "name": "FacilityType",
    "type": "esriFieldTypeInteger",
    "alias": "FacilityType"
   },
   {
    "name": "Weight",
    "type": "esriFieldTypeDouble",
    "alias": "Weight"
   },
   {
    "name": "Capacity",
    "type": "esriFieldTypeDouble",
    "alias": "Capacity"
   },
   {
    "name": "DemandCount",
    "type": "esriFieldTypeInteger",
    "alias": "DemandCount"
   },
   {
    "name": "DemandWeight",
    "type": "esriFieldTypeDouble",
    "alias": "DemandWeight"
   },
   {
    "name": "CurbApproach",
    "type": "esriFieldTypeInteger",
    "alias": "CurbApproach"
   },
   {
    "name": "Status",
    "type": "esriFieldTypeInteger",
    "alias": "Status"
   },
   {
    "name": "Total_Minutes",
    "type": "esriFieldTypeDouble",
    "alias": "Total_Minutes"
   },
   {
    "name": "TotalWeighted_Minutes",
    "type": "esriFieldTypeDouble",
    "alias": "TotalWeighted_Minutes"
   },
   {
    "name": "FacilityOID",
    "type": "esriFieldTypeInteger",
    "alias": "FacilityOID"
   }
  ],
  "features": [
   {
    "attributes": {
     "OID": 1,
     "Name": "Facility A",
     "FacilityType": 0,
     "Weight": 1,
     "Capacity": 20,
     "DemandCount": 0,
     "DemandWeight": 0,
     "CurbApproach": 0,
     "Status": 0,
     "Total_Minutes": 0,
     "TotalWeighted_Minutes": 0,
     "FacilityOID": 1
    },
    "geometry": {
     "x": -58.557329417999938,
     "y": -34.587693706999971
    }
   },
   {
    "attributes": {
     "OID": 2,
     "Name": "Facility B",
     "FacilityType": 3,
     "Weight": 1,
     "Capacity": 20,
     "DemandCount": 4,
     "DemandWeight": 12,
     "CurbApproach": 0,
     "Status": 0,
     "Total_Minutes": 98.15948274044834,
     "TotalWeighted_Minutes": 255.65998780240028,
     "FacilityOID": 2
    },
    "geometry": {
     "x": -58.460247408999976,
     "y": -34.683348039999942
    }
   }
  ],
  "exceededTransferLimit": false
 }
}
```

 

#### Request URL to return the output demand points

The output demand points are requested using `output_demand_points` .

<StyledTable headers={""}>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

```other
https://logistics.arcgis.com/arcgis/rest/services/World/LocationAllocation/GPServer/SolveLocationAllocation/jobs/<jobID>/results/output_demand_points?
f=pjson&token=<yourToken>
```

 

```javascript
https://logistics.arcgis.com/arcgis/rest/services/World/LocationAllocation/GPServer/SolveLocationAllocation/jobs/<jobID>/results/
output_demand_points?f=pjson&token=<yourToken>
```

 

</StyledTableCell>

</StyledTableRow>

</StyledTable>

```other
{
 "paramName": "Output_Demand_Points",
 "dataType": "GPFeatureRecordSetLayer",
 "value": {
  "displayFieldName": "",
  "geometryType": "esriGeometryPoint",
  "spatialReference": {
   "wkid": 4326,
   "latestWkid": 4326
  },
  "fields": [
   {
    "name": "OID",
    "type": "esriFieldTypeOID",
    "alias": "OID"
   },
   {
    "name": "Name",
    "type": "esriFieldTypeString",
    "alias": "Name",
    "length": 128
   },
   {
    "name": "Weight",
    "type": "esriFieldTypeDouble",
    "alias": "Weight"
   },
   {
    "name": "AllocatedWeight",
    "type": "esriFieldTypeDouble",
    "alias": "AllocatedWeight"
   },
   {
    "name": "GroupName",
    "type": "esriFieldTypeString",
    "alias": "GroupName",
    "length": 128
   },
   {
    "name": "CurbApproach",
    "type": "esriFieldTypeInteger",
    "alias": "CurbApproach"
   },
   {
    "name": "Status",
    "type": "esriFieldTypeInteger",
    "alias": "Status"
   },
   {
    "name": "DemandOID",
    "type": "esriFieldTypeInteger",
    "alias": "DemandOID"
   },
   {
    "name": "FacilityOID",
    "type": "esriFieldTypeInteger",
    "alias": "FacilityOID"
   },
   {
    "name": "TimeCutoff",
    "type": "esriFieldTypeDouble",
    "alias": "Time Cutoff"
   }
  ],
  "features": [
   {
    "attributes": {
     "OID": 1,
     "Name": "Household 4",
     "Weight": 2,
     "AllocatedWeight": 2,
     "GroupName": "A",
     "CurbApproach": 0,
     "Status": 0,
     "DemandOID": 1,
     "FacilityOID": 2,
     "TimeCutoff": null
    },
    "geometry": {
     "x": -58.664405163999959,
     "y": -34.614819562999969
    }
   },
   {
    "attributes": {
     "OID": 2,
     "Name": "Household 3",
     "Weight": 2,
     "AllocatedWeight": 2,
     "GroupName": "A",
     "CurbApproach": 0,
     "Status": 0,
     "DemandOID": 2,
     "FacilityOID": 2,
     "TimeCutoff": null
    },
    "geometry": {
     "x": -58.514499119999982,
     "y": -34.496322404999944
    }
   },
   {
    "attributes": {
     "OID": 3,
     "Name": "Household 2",
     "Weight": 3,
     "AllocatedWeight": 3,
     "GroupName": null,
     "CurbApproach": 0,
     "Status": 0,
     "DemandOID": 3,
     "FacilityOID": 2,
     "TimeCutoff": null
    },
    "geometry": {
     "x": -58.54162497599998,
     "y": -34.788996107999935
    }
   },
   {
    "attributes": {
     "OID": 4,
     "Name": "Household 1",
     "Weight": 5,
     "AllocatedWeight": 5,
     "GroupName": null,
     "CurbApproach": 1,
     "Status": 0,
     "DemandOID": 4,
     "FacilityOID": 2,
     "TimeCutoff": null
    },
    "geometry": {
     "x": -58.40599569799997,
     "y": -34.637662387999967
    }
   }
  ],
  "exceededTransferLimit": false
 }
}
```

 

#### Request URL to return the output allocation lines

The lines connecting demand points to the facilities they are allocated to are requested using the `output_allocation_lines`  output parameter.

<StyledTable headers={""}>

<StyledTableRow>

<StyledTableCell cellStyle="markdown">

```other
https://logistics.arcgis.com/arcgis/rest/services/World/LocationAllocation/GPServer/SolveLocationAllocation/jobs/<jobID>/results/
output_allocation_lines?f=pjson&token=<yourToken>
```

 

```javascript
https://logistics.arcgis.com/arcgis/rest/services/World/LocationAllocation/GPServer/SolveLocationAllocation/jobs/<jobID>/results/
output_allocation_lines?f=pjson&token=<yourToken>
```

 

</StyledTableCell>

</StyledTableRow>

</StyledTable>

```other
{
 "paramName": "Output_Allocation_Lines",
 "dataType": "GPFeatureRecordSetLayer",
 "value": {
  "displayFieldName": "",
  "geometryType": "esriGeometryPolyline",
  "spatialReference": {
   "wkid": 4326,
   "latestWkid": 4326
  },
  "fields": [
   {
    "name": "OID",
    "type": "esriFieldTypeOID",
    "alias": "OID"
   },
   {
    "name": "Name",
    "type": "esriFieldTypeString",
    "alias": "Name",
    "length": 128
   },
   {
    "name": "Weight",
    "type": "esriFieldTypeDouble",
    "alias": "Weight"
   },
   {
    "name": "TotalWeighted_Minutes",
    "type": "esriFieldTypeDouble",
    "alias": "TotalWeighted_Minutes"
   },
   {
    "name": "Total_Minutes",
    "type": "esriFieldTypeDouble",
    "alias": "Total_Minutes"
   },
   {
    "name": "Total_Miles",
    "type": "esriFieldTypeDouble",
    "alias": "Total_Miles"
   },
   {
    "name": "FacilityOID",
    "type": "esriFieldTypeInteger",
    "alias": "FacilityOID"
   },
   {
    "name": "DemandOID",
    "type": "esriFieldTypeInteger",
    "alias": "DemandOID"
   },
   {
    "name": "Total_Kilometers",
    "type": "esriFieldTypeDouble",
    "alias": "Total_Kilometers"
   },
   {
    "name": "Shape_Length",
    "type": "esriFieldTypeDouble",
    "alias": "Shape_Length"
   }
  ],
  "features": [
   {
    "attributes": {
     "OID": 1,
     "Name": "Facility B - Household 4",
     "Weight": 2,
     "TotalWeighted_Minutes": 60.168576445604977,
     "Total_Minutes": 30.084288222802488,
     "Total_Miles": 15.37109520474797,
     "FacilityOID": 2,
     "DemandOID": 1,
     "Total_Kilometers": 24.737380000000002,
     "Shape_Length": 0.21535213276531256
    },
    "geometry": {
     "paths": [
      [
       [
        -58.460247408999976,
        -34.683348039999942
       ],
       [
        -58.664405163999959,
        -34.614819562999969
       ]
      ]
     ]
    }
   },
   {
    "attributes": {
     "OID": 2,
     "Name": "Facility B - Household 3",
     "Weight": 2,
     "TotalWeighted_Minutes": 72.1604586665743,
     "Total_Minutes": 36.08022933328715,
     "Total_Miles": 17.676695567632418,
     "FacilityOID": 2,
     "DemandOID": 2,
     "Total_Kilometers": 28.447880000000001,
     "Shape_Length": 0.1947352980165141
    },
    "geometry": {
     "paths": [
      [
       [
        -58.460247408999976,
        -34.683348039999942
       ],
       [
        -58.514499119999982,
        -34.496322404999944
       ]
      ]
     ]
    }
   },
   {
    "attributes": {
     "OID": 3,
     "Name": "Facility B - Household 2",
     "Weight": 3,
     "TotalWeighted_Minutes": 54.965809847358813,
     "Total_Minutes": 18.321936615786271,
     "Total_Miles": 9.9908299927555344,
     "FacilityOID": 2,
     "DemandOID": 3,
     "Total_Kilometers": 16.078679999999999,
     "Shape_Length": 0.13335599980117666
    },
    "geometry": {
     "paths": [
      [
       [
        -58.460247408999976,
        -34.683348039999942
       ],
       [
        -58.54162497599998,
        -34.788996107999935
       ]
      ]
     ]
    }
   },
   {
    "attributes": {
     "OID": 4,
     "Name": "Facility B - Household 1",
     "Weight": 5,
     "TotalWeighted_Minutes": 68.365142842862213,
     "Total_Minutes": 13.673028568572441,
     "Total_Miles": 5.0529893827094323,
     "FacilityOID": 2,
     "DemandOID": 4,
     "Total_Kilometers": 8.1319999999999997,
     "Shape_Length": 0.070925502783490982
    },
    "geometry": {
     "paths": [
      [
       [
        -58.460247408999976,
        -34.683348039999942
       ],
       [
        -58.40599569799997,
        -34.637662387999967
       ]
      ]
     ]
    }
   }
  ],
  "exceededTransferLimit": false
 }
}
```

 
