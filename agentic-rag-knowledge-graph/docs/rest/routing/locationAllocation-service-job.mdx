---
title: /SolveLocationAllocation
uid: locationAllocation-service-job
description: "Find directions using the global route service available with ArcGIS Location Services."
context:
    requestType: "job"
---

import LAServiceDesc from "../../shared/routing/snippets/_location-allocation-service.mdx"
import Facilities from "../../shared/routing/snippets/request-parameters/_LA-Facilities.mdx"
import DemandPoints from "../../shared/routing/snippets/request-parameters/_LA-DemandPoint.mdx"
import Impedance from "../../shared/routing/snippets/request-parameters/_Impedance-JDR-OnE.mdx"
import Token from "../../shared/routing/snippets/request-parameters/_Token.mdx"
import ResponseFormat from "../../shared/routing/snippets/request-parameters/_ResponseFormat.mdx"
import MeasurementUnits from "../../shared/routing/snippets/request-parameters/_MeasurementUnits-JR-OnE.mdx"
import AttributeParameterValues from "../../shared/routing/snippets/request-parameters/_AttributeParameterValues-JDR-OnE.mdx"
import TravelModes from "../../shared/routing/snippets/request-parameters/_TravelMode.mdx"
import AnalysisRegion from "../../shared/routing/snippets/request-parameters/_AnalysisRegion-JR-OnE.mdx"
import Context from "../../shared/routing/snippets/request-parameters/_Context.mdx"
import DistanceUnits from "../../shared/routing/snippets/request-parameters/_DistanceUnits.mdx"
import DistanceImpedance from "../../shared/routing/snippets/request-parameters/_DistanceImpedance-JR-OnE.mdx"
import LineBarriers from "../../shared/routing/snippets/request-parameters/_LineBarriers.mdx"
import LocateSettings from "../../shared/routing/snippets/request-parameters/_LocateSettings.mdx"
import OutputFormat from "../../shared/routing/snippets/request-parameters/_OutputFormat-JR-OnE.mdx"
import PointBarriers from "../../shared/routing/snippets/request-parameters/_PointBarriers.mdx"
import PolygonBarriers from "../../shared/routing/snippets/request-parameters/_PolygonBarriers.mdx"
import SaveOutputNALayer from "../../shared/routing/snippets/request-parameters/_SaveOutputNALayer-JR-OnE.mdx"
import TimeImpedance from "../../shared/routing/snippets/request-parameters/_TimeImpedance-JR-OnE.mdx"
import ProblemType from "../../shared/routing/snippets/request-parameters/_LA-ProblemType.mdx"
import TimeUnits from "../../shared/routing/snippets/request-parameters/_TimeUnits.mdx"
import UseTimeWindows from "../../shared/routing/snippets/request-parameters/_UseTimeWindows-JDR-OnE.mdx"
import PopulateDirectionsCF from "../../shared/routing/snippets/request-parameters/_PopulateDirections-JDR-OnE.mdx"
import UTurnAtJunctions from "../../shared/routing/snippets/request-parameters/_UTurnAtJunctions.mdx"
import UseHierarchy from "../../shared/routing/snippets/request-parameters/_UseHierarchy-JDR-OnE.mdx"
import Restrictions from "../../shared/routing/snippets/request-parameters/_Restrictions-JDR-OnE.mdx"
import TravelDirection from "../../shared/routing/snippets/request-parameters/_LA-travelDirection.mdx"
import DefaultCapacity from "../../shared/routing/snippets/request-parameters/_LA-DefaultCapacity.mdx"
import DefaultMeasurementCutoff from "../../shared/routing/snippets/request-parameters/_LA-DefaultMeasurementCutoff.mdx"
import MeasurementTransFactor from "../../shared/routing/snippets/request-parameters/_LA-MeasurementTransFactor.mdx"
import MeasurementTransModel from "../../shared/routing/snippets/request-parameters/_LA-MeasurementTransModel.mdx"
import AllocationLineShape from "../../shared/routing/snippets/request-parameters/_LA-AllocationLineShape.mdx"
import NumFacilities from "../../shared/routing/snippets/request-parameters/_LA-NumOfFacilities.mdx"
import TargetMarketShare from "../../shared/routing/snippets/request-parameters/_LA-TargetMarketShare.mdx"
import IgnoreInvalidLocations from "../../shared/routing/snippets/request-parameters/_IgnoreInvalidLocations-JDR-OnE.mdx"
import Overrides from "../../shared/routing/snippets/request-parameters/_Overrides-JDR-OnE.mdx"
import TimeOfDay from "../../shared/routing/snippets/request-parameters/_TimeOfDay-JR-OnE.mdx"
import TimeZoneForTimeOfDay from "../../shared/routing/snippets/request-parameters/_TimeZoneForTimeOfDay-JR-OnE.mdx"
import UsageLimits from "../../shared/routing/snippets/request-parameters/_LA-UsageLimits.mdx"
import SolveSucceeded from "../../shared/routing/snippets/output-parameters/_SolveSucceeded.mdx"
import UsageCost from "../../shared/routing/snippets/output-parameters/_UsageCost.mdx"
import OutputFacilities from "../../shared/routing/snippets/output-parameters/_LA-outputFacilities.mdx"
import OutputDemandPoints from "../../shared/routing/snippets/output-parameters/_LA-outputDemandPoints"
import OutputAllocationLines from "../../shared/routing/snippets/output-parameters/_LA-outputAllocationLines.mdx"
import OutputResultFile from "../../shared/routing/snippets/output-parameters/_resultFile.mdx"
import OutputNetworkAnalysisLayer from "../../shared/routing/snippets/output-parameters/_outputNetworkAnalysisLayer.mdx"

import SharedContent from "../../shared/content/_required-params"

import ParamMetadata from "../../shared/components/param-metatdata" 

<CodeSwitcher>
<CodeBlock language="curl" label="GET">{`GET  https://logistics.arcgis.com/arcgis/rest/services/World/LocationAllocation/GPServer/SolveLocationAllocation/submitJob`}</CodeBlock>
<CodeBlock language="curl" label="POST">{`POST https://logistics.arcgis.com/arcgis/rest/services/World/LocationAllocation/GPServer/SolveLocationAllocation/submitJob`}</CodeBlock>
</CodeSwitcher>

<LAServiceDesc />

## Parameters 

<StyledTable headers="Name, Required, Type, Default, Description">
  <StyledTableRow>
    <StyledTableCell cellStyle="code">[f](#f)</StyledTableCell>
    <StyledTableCell cellStyle="check" checked></StyledTableCell>
    <StyledTableCell cellStyle="code_italic">string</StyledTableCell>
    <StyledTableCell cellStyle="markdown"></StyledTableCell>
    <StyledTableCell cellStyle="markdown">

    The request response format, either `json` or `pjson`

    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="code">[token](#token)</StyledTableCell>
    <StyledTableCell cellStyle="check" checked></StyledTableCell>
    <StyledTableCell cellStyle="code_italic">string</StyledTableCell>
    <StyledTableCell cellStyle="markdown">
    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">

    An access token with the [required privileges](#token).

    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="code">[facilities](#facilities)</StyledTableCell>
    <StyledTableCell cellStyle="check" checked></StyledTableCell>
    <StyledTableCell cellStyle="code_italic">feature</StyledTableCell>
    <StyledTableCell cellStyle="markdown">
    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">

   One or more locations that serve as facilities. 

    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="code">[demand_points](#demand_points)</StyledTableCell>
    <StyledTableCell cellStyle="check" checked></StyledTableCell>
    <StyledTableCell cellStyle="code_italic">feature</StyledTableCell>
    <StyledTableCell cellStyle="markdown">
    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">

   One or more demand points.

    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="code">[travel_modes](#travel_modes)</StyledTableCell>
    <StyledTableCell cellStyle="check" checked={false}></StyledTableCell>
    <StyledTableCell cellStyle="code_italic">object</StyledTableCell>
    <StyledTableCell cellStyle="markdown"> 
    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">
      The mode of transportation for the analysis provided as a JSON object.
    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="code">[locate_settings](#locate_settings)</StyledTableCell>
    <StyledTableCell cellStyle="check" checked={false}></StyledTableCell>
    <StyledTableCell cellStyle="code_italic">object</StyledTableCell>
    <StyledTableCell cellStyle="markdown">
    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">
      Determines how input data are located.
    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="code">[measurement_units](#measurement_units)</StyledTableCell>
    <StyledTableCell cellStyle="check" checked={false}></StyledTableCell>
    <StyledTableCell cellStyle="code_italic">string</StyledTableCell>
    <StyledTableCell cellStyle="markdown">
      `Minutes`
    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">
      Units that should be used to report the total travel time or travel distance for the output routes.
    </StyledTableCell>
  </StyledTableRow>  
  <StyledTableRow>
    <StyledTableCell cellStyle="code">[analysis_region](#analysis_region)</StyledTableCell>
    <StyledTableCell cellStyle="check" checked={false}></StyledTableCell>
    <StyledTableCell cellStyle="code_italic">string</StyledTableCell>
    <StyledTableCell cellStyle="markdown">
    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">
      Region in which to perform the analysis. 
    </StyledTableCell>
  </StyledTableRow> 
  <StyledTableRow>
    <StyledTableCell cellStyle="code">[problem_type](#problem_type)</StyledTableCell>
    <StyledTableCell cellStyle="check" checked={false}></StyledTableCell>
    <StyledTableCell cellStyle="code_italic">string</StyledTableCell>
    <StyledTableCell cellStyle="markdown">
      `Minimize Impedance`
    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">
      Objective of the location-allocation analysis.
    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="code">[number_of_facilities_to_find](#number_of_facilities_to_find)</StyledTableCell>
    <StyledTableCell cellStyle="check" checked={false}></StyledTableCell>
    <StyledTableCell cellStyle="code_italic">integer</StyledTableCell>
    <StyledTableCell cellStyle="markdown">
      `1`
    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">
      The number of facilities the task should choose.
    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="code">[default_measurement_cutoff](#default_measurement_cutoff)</StyledTableCell>
    <StyledTableCell cellStyle="check" checked={false}></StyledTableCell>
    <StyledTableCell cellStyle="code_italic">number</StyledTableCell>
    <StyledTableCell cellStyle="markdown">
      `None`
    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">
      The maximum travel time or distance allowed between a demand point and the facility to which it is allocated.
    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="code">[default_capacity](#default_capacity)</StyledTableCell>
    <StyledTableCell cellStyle="check" checked={false}></StyledTableCell>
    <StyledTableCell cellStyle="code_italic">number</StyledTableCell>
    <StyledTableCell cellStyle="markdown">
      `1`
    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">
      The default capacity assigned to all facilities in the analysis. Only applicable to the Maximize Capacitated Coverage problem type; ignored for all other problem types.
    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="code">[target_market_share](#target_market_share)</StyledTableCell>
    <StyledTableCell cellStyle="check" checked={false}></StyledTableCell>
    <StyledTableCell cellStyle="code_italic">number</StyledTableCell>
    <StyledTableCell cellStyle="markdown">
      `10`
    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">
      The percentage of the total demand weight that you want the chosen and required facilities to capture. Only applicable to the Target Market Share problem type; ignored for all other problem types.
    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="code">[measurement_transformation_model](#measurement_transformation_model)</StyledTableCell>
    <StyledTableCell cellStyle="check" checked={false}></StyledTableCell>
    <StyledTableCell cellStyle="code_italic">string</StyledTableCell>
    <StyledTableCell cellStyle="markdown">
      `Linear`
    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">
      The equation for transforming the network cost between facilities and demand points.
    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="code">[measurement_transformation_factor](#measurement_transformation_factor)</StyledTableCell>
    <StyledTableCell cellStyle="check" checked={false}></StyledTableCell>
    <StyledTableCell cellStyle="code_italic">number</StyledTableCell>
    <StyledTableCell cellStyle="markdown">
      `1`
    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">
      The impedance parameter value (λ) to the equation specified in the measurement_transformation_model parameter. Ignored when the impedance transformation is linear.
    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="code">[travel_direction](#travel_direction)</StyledTableCell>
    <StyledTableCell cellStyle="check" checked={false}></StyledTableCell>
    <StyledTableCell cellStyle="code_italic">string</StyledTableCell>
    <StyledTableCell cellStyle="markdown">
      `Facility to Demand`
    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">
      Measure travel times or distances from facilities to demand points or from demand points to facilities.
    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="code">[time_of_day](#time_of_day)</StyledTableCell>
    <StyledTableCell cellStyle="check" checked={false}></StyledTableCell>
    <StyledTableCell cellStyle="code_italic">datetime</StyledTableCell>
    <StyledTableCell cellStyle="markdown">
    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">
      The time at which travel begins, or departs, from the starting locations.
    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="code">[time_zone_for_time_of_day](#time_zone_for_time_of_day)</StyledTableCell>
    <StyledTableCell cellStyle="check" checked={false}></StyledTableCell>
    <StyledTableCell cellStyle="code_italic">string</StyledTableCell>
    <StyledTableCell cellStyle="markdown">
      `Geographically Local`
    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">
      The time zone or zones of the `time_of_day` parameter.
    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="code">[uturn_at_junctions](#uturn_at_junctions)</StyledTableCell>
    <StyledTableCell cellStyle="check" checked={false}></StyledTableCell>
    <StyledTableCell cellStyle="code_italic">string</StyledTableCell>
    <StyledTableCell cellStyle="markdown">
      `Allowed only at Intersections and Dead Ends`
    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">
      Restricts or allows a route to make U-turns at junctions.
    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="code">[point_barriers](#point_barriers)</StyledTableCell>
    <StyledTableCell cellStyle="check" checked={false}></StyledTableCell>
    <StyledTableCell cellStyle="code_italic">feature</StyledTableCell>
    <StyledTableCell cellStyle="markdown">
    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">
      One or more points that act as temporary restrictions, additional time, or distance.
    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="code">[line_barriers](#line_barriers)</StyledTableCell>
    <StyledTableCell cellStyle="check" checked={false}></StyledTableCell>
    <StyledTableCell cellStyle="code_italic">feature</StyledTableCell>
    <StyledTableCell cellStyle="markdown">
    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">
      One ore more lines that prohibit travel anywhere the lines intersect the streets.
    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="code">[polygon_barriers](#polygon_barriers)</StyledTableCell>
    <StyledTableCell cellStyle="check" checked={false}></StyledTableCell>
    <StyledTableCell cellStyle="code_italic">feature</StyledTableCell>
    <StyledTableCell cellStyle="markdown">
    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">
      Polygons that either prohibit travel or proportionately scale the time or distance required to travel on the streets.
    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="code">[use_hierarchy](#use_hierarchy)</StyledTableCell>
    <StyledTableCell cellStyle="check" checked={false}></StyledTableCell>
    <StyledTableCell cellStyle="code_italic">boolean</StyledTableCell>
    <StyledTableCell cellStyle="markdown">
      `true`
    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">
      Hierarchy used when finding the shortest paths.
    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="code">[restrictions](#restrictions)</StyledTableCell>
    <StyledTableCell cellStyle="check" checked={false}></StyledTableCell>
    <StyledTableCell cellStyle="code_italic">[string]</StyledTableCell>
    <StyledTableCell cellStyle="markdown">
    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">
      The restrictions that should be honored by the service.
    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="code">[attribute_parameter_values](#attribute_parameter_values)</StyledTableCell>
    <StyledTableCell cellStyle="check" checked={false}></StyledTableCell>
    <StyledTableCell cellStyle="code_italic">table</StyledTableCell>
    <StyledTableCell cellStyle="markdown">
    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">
      Additional values required by an attribute or restriction.
    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="code">[allocation_line_shape](#allocation_line_shape)</StyledTableCell>
    <StyledTableCell cellStyle="check" checked={false}></StyledTableCell>
    <StyledTableCell cellStyle="code_italic">string</StyledTableCell>
    <StyledTableCell cellStyle="markdown">
      `Straight Line`
    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">
      Type of line features that are output by the service.
    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="code">[time_impedance](#time_impedance)</StyledTableCell>
    <StyledTableCell cellStyle="check" checked={false}></StyledTableCell>
    <StyledTableCell cellStyle="code_italic">string</StyledTableCell>
    <StyledTableCell cellStyle="markdown">
    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">
      Time-based impedance.
    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="code">[distance_impedance](#distance_impedance)</StyledTableCell>
    <StyledTableCell cellStyle="check" checked={false}></StyledTableCell>
    <StyledTableCell cellStyle="code_italic">string</StyledTableCell>
    <StyledTableCell cellStyle="markdown">
      `Miles`
    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">
      Distance-based impedance.
    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="code">[impedance](#impedance)</StyledTableCell>
    <StyledTableCell cellStyle="check" checked={false}></StyledTableCell>
    <StyledTableCell cellStyle="code_italic">string</StyledTableCell>
    <StyledTableCell cellStyle="markdown">
    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">
      Type of impedance.
    </StyledTableCell>
  </StyledTableRow> 
  <StyledTableRow>
    <StyledTableCell cellStyle="code">[save_output_network_analysis_layer](#save_output_network_analysis_layer)</StyledTableCell>
    <StyledTableCell cellStyle="check" checked={false}></StyledTableCell>
    <StyledTableCell cellStyle="code_italic">boolean</StyledTableCell>
    <StyledTableCell cellStyle="markdown">
      `false`
    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">
      Save the analysis settings as a network analysis layer file.
    </StyledTableCell>
  </StyledTableRow> 
  <StyledTableRow>
    <StyledTableCell cellStyle="code">[output_format](#output_format)</StyledTableCell>
    <StyledTableCell cellStyle="check" checked={false}></StyledTableCell>
    <StyledTableCell cellStyle="code_italic">string</StyledTableCell>
    <StyledTableCell cellStyle="markdown">
      `Feature Set`
    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">
      Format in which the output features will be returned.
    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="code">[context](#context)</StyledTableCell>
    <StyledTableCell cellStyle="check" checked={false}></StyledTableCell>
    <StyledTableCell cellStyle="code_italic">object</StyledTableCell>
    <StyledTableCell cellStyle="markdown">
    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">
      Additional settings that affect task operation
    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="code">[overrides](#overrides)</StyledTableCell>
    <StyledTableCell cellStyle="check" checked={false}></StyledTableCell>
    <StyledTableCell cellStyle="code_italic">string</StyledTableCell>
    <StyledTableCell cellStyle="markdown">
    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">
      For internal use only.
    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="code">[ignore_invalid_locations](#ignore_invalid_locations)</StyledTableCell>
    <StyledTableCell cellStyle="check" checked={false}></StyledTableCell>
    <StyledTableCell cellStyle="code_italic">boolean</StyledTableCell>
    <StyledTableCell cellStyle="markdown">
      `true`
    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">
      Ignores invalid input locations.
    </StyledTableCell>
  </StyledTableRow>
</StyledTable>

## Required parameters

<Box>

### f

<SharedContent f/>

</Box>

<Box>

### token

<SharedContent token alpPrivileges="premium:user:networkanalysis:routing or premium:user:networkanalysis:optimizedrouting" agoPrivileges="premium:user:networkanalysis"/>

</Box>

<Box>

### facilities

<Facilities />

</Box>

<Box>

### demand_points

<DemandPoints />

</Box>

## Optional parameters

<Box>

### travel_modes

<TravelModes />

</Box>

<Box>

### locate_Settings

<LocateSettings LA/>

</Box>

<Box>

### measurement_units

<MeasurementUnits locationAllocation />

</Box>

<Box>

### analysis_region

<AnalysisRegion />

</Box>

<Box>

### problem_type

<ProblemType />

</Box>

<Box>

### number_of_facilities_to_find

<NumFacilities />

</Box>

<Box>

### default_measurement_cutoff

<DefaultMeasurementCutoff />

</Box>

<Box>

### default_capacity

<DefaultCapacity />

</Box>

<Box>

### target_market_share

<TargetMarketShare />

</Box>

<Box>

### measurement_transformation_model

<MeasurementTransModel />

</Box>

<Box>

### measurement_transformation_factor

<MeasurementTransFactor />

</Box>

<Box>

### travel_direction

<TravelDirection />

</Box>

<Box>

### time_of_day

<TimeOfDay locationAllocation />

</Box>

<Box>

### time_zone_for_time_of_day

<TimeZoneForTimeOfDay />

</Box>

<Box>

### uturn_at_junctions

<UTurnAtJunctions />

</Box>

<Box>

### point_barriers

<PointBarriers />

</Box>

<Box>

### line_barriers

<LineBarriers />

</Box>

<Box>

### polygon_barriers

<PolygonBarriers />

</Box>

<Box>

### use_hierarchy

<UseHierarchy />

</Box>

<Box>

### restrictions

<Restrictions />

</Box>

<Box>

### attribute_parameter_values

<AttributeParameterValues />

</Box>

<Box>

### allocation_line_shape

<AllocationLineShape />

</Box>

<Box>

### time_impedance

<TimeImpedance />

</Box>

<Box>

### distance_impedance

<DistanceImpedance />

</Box>

<Box>

### impedance

<Impedance />

</Box>

<Box>

### save_output_network_analysis_layer

<SaveOutputNALayer />

</Box>

<Box>

### output_format

<OutputFormat />

</Box>

<Box>

### context

<Context />

</Box>

<Box>

### overrides

<Overrides />

</Box>

<Box>

### ignore_invalid_locations

<IgnoreInvalidLocations />

</Box>

## Response details 

{/* Go to [Response types](xref:///routing-types/#routes-result) for an example of the JSON response object. */}

Upon successful completion, the service returns the chosen facilities, participating demand points, connecting lines between demand points and the facilities they were assigned to, and the status of whether the analysis was successful.

<Box>

### output_facilities

<OutputFacilities />

</Box>

<Box>

### output_demand_points

<OutputDemandPoints />

</Box>

<Box>

### output_allocation_lines

<OutputAllocationLines />

</Box>

<Box>

### usage_cost

<UsageCost />

</Box>

<Box>

### solve_succeeded

<SolveSucceeded />

</Box>

<Box>

### output_result_file

<OutputResultFile />

</Box>

<Box>

### save_output_network_analysis_layer

<OutputNetworkAnalysisLayer />

</Box>

## Examples

<Note type={"mapping-guide"}>

To build client application [see API reference examples](DEVSITE/documentation/mapping-and-location-services/routing-and-directions/closest-facility-routing/#job-find-closest-fire-stations)

</Note>

<Note type={"caution"}>

If you copy and paste the request URL from the examples into a web browser, you need to replace `<yourToken>`  with a valid token. See [Security and authentication](DEVSITE/documentation/security-and-authentication/) to learn more.

</Note>

<Box>

### Choose the best store location

In this example, you will find the one store location that provides the best access to customers.

Before performing the analysis, you will need to find locations that could accommodate your store. This may include surveying the real estate market to find commercial properties that are the right size and have the right price. The candidate facilities are specified with the `facilities` facilities parameter. Households are added as `demand_points` and weighted by the number of people living there. They represent potential customers.

The facilities and demand points are in the default spatial reference, WGS84, so the `spatialReference` property is not required.

<Tabs>
<TabNav slot="tab-nav">
  <TabTitle is-active>1. Submit job</TabTitle>
  <TabTitle>2. Check job status</TabTitle>
  <TabTitle>3. Get output_facilities</TabTitle>
  <TabTitle>4. Get output_demand_points</TabTitle>
</TabNav>

<Tab is-active>

The first request submits a job and returns the job id.

**Request**

<CodeSwitcher>
  <CodeBlock language="http" source="../../shared/routing/code-samples/responseExample/job/LA_submit_job_online.http" group="HTTP" maxLines={20} expandable/>
</CodeSwitcher>

**Response (JSON)**

<CodeBlock language="json" source="../../shared/routing/code-samples/responseExample/job/LA_submit_job_response.json" maxLines={20} expandable/>

</Tab>

<Tab>

The job ID obtained from the response of the first request can be queried periodically to determine the status of the job.

**Request**

<CodeSwitcher>
  <CodeBlock language="http" source="../../shared/routing/code-samples/responseExample/job/LA_query_job_status.http" group="HTTP" maxLines={20} expandable/>
</CodeSwitcher>

**Response (JSON)**

<CodeBlock language="json" source="../../shared/routing/code-samples/responseExample/job/LA_query_job_status_response.json" maxLines={20} expandable/>

</Tab>

<Tab>

Because the job succeeded, a request can be made to return the facilities using the `output_facilities` output parameter.

**Request**

<CodeSwitcher>
  <CodeBlock language="http" source="../../shared/routing/code-samples/responseExample/job/LA_output_facilities.http" group="HTTP" maxLines={20} expandable/>
</CodeSwitcher>

**Response (JSON)**

<CodeBlock language="json" source="../../shared/routing/code-samples/responseExample/job/LA_output_facilities.json" maxLines={20} expandable/>

</Tab>

<Tab>

The output demand points are requested using `output_demand_points` .

**Request**

<CodeSwitcher>
  <CodeBlock language="http" source="../../shared/routing/code-samples/responseExample/job/LA_output_demand_points.http" group="HTTP" maxLines={20} expandable/>
</CodeSwitcher>

**Response (JSON)**

<CodeBlock language="json" source="../../shared/routing/code-samples/responseExample/job/LA_output_demand_points.json" maxLines={20} expandable/>

</Tab>

</Tabs>

</Box>

## Service limits

<If c="publication=='rest/online'">

<Note type={"note"}> 

The service works in all the supported countries as listed in the [data coverage page](/network-coverage). One or more countries are grouped together to form an analysis region. The service can determine the best region to use based on the location of the inputs; otherwise, you can use a parameter to specify a region. The service does not support requests that span more than one region. Consequently, the service will only generate results for inputs that fall within one region. 

</Note>

</If>

<UsageLimits />