---
title: "/history: Portal History"
description: "The Portal History function allows the organization administrator to query historical events that have occurred in an organization."
slug: "portal-history"
url: "/portal-history"
guid: "GUID-D5ED7537-2434-4BC9-A8A1-7D36A13BE8EF"
migratedTopicMetadata:
  FTITLE: "Portal History"
  FDESCRIPTION: "audit trail/log of organization activities "
  FCHANGES: "Title, URL, and example usage changes"
  FISHRELEASELABEL: ""
  FESRISOFTWARERELEASE: ""
  FESRITAGCLOUD: ""
  FESRIRECREATIONPROCEDURE: ""
  FESRIPRODUCTLIFECYCLE: "10.9- *"
  CREATED-ON: "12/03/2021 09:35:17"
  FAUTHOR: "tohara"
  FSTATUS: "Released"
  MODIFIED-ON: "25/08/2021 10:54:59"
  VERSION: "4"
  FRESOLUTION: ""
  DOC-LANGUAGE: "en"
  FISHREVCOUNTER: "5"
  ED: "GUID-21DBB782-2AC8-47B4-BE24-56C1AC145278"
  FUSERGROUP: "VUSERGROUPARCGISONLINEDOC"
  READ-ACCESS: ""
restInfoMetadata:
  apiPath: /portals/[portalID]/history
  urlSegments:
    - name: '[root]'
      url: /root
    - name: /portals/[portalID]/history
  methods:
    - get
  sslOnly: 'no'
---

## Example usage

The following is a sample ArcGIS Online request URL used to access the `history` resource:

```markdown
https://org.arcgis.com/sharing/rest/portals/0123456789ABCDEF/history?num=25&types=g,i&f=pjson
```

## Description

<Note type={"note"}>

This endpoint is only supported for ArcGIS Online organizations.

</Note>

The `history` resource allows organization administrators to query historical events that have occurred in an ArcGIS Online organization. When the output format is CSV, only the first 10,000 records can be included.


##  Request parameters

<StyledTable headers={"Parameter,Details"}>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">

      `num` 

    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">

      The maximum number of history events to be included in each batch of result set. The default is `25`, and the maximum allowed is `100`.

      Note that the actual number of returned results may be fewer than `num`; this happens when the number of results remaining is fewer than `num`.

      If the output format is CSV (in other words, `f=csv`), `num` is the maximum number of total events to be included in the result CSV file (up to 10,000 records); `start` no longer applies.

      Example

      ```markdown
      num=50
      ```

    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">

      `start`

    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">

      Used with `nextKey` from the response to get the next batch of events.

      Example

      ```markdown
      start=eyJjcmVhdGVkIjp7Ik4iOiIxNTM1NjMwMjA1OTI3In0sImlkIjp7Il
      MiOiIxODhkYzUzMWZkNDI0MWVhYmNhZTllY2ZkNTRjNWU5ZSJ9LCJvcmdJ
      ZCI6eyJTIjoiTGtGeXhiOXpEcTd2QU9BbSJ9fQ

      ```

    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">

      `all` 

    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">

      If `true`, all types of events are included. The default is `false`, with only actions targeted by the organization included (for example, `idType` is `a` for all events). Set the parameter to `true` when the output format is CSV.

      Values: `true` | `false`

    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">

      `id` 

    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">

      Filter events by specific target user name or target ID in a batch result set. It can be the ID of an item, a group, a role, a collaboration, an identity provider, and so on.

      Example

      ```markdown
      id=jsmith

      //or
      id=67387f9ead814880bfb1ead7f76e5386
      ```

    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">

      `types` 

    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">

      Filter events by a comma-separated list of target types in a batch result set.

      Values: `a`  (organization) | `c`  (collaboration) | `cp`  (collaboration participate) | `cpg`  (collaboration participate group) | `cw`  (collaboration workspace) | `cwp`  (collaboration workspace participate) | `g`  (group) | `i`  (item) | `idp`  (identity provider) | `inv`  (invitation) | `r`  (role) | `u`  (user)

    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">

      `actors` 

    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">

      Filter events by a comma-separated list of user names who take the actions in a batch result set.

      Example

      ```markdown
      actors=jsmith,kevinb,andrewo
      ```

    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">

      `owners` 

    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">

      Filter events by a comma-separated list of user names who own the action targets in a batch result set.

    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">

      `actions` 

    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">

      Filter events by a comma-separated list of action types in a batch result set.

      Values: `add` | `addusers` | `create` | `delete` | `removeusers` | `share` | `unshare` | `update` | `login` | `updateUsers` 

      <Note type={"note"}>

      Values `addusers` and `removeusers` refer to adding and removing users from groups.

      </Note>

    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">

      `fromDate` 

    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">

      Filter events starting from a specific time frame in ISO 8601 format or UNIX time in milliseconds.

      Example

      ```markdown
      fromDate=2017-09-01
      //or
      fromDate=1504249200000
      ```

    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">

      `toDate` 

    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">

      Filter events that occurred before a specific time frame in ISO 8601 format or UNIX time in milliseconds.

    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">

      `ips` 

    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">

      Filter events by a comma-separated list of IP addresses in a batch result set.

    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">

      `sortOrder` 

    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">

      Describes whether the results return in ascending or descending chronological order. The default is ascending.

      Values: `asc` | `desc`

    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">

      `f` 

    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">

      The response format. The default format is `html`.

      Values: `html` | `json` | `pjson` | `csv`

    </StyledTableCell>
  </StyledTableRow>
</StyledTable>


## Response properties

<StyledTable headers={"Property,Details"}>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">

      `num` 

    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">

      The number of results included in the result set of the response.

      Example

      ```markdown
      num=100
      ```

    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">

      `nextKey` 

    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">

      Used to fetch the next batch of events by calling with the `start` parameter.

    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">

      `items` 

    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">

      A JSON array of event items; each event is detailed with properties described in the [Items Properties](/portal-history#items-properties) section.

      Example

      ```markdown
      [
        {
          "id": "J423vH8fR9HV444l",
          "idType": "a",
          "orgId": "J423vH8fR9HV444l",
          "created": 1454520118902,
          "actor": "mattp",
          "action": "update",
          "ip": "172.16.254.1",
          "request": "/sharing/rest/portals/self/update",
          "reqId": "e92b4effff914fd68430995c95395b7b",
          "appId": "arcgisonline"
        },
        {
          "id": "J423vH8fR9HV444l",
          "idType": "a",
          "orgId": "J423vH8fR9HV444l",
          "created": 1454524502609,
          "actor": "michaelh",
          "action": "update",
          "ip": "172.16.254.1",
          "request": "/sharing/rest/portals/self/update",
          "reqId": "ac8127b5015b491bb337573c1e7fd2f0"
          "appId": "arcgisonline"
        }
      ]
      ```

    </StyledTableCell>
  </StyledTableRow>
</StyledTable>


## Items properties

<StyledTable headers={"Property,Details"}>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">

      `id` 

    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">

      Target user name or ID.

    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">

      `idType` 

    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">

      The type of the ID in the `id`  field.

      Values: `a` (organization) | `c` (collaboration) | `cp` (collaboration participate) | `cpg` (collaboration participate group) | `cw` (collaboration workspace) | `cwp` (collaboration workspace participate) | `g` (group) | `i` (item) | `idp` (identity provider) | `inv` (invitation) | `r` (role) | `u` (user)

    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">

      `orgId` 

    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">

      Organization ID.

    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">

      `owner` 

    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">

      The owner of the target.

    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">

      `created` 

    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">

      The UNIX time stamp in milliseconds when the event was logged.

    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">

      `actor` 

    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">

      The actor of the event.

    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">

      `action` 

    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">

      Type of action.

      Values: `add` | `addusers` | `create` | `delete` | `removeusers` | `share` | `unshare` | `update` | `login` | `updateUsers`

    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">

      `ip` 

    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">

      Actor's IP address.

    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">

      `request` 

    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">

      Operation requested by the actor.

      Example

      ```markdown
      /sharing/rest/content/users/jsmith/shareItems
      ```

    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">

      `reqId` 

    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">

      The unique identifier used to identify certain event logs together to indicate them as "one action" triggered by the actor, in other words, removing members from a group also unshares their items from the group, or bulk share multiple items altogether.

      Example

      ```markdown
      eb98161d3a8e40fcb71960480f431abb
      ```

    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">

      `clientId/appId` 

    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">

      ID of the client app where the action was performed on or by the target, for example, a target user signed into ArcGIS Online from ArcGIS Pro.

      Example

      ```markdown
      arcgispro
      ```

    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">

      `data` 

    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">

      Request parameter information used to take the action where applicable.

      Example

      ```markdown
      {"everyone":false,"org":true,"groups":[]}
      ```

    </StyledTableCell>
  </StyledTableRow>
</StyledTable>


## JSON Response syntax

```other
{
  "num": <num of results>,
  "nextKey": "<next key>",
  "items": [
    {
      "<event 1 obj>"
    },
    {
      "<event 2 obj>"
    },
    {
      "<event 3 obj>"
    },
    {
      "<event 4 obj>"
    }
  ]
}
```

## JSON Response example

```other
{
  "num": 25,
  "nextKey": "eyJjcmVhdGVkIjp7Ik4iOiIxNTM1NTYxOTU0MzI1In0sImlkIjp7IlMiOiI3ZThmNTM4Zjg2NWE0YWQ4YTlmYTFjODJkNDg3YzEyMyJ9LCJvcmdJZCI6eyJTIjoiSjQyM3ZIOGZSOUhWNDQ0ayJ9fQ",
  "items": [
    {
      "id": "93744920722644fcb926044f2cf327f6",
      "idType": "g",
      "orgId": "J423vH8fR9HV444l",
      "owner": "jsmith",
      "created": 1535671479677,
      "actor": "jsmith",
      "action": "removeusers",
      "ip": "172.16.254.1",
      "request": "/sharing/rest/community/groups/93744920722644fcb926044f2cf327f6/removeUsers",
      "reqId": "563c69aae3474d729aa3db8a4d71a7da",
      "appId": "arcgisonline",
      "data": "{\"users\":[\"[user1, user2, user3, user4]\"]}"
    },
    {
      "id": "7b2a7f54b5e34a6495f4aef3a877d1d3",
      "idType": "i",
      "orgId": "J423vH8fR9HV444l",
      "owner": "user3",
      "created": 1535671479676,
      "actor": "jsmith",
      "action": "unshare",
      "ip": "172.16.254.1",
      "request": "/sharing/rest/community/groups/93744920722644fcb926044f2cf327f6/removeUsers",
      "reqId": "563c69aae3474d729aa3db8a4d71a7da",
      "appId": "arcgisonline",
      "data": "{\"groups\":[\"93744920722644fcb926044f2cf327f6\"]}"
    },
    {
      "id": "c1ef98d5330144f6a76e11c06d64de5d",
      "idType": "i",
      "orgId": "J423vH8fR9HV444l",
      "owner": "jsmith",
      "created": 1535572693781,
      "actor": "jsmith",
      "action": "share",
      "ip": "172.16.254.1",
      "request": "/sharing/rest/content/users/jsmith/shareItems",
      "reqId": "be1f4f2992a34c9f96cdae67137f52a5",
      "appId": "arcgisonline",
      "data": "{\"everyone\":true,\"org\":true,\"groups\":[]}"
    },
    {
      "id": "803c713119084d069c9b2d86575762c7",
      "idType": "i",
      "orgId": "J423vH8fR9HV444l",
      "owner": "jsmith",
      "created": 1535572693781,
      "actor": "jsmith",
      "action": "share",
      "ip": "172.16.254.1",
      "request": "/sharing/rest/content/users/jsmith/shareItems",
      "reqId": "be1f4f2992a34c9f96cdae67137f52a5",
      "appId": "arcgisonline",
      "data": "{\"everyone\":true,\"org\":true,\"groups\":[]}"
    }
  ]
}
```