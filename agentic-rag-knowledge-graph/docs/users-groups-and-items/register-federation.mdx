---
title: "/register: Register Federation"
description: "The register federation operation (POST only) allows org admin to configure enterprise login using a SAML-based federation of identity providers."
slug: "register-federation"
url: "/register-federation"
guid: "GUID-9C9288D0-9FEC-48AE-8011-0B95D5B050B8"
migratedTopicMetadata:
  FTITLE: "Register Federation"
  FDESCRIPTION: "Register org with a SAML federation setting up enterprise login"
  FCHANGES: "Title, URL, and example usage changes"
  FISHRELEASELABEL: ""
  FESRISOFTWARERELEASE: ""
  FESRITAGCLOUD: ""
  FESRIRECREATIONPROCEDURE: ""
  FESRIPRODUCTLIFECYCLE: "10.9 *"
  CREATED-ON: "10/03/2021 15:23:10"
  FAUTHOR: "tohara"
  FSTATUS: "Released"
  MODIFIED-ON: "25/08/2021 10:54:18"
  VERSION: "4"
  FRESOLUTION: ""
  DOC-LANGUAGE: "en"
  FISHREVCOUNTER: "4"
  ED: "GUID-BA824EE1-F04C-455F-A1D9-B0B732DAEF83"
  FUSERGROUP: "VUSERGROUPARCGISONLINEDOC"
  READ-ACCESS: ""
restInfoMetadata:
  apiPath: /portals/[portalID]/idp/federation/register
  urlSegments:
    - name: '[root]'
      url: /root
    - name: /portals/[portalID]/idp/federation/register
  methods:
    - post
  sslOnly: 'no'
---

## Example usage

The following is a sample ArcGIS Online POST request for the `register` operation:

```other
POST /sharing/rest/portals/0123456789ABCDEF/idp/federation/register HTTP/1.1
Host: org.arcgis.com
Content-Type: application/x-www-form-urlencoded
Content-Length: []

name=My SAML federation&discoveryServiceUrl=https://discovery.example.com&metadataServiceUrl=https://metadata.example.com&entityId=org.maps.arcgis.com&certificate=...&userCreditAssignment=-1&groups=6dc1a6f134b44ebb8d1f1b55f0ad8753&signUpMode=Automatic&roleId=org_user&level=&userLicenseType=editorUT&userType=arcgisonly&f=pjson

```

The following is a sample ArcGIS Enterprise POST request for the `register` operation:

```other
POST /webadaptor/sharing/rest/portals/0123456789ABCDEF/idp/federation/register HTTP/1.1
Host: machine.domain.com
Content-Type: application/x-www-form-urlencoded
Content-Length: []

name=My SAML federation&discoveryServiceUrl=https://discovery.example.com&metadataServiceUrl=https://metadata.example.com&entityId=org.domain.com&certificate=...&userCreditAssignment=-1&groups=6dc1a6f134b44ebb8d1f1b55f0ad8753&signUpMode=Automatic&roleId=org_user&level=&userLicenseType=editorUT&userType=arcgisonly&f=pjson

```


## Description

The `register` operation allows organization administrator to configure enterprise login using a SAML-based federation of identity providers. An organization can be set up using either a single IDP or a federation, not both.


##  Request parameters

<StyledTable headers={"Property,Details"}>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">

      `name` 

    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">

      The SAML federation name.

      Example

      ```markdown
      name=My SAML federation
      ```

    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">

      `discoveryServiceUrl` 

    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">

      SAML federation discovery service URL.

      Example

      ```markdown
      discoveryServiceUrl=https://discovery.example.com
      ```

    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">

      `metadataServiceUrl` 

    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">

      SAML federation aggregate metadata service URL.

      Example

      ```markdown
      metadataServiceUrl=https://metadata.example.com
      ```

    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">

      `certificate` 

    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">

      Base64-encoded certificate text used to validate metadata service, enclosed between `-----BEGIN CERTIFICATE-----`  and `-----END CERTIFICATE-----` .

    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">

      `entityId` 

    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">

      Entity ID used to identify the organization in SAML federation.

      Example

      ```markdown
      entityId=org.maps.arcgis.com
      ```

    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">

      `userCreditAssignment` 

    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">

      Specific credit allocation for each joining member or to the default organization limit with `-1`. This is used when the organization has credit budgeting enabled.

    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">

      `groups` 

    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">

      An array of groups members are added upon joining the organization, used when `signUpMode` is `Automatic`.

      Example

      ```markdown
      groups=6dc1a6f134b44ebb8d1f1b55f0ad8753
      ```

    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">

      `encryptionSupported` 

    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">

      If `true`, it indicates to SAML federation that encrypted SAML assertion responses are supported. The default value is `false`.

      Values: `true` | `false`

    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">

      `supportSignedRequest` 

    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">

      If `true`, your organization signs the SAML authentication request sent to the IDP federation. The default value is `false`.

      Values: `true` | `false`

    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">

      `supportsLogoutRequest` 

    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">

      If `true`, signing out of the organization prompts logout of the IDP. The default value is `false`.

      Values: `true` | `false`

    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">

      `updateProfileAtSignin` 

    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">

      If `true`, user account information (full name and email address) stored in either ArcGIS Online or ArcGIS Enterprise is automatically synced with the information received from the IDP. The default value is `false`.

      Values: `true` | `false`

    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">

      `updateGroupsAtSignin` 

    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">

      If `true`, enables SAML-based group membership that allows organization members to link specified SAML-based enterprise groups to your organization's groups during group creation. The default is `false`.

      Values: `true` | `false`

    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">

      `signUpMode` 

    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">

      Determines the enterprise members joining mode to the organization, automatically or through an invitation.

      Values: `Automatic` | `Invitation`

    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">

      `roleId` 

    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">

      The default role members are assigned, used when `signUpMode` is `Automatic`.

    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">

      `userLicenseType` 

    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">

      Default user license type members are assigned, used when `signUpMode` is `Automatic`.

    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">

      `userType` 

    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">

      Determines if new members will have Esri access (`both`) or if Esri access will be disabled (`arcgisonly`). The default value is `arcgisonly`.

      <Note type={"note"}>

      While this parameter only applies to ArcGIS Online, the value for this parameter will still be passed through in ArcGIS Enterprise requests for this operation. this will have no impact on your ArcGIS Enterprise organization.

      </Note>

      Values: `arcgisonly` | `both`

    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">

      `f` 

    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">

      The response format. The default format is `html`.

      Values: `html` | `json` | `pjson`

    </StyledTableCell>
  </StyledTableRow>
</StyledTable>


## Response properties

<StyledTable headers={"Property,Details"}>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">

      `success` 

    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">

      Indicates if the operation was successful.

    </StyledTableCell>
  </StyledTableRow>
  <StyledTableRow>
    <StyledTableCell cellStyle="markdown">

      `federationId` 

    </StyledTableCell>
    <StyledTableCell cellStyle="markdown">

      The ID of the organization identity federation.

    </StyledTableCell>
  </StyledTableRow>
</StyledTable>


## JSON Response example

The following demonstrates a returned success response:

```other
{
  "success": true,
  "federationId": "J55ajJJ7MsY1QoQs"
}
```

The following demonstrates a returned error message:

```other
{
  "error": {
    "code": 400,
    "message": "Unable to register Federation",
    "details": [
      "'discoveryServiceUrl' must be specified.",
      "'metadataServiceUrl' must be specified."
    ]
  }
}
```